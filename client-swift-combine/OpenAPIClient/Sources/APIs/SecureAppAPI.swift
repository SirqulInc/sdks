//
// SecureAppAPI.swift
//
// Generated by openapi-generator
// https://openapi-generator.tech

import Foundation
import Combine
import OpenAPITransport


open class SecureAppAPI {
    private let transport: OpenAPITransport
    public var encoder: JSONEncoder = {
        let encoder = JSONEncoder()
        encoder.dateEncodingStrategy = .formatted(OpenISO8601DateFormatter())
        return encoder
    }()
    public var decoder: JSONDecoder = {
        let decoder = JSONDecoder()
        decoder.dateDecodingStrategy = .formatted(OpenISO8601DateFormatter())
        return decoder
    }()
    public var baseURL = URL(string: "http://localhost")

    public init(_ transport: OpenAPITransport) {
        self.transport = transport
    }

    ///
    /// Enum for parameter biometricType
    ///
    public enum CreateSecureApplicationBiometricType: String, Codable, CaseIterable {
        case fingerprint = "FINGERPRINT"
        case iris = "IRIS"
        case facial = "FACIAL"
    }
    ///
    /// Enum for parameter biometricPosition
    ///
    public enum CreateSecureApplicationBiometricPosition: String, Codable, CaseIterable {
        case unknown = "UNKNOWN"
        case leftIndex = "LEFT_INDEX"
        case leftMiddle = "LEFT_MIDDLE"
        case leftRing = "LEFT_RING"
        case leftLittle = "LEFT_LITTLE"
        case leftThumb = "LEFT_THUMB"
        case rightIndex = "RIGHT_INDEX"
        case rightMiddle = "RIGHT_MIDDLE"
        case rightRing = "RIGHT_RING"
        case rightLittle = "RIGHT_LITTLE"
        case rightThumb = "RIGHT_THUMB"
        case _left = "LEFT"
        case _right = "RIGHT"
    }
    ///
    /// Enum for parameter biometricPosition2
    ///
    public enum CreateSecureApplicationBiometricPosition2: String, Codable, CaseIterable {
        case unknown = "UNKNOWN"
        case leftIndex = "LEFT_INDEX"
        case leftMiddle = "LEFT_MIDDLE"
        case leftRing = "LEFT_RING"
        case leftLittle = "LEFT_LITTLE"
        case leftThumb = "LEFT_THUMB"
        case rightIndex = "RIGHT_INDEX"
        case rightMiddle = "RIGHT_MIDDLE"
        case rightRing = "RIGHT_RING"
        case rightLittle = "RIGHT_LITTLE"
        case rightThumb = "RIGHT_THUMB"
        case _left = "LEFT"
        case _right = "RIGHT"
    }

    /// Create Secure Application
    /// - POST /api/{version}/secure/application/create
    /// - Create a secure application record.
    /// - parameter version: (path)  
    /// - parameter accountId: (query) The unique id of the user making the request 
    /// - parameter appKey: (query) The application to secure 
    /// - parameter keyCert: (query)  
    /// - parameter trustStore: (query)  
    /// - parameter username: (query)  
    /// - parameter password: (query)  
    /// - parameter active: (query)  (optional, default to true)
    /// - parameter biometricType: (query) The type of biometric, options are: - FINGERPRINT - IRIS - FACIAL (optional, default to .facial)
    /// - parameter biometricPosition: (query) The position for the biometric file uploaded (optional, default to .unknown)
    /// - parameter biometricPosition2: (query) The position for each the biometric2 file uploaded (optional, default to .unknown)
    /// - returns: AnyPublisher<SirqulResponse, Error> 
    open func createSecureApplication(version: Double, accountId: Int64, appKey: String, keyCert: Data, trustStore: Data, username: String, password: String, active: Bool? = nil, biometricType: CreateSecureApplicationBiometricType? = nil, biometricPosition: CreateSecureApplicationBiometricPosition? = nil, biometricPosition2: CreateSecureApplicationBiometricPosition2? = nil) -> AnyPublisher<SirqulResponse, Error> {
        Deferred {
            Result<URLRequest, Error> {
                guard let baseURL = self.transport.baseURL ?? self.baseURL else {
                    throw OpenAPITransportError.badURLError()
                }
                var localVarPath = "/api/{version}/secure/application/create"
                localVarPath = localVarPath.replacingOccurrences(of: "{version}", with: "\(version)")
                let localVarURL = baseURL.appendingPathComponent(localVarPath)
                var components = URLComponents(url: localVarURL, resolvingAgainstBaseURL: false)
                var queryItems: [URLQueryItem] = []
                queryItems.append(URLQueryItem(name: "accountId", value: "\(accountId)"))
                queryItems.append(URLQueryItem(name: "appKey", value: appKey))
                if let active = active { queryItems.append(URLQueryItem(name: "active", value: active ? "true" : "false")) } 
                queryItems.append(URLQueryItem(name: "keyCert", value: ))
                queryItems.append(URLQueryItem(name: "trustStore", value: ))
                queryItems.append(URLQueryItem(name: "username", value: username))
                queryItems.append(URLQueryItem(name: "password", value: password))
                if let biometricType = biometricType { queryItems.append(URLQueryItem(name: "biometricType", value: biometricType.rawValue)) } 
                if let biometricPosition = biometricPosition { queryItems.append(URLQueryItem(name: "biometricPosition", value: biometricPosition.rawValue)) } 
                if let biometricPosition2 = biometricPosition2 { queryItems.append(URLQueryItem(name: "biometricPosition2", value: biometricPosition2.rawValue)) } 
                components?.queryItems = queryItems
                guard let requestURL = components?.url else {
                    throw OpenAPITransportError.badURLError()
                }
                var request = URLRequest(url: requestURL)
                request.httpMethod = "POST"
                return request
            }.publisher
        }.flatMap { request -> AnyPublisher<SirqulResponse, Error> in 
            return self.transport.send(request: request)
                .tryMap { response in
                    try self.decoder.decode(SirqulResponse.self, from: response.data)
                }
                .eraseToAnyPublisher()
        }.eraseToAnyPublisher()
    }


    /// Delete Secure Application
    /// - POST /api/{version}/secure/application/delete
    /// - Delete a secure application record.
    /// - parameter version: (path)  
    /// - parameter accountId: (query) The unique id of the user making the request 
    /// - parameter appKey: (query) The application to secure 
    /// - returns: AnyPublisher<SirqulResponse, Error> 
    open func deleteSecureApplication(version: Double, accountId: Int64, appKey: String) -> AnyPublisher<SirqulResponse, Error> {
        Deferred {
            Result<URLRequest, Error> {
                guard let baseURL = self.transport.baseURL ?? self.baseURL else {
                    throw OpenAPITransportError.badURLError()
                }
                var localVarPath = "/api/{version}/secure/application/delete"
                localVarPath = localVarPath.replacingOccurrences(of: "{version}", with: "\(version)")
                let localVarURL = baseURL.appendingPathComponent(localVarPath)
                var components = URLComponents(url: localVarURL, resolvingAgainstBaseURL: false)
                var queryItems: [URLQueryItem] = []
                queryItems.append(URLQueryItem(name: "accountId", value: "\(accountId)"))
                queryItems.append(URLQueryItem(name: "appKey", value: appKey))
                components?.queryItems = queryItems
                guard let requestURL = components?.url else {
                    throw OpenAPITransportError.badURLError()
                }
                var request = URLRequest(url: requestURL)
                request.httpMethod = "POST"
                return request
            }.publisher
        }.flatMap { request -> AnyPublisher<SirqulResponse, Error> in 
            return self.transport.send(request: request)
                .tryMap { response in
                    try self.decoder.decode(SirqulResponse.self, from: response.data)
                }
                .eraseToAnyPublisher()
        }.eraseToAnyPublisher()
    }


    /// Login Clear
    /// - POST /api/{version}/secure/login
    /// - Login via Clear.me. Creates a new account if logging in for the first time.
    /// - parameter version: (path)  
    /// - parameter appKey: (query) The application making the request, defines what type and position is required to make a secure login the request. 
    /// - parameter biometricFile: (query) The data file used to perform authentication 
    /// - parameter deviceId: (query) The unique id of the device making the request (optional)
    /// - parameter biometricFile2: (query) The data file used to perform authentication (optional)
    /// - parameter ageRestriction: (query) Checks user&#39;s birthday to see if they meet an age requirement. If the user is under age, an error message is returned. (optional, default to 0)
    /// - parameter returnProfile: (query) Determines whether to return a ProfileResponse on success, or a PaymentTypesResponse (optional, default to false)
    /// - parameter responseFilters: (query) If returnProfile is set to true, this determines how much of the profile should be returned, see ProfileFilters (optional, default to "PROFILE")
    /// - parameter latitude: (query) Used to update the user&#39;s current location (optional)
    /// - parameter longitude: (query) Used to update the user&#39;s current location (optional)
    /// - returns: AnyPublisher<ProfileResponse, Error> 
    open func loginSecure(version: Double, appKey: String, biometricFile: Data, deviceId: String? = nil, biometricFile2: Data? = nil, ageRestriction: Int? = nil, returnProfile: Bool? = nil, responseFilters: String? = nil, latitude: Double? = nil, longitude: Double? = nil) -> AnyPublisher<ProfileResponse, Error> {
        Deferred {
            Result<URLRequest, Error> {
                guard let baseURL = self.transport.baseURL ?? self.baseURL else {
                    throw OpenAPITransportError.badURLError()
                }
                var localVarPath = "/api/{version}/secure/login"
                localVarPath = localVarPath.replacingOccurrences(of: "{version}", with: "\(version)")
                let localVarURL = baseURL.appendingPathComponent(localVarPath)
                var components = URLComponents(url: localVarURL, resolvingAgainstBaseURL: false)
                var queryItems: [URLQueryItem] = []
                if let deviceId = deviceId { queryItems.append(URLQueryItem(name: "deviceId", value: deviceId)) } 
                queryItems.append(URLQueryItem(name: "appKey", value: appKey))
                queryItems.append(URLQueryItem(name: "biometricFile", value: ))
                if let biometricFile2 = biometricFile2 { queryItems.append(URLQueryItem(name: "biometricFile2", value: )) } 
                if let ageRestriction = ageRestriction { queryItems.append(URLQueryItem(name: "ageRestriction", value: "\(ageRestriction)")) } 
                if let returnProfile = returnProfile { queryItems.append(URLQueryItem(name: "returnProfile", value: returnProfile ? "true" : "false")) } 
                if let responseFilters = responseFilters { queryItems.append(URLQueryItem(name: "responseFilters", value: responseFilters)) } 
                if let latitude = latitude { queryItems.append(URLQueryItem(name: "latitude", value: "\(latitude)")) } 
                if let longitude = longitude { queryItems.append(URLQueryItem(name: "longitude", value: "\(longitude)")) } 
                components?.queryItems = queryItems
                guard let requestURL = components?.url else {
                    throw OpenAPITransportError.badURLError()
                }
                var request = URLRequest(url: requestURL)
                request.httpMethod = "POST"
                return request
            }.publisher
        }.flatMap { request -> AnyPublisher<ProfileResponse, Error> in 
            return self.transport.send(request: request)
                .tryMap { response in
                    try self.decoder.decode(ProfileResponse.self, from: response.data)
                }
                .eraseToAnyPublisher()
        }.eraseToAnyPublisher()
    }


    /// Purchase Clear
    /// - POST /api/{version}/secure/purchase
    /// - Purchase via Clear.me. Creates a new account if purchasing for the first time.
    /// - parameter version: (path)  
    /// - parameter body: (body) The payment request object 
    /// - returns: AnyPublisher<ProfileResponse, Error> 
    open func purchaseSecure(version: Double, body: PaymentRequest) -> AnyPublisher<ProfileResponse, Error> {
        Deferred {
            Result<URLRequest, Error> {
                guard let baseURL = self.transport.baseURL ?? self.baseURL else {
                    throw OpenAPITransportError.badURLError()
                }
                var localVarPath = "/api/{version}/secure/purchase"
                localVarPath = localVarPath.replacingOccurrences(of: "{version}", with: "\(version)")
                let localVarURL = baseURL.appendingPathComponent(localVarPath)
                let components = URLComponents(url: localVarURL, resolvingAgainstBaseURL: false)
                guard let requestURL = components?.url else {
                    throw OpenAPITransportError.badURLError()
                }
                var request = URLRequest(url: requestURL)
                request.httpMethod = "POST"
                request.httpBody = try self.encoder.encode(body)
                request.setValue("application/json", forHTTPHeaderField: "Content-Type")
                return request
            }.publisher
        }.flatMap { request -> AnyPublisher<ProfileResponse, Error> in 
            return self.transport.send(request: request)
                .tryMap { response in
                    try self.decoder.decode(ProfileResponse.self, from: response.data)
                }
                .eraseToAnyPublisher()
        }.eraseToAnyPublisher()
    }


    /// Rest Secure Application
    /// - POST /api/{version}/secure/application/reset
    /// - Reset a secure application client.
    /// - parameter version: (path)  
    /// - parameter accountId: (query) The unique id of the user making the request 
    /// - parameter appKey: (query) The application to secure 
    /// - returns: AnyPublisher<SirqulResponse, Error> 
    open func resetSecure(version: Double, accountId: Int64, appKey: String) -> AnyPublisher<SirqulResponse, Error> {
        Deferred {
            Result<URLRequest, Error> {
                guard let baseURL = self.transport.baseURL ?? self.baseURL else {
                    throw OpenAPITransportError.badURLError()
                }
                var localVarPath = "/api/{version}/secure/application/reset"
                localVarPath = localVarPath.replacingOccurrences(of: "{version}", with: "\(version)")
                let localVarURL = baseURL.appendingPathComponent(localVarPath)
                var components = URLComponents(url: localVarURL, resolvingAgainstBaseURL: false)
                var queryItems: [URLQueryItem] = []
                queryItems.append(URLQueryItem(name: "accountId", value: "\(accountId)"))
                queryItems.append(URLQueryItem(name: "appKey", value: appKey))
                components?.queryItems = queryItems
                guard let requestURL = components?.url else {
                    throw OpenAPITransportError.badURLError()
                }
                var request = URLRequest(url: requestURL)
                request.httpMethod = "POST"
                return request
            }.publisher
        }.flatMap { request -> AnyPublisher<SirqulResponse, Error> in 
            return self.transport.send(request: request)
                .tryMap { response in
                    try self.decoder.decode(SirqulResponse.self, from: response.data)
                }
                .eraseToAnyPublisher()
        }.eraseToAnyPublisher()
    }

    ///
    /// Enum for parameter biometricType
    ///
    public enum UpdateSecureApplicationBiometricType: String, Codable, CaseIterable {
        case fingerprint = "FINGERPRINT"
        case iris = "IRIS"
        case facial = "FACIAL"
    }
    ///
    /// Enum for parameter biometricPosition
    ///
    public enum UpdateSecureApplicationBiometricPosition: String, Codable, CaseIterable {
        case unknown = "UNKNOWN"
        case leftIndex = "LEFT_INDEX"
        case leftMiddle = "LEFT_MIDDLE"
        case leftRing = "LEFT_RING"
        case leftLittle = "LEFT_LITTLE"
        case leftThumb = "LEFT_THUMB"
        case rightIndex = "RIGHT_INDEX"
        case rightMiddle = "RIGHT_MIDDLE"
        case rightRing = "RIGHT_RING"
        case rightLittle = "RIGHT_LITTLE"
        case rightThumb = "RIGHT_THUMB"
        case _left = "LEFT"
        case _right = "RIGHT"
    }
    ///
    /// Enum for parameter biometricPosition2
    ///
    public enum UpdateSecureApplicationBiometricPosition2: String, Codable, CaseIterable {
        case unknown = "UNKNOWN"
        case leftIndex = "LEFT_INDEX"
        case leftMiddle = "LEFT_MIDDLE"
        case leftRing = "LEFT_RING"
        case leftLittle = "LEFT_LITTLE"
        case leftThumb = "LEFT_THUMB"
        case rightIndex = "RIGHT_INDEX"
        case rightMiddle = "RIGHT_MIDDLE"
        case rightRing = "RIGHT_RING"
        case rightLittle = "RIGHT_LITTLE"
        case rightThumb = "RIGHT_THUMB"
        case _left = "LEFT"
        case _right = "RIGHT"
    }

    /// Update Secure Application
    /// - POST /api/{version}/secure/application/update
    /// - Update a secure application record.
    /// - parameter version: (path)  
    /// - parameter accountId: (query) The unique id of the user making the request 
    /// - parameter appKey: (query) The application to secure 
    /// - parameter active: (query)  (optional)
    /// - parameter keyCert: (query)  (optional)
    /// - parameter trustStore: (query)  (optional)
    /// - parameter username: (query)  (optional)
    /// - parameter password: (query)  (optional)
    /// - parameter biometricType: (query) The type of biometric, options are: - FINGERPRINT - IRIS - FACIAL (optional)
    /// - parameter biometricPosition: (query) The position for the biometric file uploaded (optional)
    /// - parameter biometricPosition2: (query) The position for each the biometric2 file uploaded (optional)
    /// - returns: AnyPublisher<SirqulResponse, Error> 
    open func updateSecureApplication(version: Double, accountId: Int64, appKey: String, active: Bool? = nil, keyCert: Data? = nil, trustStore: Data? = nil, username: String? = nil, password: String? = nil, biometricType: UpdateSecureApplicationBiometricType? = nil, biometricPosition: UpdateSecureApplicationBiometricPosition? = nil, biometricPosition2: UpdateSecureApplicationBiometricPosition2? = nil) -> AnyPublisher<SirqulResponse, Error> {
        Deferred {
            Result<URLRequest, Error> {
                guard let baseURL = self.transport.baseURL ?? self.baseURL else {
                    throw OpenAPITransportError.badURLError()
                }
                var localVarPath = "/api/{version}/secure/application/update"
                localVarPath = localVarPath.replacingOccurrences(of: "{version}", with: "\(version)")
                let localVarURL = baseURL.appendingPathComponent(localVarPath)
                var components = URLComponents(url: localVarURL, resolvingAgainstBaseURL: false)
                var queryItems: [URLQueryItem] = []
                queryItems.append(URLQueryItem(name: "accountId", value: "\(accountId)"))
                queryItems.append(URLQueryItem(name: "appKey", value: appKey))
                if let active = active { queryItems.append(URLQueryItem(name: "active", value: active ? "true" : "false")) } 
                if let keyCert = keyCert { queryItems.append(URLQueryItem(name: "keyCert", value: )) } 
                if let trustStore = trustStore { queryItems.append(URLQueryItem(name: "trustStore", value: )) } 
                if let username = username { queryItems.append(URLQueryItem(name: "username", value: username)) } 
                if let password = password { queryItems.append(URLQueryItem(name: "password", value: password)) } 
                if let biometricType = biometricType { queryItems.append(URLQueryItem(name: "biometricType", value: biometricType.rawValue)) } 
                if let biometricPosition = biometricPosition { queryItems.append(URLQueryItem(name: "biometricPosition", value: biometricPosition.rawValue)) } 
                if let biometricPosition2 = biometricPosition2 { queryItems.append(URLQueryItem(name: "biometricPosition2", value: biometricPosition2.rawValue)) } 
                components?.queryItems = queryItems
                guard let requestURL = components?.url else {
                    throw OpenAPITransportError.badURLError()
                }
                var request = URLRequest(url: requestURL)
                request.httpMethod = "POST"
                return request
            }.publisher
        }.flatMap { request -> AnyPublisher<SirqulResponse, Error> in 
            return self.transport.send(request: request)
                .tryMap { response in
                    try self.decoder.decode(SirqulResponse.self, from: response.data)
                }
                .eraseToAnyPublisher()
        }.eraseToAnyPublisher()
    }
}
