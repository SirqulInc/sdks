// <auto-generated>
/*
 * Sirqul IoT Platform
 *
 * Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
 *
 * The version of the OpenAPI document: 3.16
 * Contact: info@sirqul.com
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */

#nullable enable

using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Net;
using System.IO;
using System.Threading.Tasks;
using Microsoft.Extensions.Logging;
using System.Net.Http;
using System.Net.Http.Headers;
using System.Text.Json;
using Org.OpenAPITools.Client;
using Org.OpenAPITools.Model;
using System.Diagnostics.CodeAnalysis;

namespace Org.OpenAPITools.Api
{
    /// <summary>
    /// Represents a collection of functions to interact with the API endpoints
    /// This class is registered as transient.
    /// </summary>
    public interface ISubscriptionApi : IApi
    {
        /// <summary>
        /// The class containing the events
        /// </summary>
        SubscriptionApiEvents Events { get; }

        /// <summary>
        /// Create Subscription
        /// </summary>
        /// <remarks>
        /// Create a subscription for a billable entity.  Provide a planId, if not provided then the base plan will be assigned.
        /// </remarks>
        /// <exception cref="ApiException">Thrown when fails to make API call</exception>
        /// <param name="accountId">The account used to perform the create, must be the responsible manager</param>
        /// <param name="planId">The plan to subscribe to, if null use default plan (optional)</param>
        /// <param name="promoCode">Set a promo code for a discount. (optional)</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="ICreateSubscriptionApiResponse"/>&gt;</returns>
        Task<ICreateSubscriptionApiResponse> CreateSubscriptionAsync(long accountId, Option<long> planId = default, Option<string> promoCode = default, System.Threading.CancellationToken cancellationToken = default);

        /// <summary>
        /// Create Subscription
        /// </summary>
        /// <remarks>
        /// Create a subscription for a billable entity.  Provide a planId, if not provided then the base plan will be assigned.
        /// </remarks>
        /// <param name="accountId">The account used to perform the create, must be the responsible manager</param>
        /// <param name="planId">The plan to subscribe to, if null use default plan (optional)</param>
        /// <param name="promoCode">Set a promo code for a discount. (optional)</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="ICreateSubscriptionApiResponse"/>?&gt;</returns>
        Task<ICreateSubscriptionApiResponse?> CreateSubscriptionOrDefaultAsync(long accountId, Option<long> planId = default, Option<string> promoCode = default, System.Threading.CancellationToken cancellationToken = default);

        /// <summary>
        /// Delete Subscription
        /// </summary>
        /// <remarks>
        /// Suspend the current subscription for the billable entity managed by the account.  The account must be the responsible manager to perform this action
        /// </remarks>
        /// <exception cref="ApiException">Thrown when fails to make API call</exception>
        /// <param name="accountId">The account used to perform the delete, must be the responsible manager</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IDeleteSubscriptionApiResponse"/>&gt;</returns>
        Task<IDeleteSubscriptionApiResponse> DeleteSubscriptionAsync(long accountId, System.Threading.CancellationToken cancellationToken = default);

        /// <summary>
        /// Delete Subscription
        /// </summary>
        /// <remarks>
        /// Suspend the current subscription for the billable entity managed by the account.  The account must be the responsible manager to perform this action
        /// </remarks>
        /// <param name="accountId">The account used to perform the delete, must be the responsible manager</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IDeleteSubscriptionApiResponse"/>?&gt;</returns>
        Task<IDeleteSubscriptionApiResponse?> DeleteSubscriptionOrDefaultAsync(long accountId, System.Threading.CancellationToken cancellationToken = default);

        /// <summary>
        /// Get Subscription
        /// </summary>
        /// <remarks>
        /// Use the accountId to determine the associated BillableEntity.  Then get the subscription.
        /// </remarks>
        /// <exception cref="ApiException">Thrown when fails to make API call</exception>
        /// <param name="accountId">The account used to perform the lookup</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IGetSubscriptionApiResponse"/>&gt;</returns>
        Task<IGetSubscriptionApiResponse> GetSubscriptionAsync(long accountId, System.Threading.CancellationToken cancellationToken = default);

        /// <summary>
        /// Get Subscription
        /// </summary>
        /// <remarks>
        /// Use the accountId to determine the associated BillableEntity.  Then get the subscription.
        /// </remarks>
        /// <param name="accountId">The account used to perform the lookup</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IGetSubscriptionApiResponse"/>?&gt;</returns>
        Task<IGetSubscriptionApiResponse?> GetSubscriptionOrDefaultAsync(long accountId, System.Threading.CancellationToken cancellationToken = default);

        /// <summary>
        /// Get Subscription Plan
        /// </summary>
        /// <remarks>
        /// Get the matched subscription plan
        /// </remarks>
        /// <exception cref="ApiException">Thrown when fails to make API call</exception>
        /// <param name="planId">The ID of the plan to get</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IGetSubscriptionPlanApiResponse"/>&gt;</returns>
        Task<IGetSubscriptionPlanApiResponse> GetSubscriptionPlanAsync(long planId, System.Threading.CancellationToken cancellationToken = default);

        /// <summary>
        /// Get Subscription Plan
        /// </summary>
        /// <remarks>
        /// Get the matched subscription plan
        /// </remarks>
        /// <param name="planId">The ID of the plan to get</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IGetSubscriptionPlanApiResponse"/>?&gt;</returns>
        Task<IGetSubscriptionPlanApiResponse?> GetSubscriptionPlanOrDefaultAsync(long planId, System.Threading.CancellationToken cancellationToken = default);

        /// <summary>
        /// List Subscription Plans
        /// </summary>
        /// <remarks>
        /// Get the matched subscription plan
        /// </remarks>
        /// <exception cref="ApiException">Thrown when fails to make API call</exception>
        /// <param name="visible">Include visible only (true), hidden only (false), or all (null) (optional)</param>
        /// <param name="role">The role the plan is targeted for, values are: DEVELOPER, RETAILER, ADVERTISER (optional)</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IGetSubscriptionPlansApiResponse"/>&gt;</returns>
        Task<IGetSubscriptionPlansApiResponse> GetSubscriptionPlansAsync(Option<bool> visible = default, Option<string> role = default, System.Threading.CancellationToken cancellationToken = default);

        /// <summary>
        /// List Subscription Plans
        /// </summary>
        /// <remarks>
        /// Get the matched subscription plan
        /// </remarks>
        /// <param name="visible">Include visible only (true), hidden only (false), or all (null) (optional)</param>
        /// <param name="role">The role the plan is targeted for, values are: DEVELOPER, RETAILER, ADVERTISER (optional)</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IGetSubscriptionPlansApiResponse"/>?&gt;</returns>
        Task<IGetSubscriptionPlansApiResponse?> GetSubscriptionPlansOrDefaultAsync(Option<bool> visible = default, Option<string> role = default, System.Threading.CancellationToken cancellationToken = default);

        /// <summary>
        /// Get Subscription Usage
        /// </summary>
        /// <remarks>
        /// Use the accountId to determine the associated BillableEntity.  Then get the application usage.
        /// </remarks>
        /// <exception cref="ApiException">Thrown when fails to make API call</exception>
        /// <param name="accountId">The account used to perform the lookup</param>
        /// <param name="applicationId">Get for just 1 application instead of the BillableEntity (optional)</param>
        /// <param name="start">The start time frame (optional)</param>
        /// <param name="end">The end time frame (optional)</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IGetSubscriptionUsageApiResponse"/>&gt;</returns>
        Task<IGetSubscriptionUsageApiResponse> GetSubscriptionUsageAsync(long accountId, Option<long> applicationId = default, Option<long> start = default, Option<long> end = default, System.Threading.CancellationToken cancellationToken = default);

        /// <summary>
        /// Get Subscription Usage
        /// </summary>
        /// <remarks>
        /// Use the accountId to determine the associated BillableEntity.  Then get the application usage.
        /// </remarks>
        /// <param name="accountId">The account used to perform the lookup</param>
        /// <param name="applicationId">Get for just 1 application instead of the BillableEntity (optional)</param>
        /// <param name="start">The start time frame (optional)</param>
        /// <param name="end">The end time frame (optional)</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IGetSubscriptionUsageApiResponse"/>?&gt;</returns>
        Task<IGetSubscriptionUsageApiResponse?> GetSubscriptionUsageOrDefaultAsync(long accountId, Option<long> applicationId = default, Option<long> start = default, Option<long> end = default, System.Threading.CancellationToken cancellationToken = default);

        /// <summary>
        /// Update Subscription
        /// </summary>
        /// <remarks>
        /// Updates the subscription for the billable entity for an account
        /// </remarks>
        /// <exception cref="ApiException">Thrown when fails to make API call</exception>
        /// <param name="accountId">The account used to perform the update, must be the responsible manager</param>
        /// <param name="planId">The plan to subscribe to (optional)</param>
        /// <param name="promoCode">Set a promo code for a discount. (optional)</param>
        /// <param name="active">Set active status (optional)</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IUpdateSubscriptionApiResponse"/>&gt;</returns>
        Task<IUpdateSubscriptionApiResponse> UpdateSubscriptionAsync(long accountId, Option<long> planId = default, Option<string> promoCode = default, Option<bool> active = default, System.Threading.CancellationToken cancellationToken = default);

        /// <summary>
        /// Update Subscription
        /// </summary>
        /// <remarks>
        /// Updates the subscription for the billable entity for an account
        /// </remarks>
        /// <param name="accountId">The account used to perform the update, must be the responsible manager</param>
        /// <param name="planId">The plan to subscribe to (optional)</param>
        /// <param name="promoCode">Set a promo code for a discount. (optional)</param>
        /// <param name="active">Set active status (optional)</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IUpdateSubscriptionApiResponse"/>?&gt;</returns>
        Task<IUpdateSubscriptionApiResponse?> UpdateSubscriptionOrDefaultAsync(long accountId, Option<long> planId = default, Option<string> promoCode = default, Option<bool> active = default, System.Threading.CancellationToken cancellationToken = default);
    }

    /// <summary>
    /// The <see cref="ICreateSubscriptionApiResponse"/>
    /// </summary>
    public interface ICreateSubscriptionApiResponse : Org.OpenAPITools.Client.IApiResponse, IOk<Org.OpenAPITools.Model.SubscriptionResponse?>
    {
        /// <summary>
        /// Returns true if the response is 200 Ok
        /// </summary>
        /// <returns></returns>
        bool IsOk { get; }
    }

    /// <summary>
    /// The <see cref="IDeleteSubscriptionApiResponse"/>
    /// </summary>
    public interface IDeleteSubscriptionApiResponse : Org.OpenAPITools.Client.IApiResponse, IOk<Org.OpenAPITools.Model.SirqulResponse?>
    {
        /// <summary>
        /// Returns true if the response is 200 Ok
        /// </summary>
        /// <returns></returns>
        bool IsOk { get; }
    }

    /// <summary>
    /// The <see cref="IGetSubscriptionApiResponse"/>
    /// </summary>
    public interface IGetSubscriptionApiResponse : Org.OpenAPITools.Client.IApiResponse, IOk<Org.OpenAPITools.Model.SubscriptionResponse?>
    {
        /// <summary>
        /// Returns true if the response is 200 Ok
        /// </summary>
        /// <returns></returns>
        bool IsOk { get; }
    }

    /// <summary>
    /// The <see cref="IGetSubscriptionPlanApiResponse"/>
    /// </summary>
    public interface IGetSubscriptionPlanApiResponse : Org.OpenAPITools.Client.IApiResponse, IOk<Org.OpenAPITools.Model.SubscriptionPlanResponse?>
    {
        /// <summary>
        /// Returns true if the response is 200 Ok
        /// </summary>
        /// <returns></returns>
        bool IsOk { get; }
    }

    /// <summary>
    /// The <see cref="IGetSubscriptionPlansApiResponse"/>
    /// </summary>
    public interface IGetSubscriptionPlansApiResponse : Org.OpenAPITools.Client.IApiResponse, IOk<List<SubscriptionPlanResponse>?>
    {
        /// <summary>
        /// Returns true if the response is 200 Ok
        /// </summary>
        /// <returns></returns>
        bool IsOk { get; }
    }

    /// <summary>
    /// The <see cref="IGetSubscriptionUsageApiResponse"/>
    /// </summary>
    public interface IGetSubscriptionUsageApiResponse : Org.OpenAPITools.Client.IApiResponse, IOk<Org.OpenAPITools.Model.ApplicationUsageResponse?>
    {
        /// <summary>
        /// Returns true if the response is 200 Ok
        /// </summary>
        /// <returns></returns>
        bool IsOk { get; }
    }

    /// <summary>
    /// The <see cref="IUpdateSubscriptionApiResponse"/>
    /// </summary>
    public interface IUpdateSubscriptionApiResponse : Org.OpenAPITools.Client.IApiResponse, IOk<Org.OpenAPITools.Model.SubscriptionResponse?>
    {
        /// <summary>
        /// Returns true if the response is 200 Ok
        /// </summary>
        /// <returns></returns>
        bool IsOk { get; }
    }

    /// <summary>
    /// Represents a collection of functions to interact with the API endpoints
    /// </summary>
    public class SubscriptionApiEvents
    {
        /// <summary>
        /// The event raised after the server response
        /// </summary>
        public event EventHandler<ApiResponseEventArgs>? OnCreateSubscription;

        /// <summary>
        /// The event raised after an error querying the server
        /// </summary>
        public event EventHandler<ExceptionEventArgs>? OnErrorCreateSubscription;

        internal void ExecuteOnCreateSubscription(SubscriptionApi.CreateSubscriptionApiResponse apiResponse)
        {
            OnCreateSubscription?.Invoke(this, new ApiResponseEventArgs(apiResponse));
        }

        internal void ExecuteOnErrorCreateSubscription(Exception exception)
        {
            OnErrorCreateSubscription?.Invoke(this, new ExceptionEventArgs(exception));
        }

        /// <summary>
        /// The event raised after the server response
        /// </summary>
        public event EventHandler<ApiResponseEventArgs>? OnDeleteSubscription;

        /// <summary>
        /// The event raised after an error querying the server
        /// </summary>
        public event EventHandler<ExceptionEventArgs>? OnErrorDeleteSubscription;

        internal void ExecuteOnDeleteSubscription(SubscriptionApi.DeleteSubscriptionApiResponse apiResponse)
        {
            OnDeleteSubscription?.Invoke(this, new ApiResponseEventArgs(apiResponse));
        }

        internal void ExecuteOnErrorDeleteSubscription(Exception exception)
        {
            OnErrorDeleteSubscription?.Invoke(this, new ExceptionEventArgs(exception));
        }

        /// <summary>
        /// The event raised after the server response
        /// </summary>
        public event EventHandler<ApiResponseEventArgs>? OnGetSubscription;

        /// <summary>
        /// The event raised after an error querying the server
        /// </summary>
        public event EventHandler<ExceptionEventArgs>? OnErrorGetSubscription;

        internal void ExecuteOnGetSubscription(SubscriptionApi.GetSubscriptionApiResponse apiResponse)
        {
            OnGetSubscription?.Invoke(this, new ApiResponseEventArgs(apiResponse));
        }

        internal void ExecuteOnErrorGetSubscription(Exception exception)
        {
            OnErrorGetSubscription?.Invoke(this, new ExceptionEventArgs(exception));
        }

        /// <summary>
        /// The event raised after the server response
        /// </summary>
        public event EventHandler<ApiResponseEventArgs>? OnGetSubscriptionPlan;

        /// <summary>
        /// The event raised after an error querying the server
        /// </summary>
        public event EventHandler<ExceptionEventArgs>? OnErrorGetSubscriptionPlan;

        internal void ExecuteOnGetSubscriptionPlan(SubscriptionApi.GetSubscriptionPlanApiResponse apiResponse)
        {
            OnGetSubscriptionPlan?.Invoke(this, new ApiResponseEventArgs(apiResponse));
        }

        internal void ExecuteOnErrorGetSubscriptionPlan(Exception exception)
        {
            OnErrorGetSubscriptionPlan?.Invoke(this, new ExceptionEventArgs(exception));
        }

        /// <summary>
        /// The event raised after the server response
        /// </summary>
        public event EventHandler<ApiResponseEventArgs>? OnGetSubscriptionPlans;

        /// <summary>
        /// The event raised after an error querying the server
        /// </summary>
        public event EventHandler<ExceptionEventArgs>? OnErrorGetSubscriptionPlans;

        internal void ExecuteOnGetSubscriptionPlans(SubscriptionApi.GetSubscriptionPlansApiResponse apiResponse)
        {
            OnGetSubscriptionPlans?.Invoke(this, new ApiResponseEventArgs(apiResponse));
        }

        internal void ExecuteOnErrorGetSubscriptionPlans(Exception exception)
        {
            OnErrorGetSubscriptionPlans?.Invoke(this, new ExceptionEventArgs(exception));
        }

        /// <summary>
        /// The event raised after the server response
        /// </summary>
        public event EventHandler<ApiResponseEventArgs>? OnGetSubscriptionUsage;

        /// <summary>
        /// The event raised after an error querying the server
        /// </summary>
        public event EventHandler<ExceptionEventArgs>? OnErrorGetSubscriptionUsage;

        internal void ExecuteOnGetSubscriptionUsage(SubscriptionApi.GetSubscriptionUsageApiResponse apiResponse)
        {
            OnGetSubscriptionUsage?.Invoke(this, new ApiResponseEventArgs(apiResponse));
        }

        internal void ExecuteOnErrorGetSubscriptionUsage(Exception exception)
        {
            OnErrorGetSubscriptionUsage?.Invoke(this, new ExceptionEventArgs(exception));
        }

        /// <summary>
        /// The event raised after the server response
        /// </summary>
        public event EventHandler<ApiResponseEventArgs>? OnUpdateSubscription;

        /// <summary>
        /// The event raised after an error querying the server
        /// </summary>
        public event EventHandler<ExceptionEventArgs>? OnErrorUpdateSubscription;

        internal void ExecuteOnUpdateSubscription(SubscriptionApi.UpdateSubscriptionApiResponse apiResponse)
        {
            OnUpdateSubscription?.Invoke(this, new ApiResponseEventArgs(apiResponse));
        }

        internal void ExecuteOnErrorUpdateSubscription(Exception exception)
        {
            OnErrorUpdateSubscription?.Invoke(this, new ExceptionEventArgs(exception));
        }
    }

    /// <summary>
    /// Represents a collection of functions to interact with the API endpoints
    /// </summary>
    public sealed partial class SubscriptionApi : ISubscriptionApi
    {
        private JsonSerializerOptions _jsonSerializerOptions;

        /// <summary>
        /// The logger factory
        /// </summary>
        public ILoggerFactory LoggerFactory { get; }

        /// <summary>
        /// The logger
        /// </summary>
        public ILogger<SubscriptionApi> Logger { get; }

        /// <summary>
        /// The HttpClient
        /// </summary>
        public HttpClient HttpClient { get; }

        /// <summary>
        /// The class containing the events
        /// </summary>
        public SubscriptionApiEvents Events { get; }

        /// <summary>
        /// A token provider of type <see cref="ApiKeyProvider"/>
        /// </summary>
        public TokenProvider<ApiKeyToken> ApiKeyProvider { get; }

        /// <summary>
        /// Initializes a new instance of the <see cref="SubscriptionApi"/> class.
        /// </summary>
        /// <returns></returns>
        public SubscriptionApi(ILogger<SubscriptionApi> logger, ILoggerFactory loggerFactory, HttpClient httpClient, JsonSerializerOptionsProvider jsonSerializerOptionsProvider, SubscriptionApiEvents subscriptionApiEvents,
            TokenProvider<ApiKeyToken> apiKeyProvider)
        {
            _jsonSerializerOptions = jsonSerializerOptionsProvider.Options;
            LoggerFactory = loggerFactory;
            Logger = LoggerFactory.CreateLogger<SubscriptionApi>();
            HttpClient = httpClient;
            Events = subscriptionApiEvents;
            ApiKeyProvider = apiKeyProvider;
        }

        partial void FormatCreateSubscription(ref long accountId, ref Option<long> planId, ref Option<string> promoCode);

        /// <summary>
        /// Validates the request parameters
        /// </summary>
        /// <param name="promoCode"></param>
        /// <returns></returns>
        private void ValidateCreateSubscription(Option<string> promoCode)
        {
            if (promoCode.IsSet && promoCode.Value == null)
                throw new ArgumentNullException(nameof(promoCode));
        }

        /// <summary>
        /// Processes the server response
        /// </summary>
        /// <param name="apiResponseLocalVar"></param>
        /// <param name="accountId"></param>
        /// <param name="planId"></param>
        /// <param name="promoCode"></param>
        private void AfterCreateSubscriptionDefaultImplementation(ICreateSubscriptionApiResponse apiResponseLocalVar, long accountId, Option<long> planId, Option<string> promoCode)
        {
            bool suppressDefaultLog = false;
            AfterCreateSubscription(ref suppressDefaultLog, apiResponseLocalVar, accountId, planId, promoCode);
            if (!suppressDefaultLog)
                Logger.LogInformation("{0,-9} | {1} | {2}", (apiResponseLocalVar.DownloadedAt - apiResponseLocalVar.RequestedAt).TotalSeconds, apiResponseLocalVar.StatusCode, apiResponseLocalVar.Path);
        }

        /// <summary>
        /// Processes the server response
        /// </summary>
        /// <param name="suppressDefaultLog"></param>
        /// <param name="apiResponseLocalVar"></param>
        /// <param name="accountId"></param>
        /// <param name="planId"></param>
        /// <param name="promoCode"></param>
        partial void AfterCreateSubscription(ref bool suppressDefaultLog, ICreateSubscriptionApiResponse apiResponseLocalVar, long accountId, Option<long> planId, Option<string> promoCode);

        /// <summary>
        /// Logs exceptions that occur while retrieving the server response
        /// </summary>
        /// <param name="exceptionLocalVar"></param>
        /// <param name="pathFormatLocalVar"></param>
        /// <param name="pathLocalVar"></param>
        /// <param name="accountId"></param>
        /// <param name="planId"></param>
        /// <param name="promoCode"></param>
        private void OnErrorCreateSubscriptionDefaultImplementation(Exception exceptionLocalVar, string pathFormatLocalVar, string pathLocalVar, long accountId, Option<long> planId, Option<string> promoCode)
        {
            bool suppressDefaultLogLocalVar = false;
            OnErrorCreateSubscription(ref suppressDefaultLogLocalVar, exceptionLocalVar, pathFormatLocalVar, pathLocalVar, accountId, planId, promoCode);
            if (!suppressDefaultLogLocalVar)
                Logger.LogError(exceptionLocalVar, "An error occurred while sending the request to the server.");
        }

        /// <summary>
        /// A partial method that gives developers a way to provide customized exception handling
        /// </summary>
        /// <param name="suppressDefaultLogLocalVar"></param>
        /// <param name="exceptionLocalVar"></param>
        /// <param name="pathFormatLocalVar"></param>
        /// <param name="pathLocalVar"></param>
        /// <param name="accountId"></param>
        /// <param name="planId"></param>
        /// <param name="promoCode"></param>
        partial void OnErrorCreateSubscription(ref bool suppressDefaultLogLocalVar, Exception exceptionLocalVar, string pathFormatLocalVar, string pathLocalVar, long accountId, Option<long> planId, Option<string> promoCode);

        /// <summary>
        /// Create Subscription Create a subscription for a billable entity.  Provide a planId, if not provided then the base plan will be assigned.
        /// </summary>
        /// <param name="accountId">The account used to perform the create, must be the responsible manager</param>
        /// <param name="planId">The plan to subscribe to, if null use default plan (optional)</param>
        /// <param name="promoCode">Set a promo code for a discount. (optional)</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="ICreateSubscriptionApiResponse"/>&gt;</returns>
        public async Task<ICreateSubscriptionApiResponse?> CreateSubscriptionOrDefaultAsync(long accountId, Option<long> planId = default, Option<string> promoCode = default, System.Threading.CancellationToken cancellationToken = default)
        {
            try
            {
                return await CreateSubscriptionAsync(accountId, planId, promoCode, cancellationToken).ConfigureAwait(false);
            }
            catch (Exception)
            {
                return null;
            }
        }

        /// <summary>
        /// Create Subscription Create a subscription for a billable entity.  Provide a planId, if not provided then the base plan will be assigned.
        /// </summary>
        /// <exception cref="ApiException">Thrown when fails to make API call</exception>
        /// <param name="accountId">The account used to perform the create, must be the responsible manager</param>
        /// <param name="planId">The plan to subscribe to, if null use default plan (optional)</param>
        /// <param name="promoCode">Set a promo code for a discount. (optional)</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="ICreateSubscriptionApiResponse"/>&gt;</returns>
        public async Task<ICreateSubscriptionApiResponse> CreateSubscriptionAsync(long accountId, Option<long> planId = default, Option<string> promoCode = default, System.Threading.CancellationToken cancellationToken = default)
        {
            UriBuilder uriBuilderLocalVar = new UriBuilder();

            try
            {
                ValidateCreateSubscription(promoCode);

                FormatCreateSubscription(ref accountId, ref planId, ref promoCode);

                using (HttpRequestMessage httpRequestMessageLocalVar = new HttpRequestMessage())
                {
                    uriBuilderLocalVar.Host = HttpClient.BaseAddress!.Host;
                    uriBuilderLocalVar.Port = HttpClient.BaseAddress.Port;
                    uriBuilderLocalVar.Scheme = HttpClient.BaseAddress.Scheme;
                    uriBuilderLocalVar.Path = HttpClient.BaseAddress.AbsolutePath == "/"
                        ? "/subscription/create"
                        : string.Concat(HttpClient.BaseAddress.AbsolutePath, "/subscription/create");

                    System.Collections.Specialized.NameValueCollection parseQueryStringLocalVar = System.Web.HttpUtility.ParseQueryString(string.Empty);

                    parseQueryStringLocalVar["accountId"] = ClientUtils.ParameterToString(accountId);

                    if (planId.IsSet)
                        parseQueryStringLocalVar["planId"] = ClientUtils.ParameterToString(planId.Value);

                    if (promoCode.IsSet)
                        parseQueryStringLocalVar["promoCode"] = ClientUtils.ParameterToString(promoCode.Value);

                    uriBuilderLocalVar.Query = parseQueryStringLocalVar.ToString();

                    httpRequestMessageLocalVar.RequestUri = uriBuilderLocalVar.Uri;

                    string[] acceptLocalVars = new string[] {
                        "*/*"
                    };

                    IEnumerable<MediaTypeWithQualityHeaderValue> acceptHeaderValuesLocalVar = ClientUtils.SelectHeaderAcceptArray(acceptLocalVars);

                    foreach (var acceptLocalVar in acceptHeaderValuesLocalVar)
                        httpRequestMessageLocalVar.Headers.Accept.Add(acceptLocalVar);

                    httpRequestMessageLocalVar.Method = HttpMethod.Post;

                    DateTime requestedAtLocalVar = DateTime.UtcNow;

                    using (HttpResponseMessage httpResponseMessageLocalVar = await HttpClient.SendAsync(httpRequestMessageLocalVar, cancellationToken).ConfigureAwait(false))
                    {
                        ILogger<CreateSubscriptionApiResponse> apiResponseLoggerLocalVar = LoggerFactory.CreateLogger<CreateSubscriptionApiResponse>();
                        CreateSubscriptionApiResponse apiResponseLocalVar;

                        switch ((int)httpResponseMessageLocalVar.StatusCode) {
                            default: {
                                string responseContentLocalVar = await httpResponseMessageLocalVar.Content.ReadAsStringAsync(cancellationToken).ConfigureAwait(false);
                                apiResponseLocalVar = new(apiResponseLoggerLocalVar, httpRequestMessageLocalVar, httpResponseMessageLocalVar, responseContentLocalVar, "/subscription/create", requestedAtLocalVar, _jsonSerializerOptions);

                                break;
                            }
                        }

                        AfterCreateSubscriptionDefaultImplementation(apiResponseLocalVar, accountId, planId, promoCode);

                        Events.ExecuteOnCreateSubscription(apiResponseLocalVar);

                        return apiResponseLocalVar;
                    }
                }
            }
            catch(Exception e)
            {
                OnErrorCreateSubscriptionDefaultImplementation(e, "/subscription/create", uriBuilderLocalVar.Path, accountId, planId, promoCode);
                Events.ExecuteOnErrorCreateSubscription(e);
                throw;
            }
        }

        /// <summary>
        /// The <see cref="CreateSubscriptionApiResponse"/>
        /// </summary>
        public partial class CreateSubscriptionApiResponse : Org.OpenAPITools.Client.ApiResponse, ICreateSubscriptionApiResponse
        {
            /// <summary>
            /// The logger
            /// </summary>
            public ILogger<CreateSubscriptionApiResponse> Logger { get; }

            /// <summary>
            /// The <see cref="CreateSubscriptionApiResponse"/>
            /// </summary>
            /// <param name="logger"></param>
            /// <param name="httpRequestMessage"></param>
            /// <param name="httpResponseMessage"></param>
            /// <param name="rawContent"></param>
            /// <param name="path"></param>
            /// <param name="requestedAt"></param>
            /// <param name="jsonSerializerOptions"></param>
            public CreateSubscriptionApiResponse(ILogger<CreateSubscriptionApiResponse> logger, System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage, string rawContent, string path, DateTime requestedAt, System.Text.Json.JsonSerializerOptions jsonSerializerOptions) : base(httpRequestMessage, httpResponseMessage, rawContent, path, requestedAt, jsonSerializerOptions)
            {
                Logger = logger;
                OnCreated(httpRequestMessage, httpResponseMessage);
            }

            /// <summary>
            /// The <see cref="CreateSubscriptionApiResponse"/>
            /// </summary>
            /// <param name="logger"></param>
            /// <param name="httpRequestMessage"></param>
            /// <param name="httpResponseMessage"></param>
            /// <param name="contentStream"></param>
            /// <param name="path"></param>
            /// <param name="requestedAt"></param>
            /// <param name="jsonSerializerOptions"></param>
            public CreateSubscriptionApiResponse(ILogger<CreateSubscriptionApiResponse> logger, System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage, System.IO.Stream contentStream, string path, DateTime requestedAt, System.Text.Json.JsonSerializerOptions jsonSerializerOptions) : base(httpRequestMessage, httpResponseMessage, contentStream, path, requestedAt, jsonSerializerOptions)
            {
                Logger = logger;
                OnCreated(httpRequestMessage, httpResponseMessage);
            }

            partial void OnCreated(global::System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage);

            /// <summary>
            /// Returns true if the response is 200 Ok
            /// </summary>
            /// <returns></returns>
            public bool IsOk => 200 == (int)StatusCode;

            /// <summary>
            /// Deserializes the response if the response is 200 Ok
            /// </summary>
            /// <returns></returns>
            public Org.OpenAPITools.Model.SubscriptionResponse? Ok()
            {
                // This logic may be modified with the AsModel.mustache template
                return IsOk
                    ? System.Text.Json.JsonSerializer.Deserialize<Org.OpenAPITools.Model.SubscriptionResponse>(RawContent, _jsonSerializerOptions)
                    : null;
            }

            /// <summary>
            /// Returns true if the response is 200 Ok and the deserialized response is not null
            /// </summary>
            /// <param name="result"></param>
            /// <returns></returns>
            public bool TryOk([NotNullWhen(true)]out Org.OpenAPITools.Model.SubscriptionResponse? result)
            {
                result = null;

                try
                {
                    result = Ok();
                } catch (Exception e)
                {
                    OnDeserializationErrorDefaultImplementation(e, (HttpStatusCode)200);
                }

                return result != null;
            }

            private void OnDeserializationErrorDefaultImplementation(Exception exception, HttpStatusCode httpStatusCode)
            {
                bool suppressDefaultLog = false;
                OnDeserializationError(ref suppressDefaultLog, exception, httpStatusCode);
                if (!suppressDefaultLog)
                    Logger.LogError(exception, "An error occurred while deserializing the {code} response.", httpStatusCode);
            }

            partial void OnDeserializationError(ref bool suppressDefaultLog, Exception exception, HttpStatusCode httpStatusCode);
        }

        partial void FormatDeleteSubscription(ref long accountId);

        /// <summary>
        /// Processes the server response
        /// </summary>
        /// <param name="apiResponseLocalVar"></param>
        /// <param name="accountId"></param>
        private void AfterDeleteSubscriptionDefaultImplementation(IDeleteSubscriptionApiResponse apiResponseLocalVar, long accountId)
        {
            bool suppressDefaultLog = false;
            AfterDeleteSubscription(ref suppressDefaultLog, apiResponseLocalVar, accountId);
            if (!suppressDefaultLog)
                Logger.LogInformation("{0,-9} | {1} | {2}", (apiResponseLocalVar.DownloadedAt - apiResponseLocalVar.RequestedAt).TotalSeconds, apiResponseLocalVar.StatusCode, apiResponseLocalVar.Path);
        }

        /// <summary>
        /// Processes the server response
        /// </summary>
        /// <param name="suppressDefaultLog"></param>
        /// <param name="apiResponseLocalVar"></param>
        /// <param name="accountId"></param>
        partial void AfterDeleteSubscription(ref bool suppressDefaultLog, IDeleteSubscriptionApiResponse apiResponseLocalVar, long accountId);

        /// <summary>
        /// Logs exceptions that occur while retrieving the server response
        /// </summary>
        /// <param name="exceptionLocalVar"></param>
        /// <param name="pathFormatLocalVar"></param>
        /// <param name="pathLocalVar"></param>
        /// <param name="accountId"></param>
        private void OnErrorDeleteSubscriptionDefaultImplementation(Exception exceptionLocalVar, string pathFormatLocalVar, string pathLocalVar, long accountId)
        {
            bool suppressDefaultLogLocalVar = false;
            OnErrorDeleteSubscription(ref suppressDefaultLogLocalVar, exceptionLocalVar, pathFormatLocalVar, pathLocalVar, accountId);
            if (!suppressDefaultLogLocalVar)
                Logger.LogError(exceptionLocalVar, "An error occurred while sending the request to the server.");
        }

        /// <summary>
        /// A partial method that gives developers a way to provide customized exception handling
        /// </summary>
        /// <param name="suppressDefaultLogLocalVar"></param>
        /// <param name="exceptionLocalVar"></param>
        /// <param name="pathFormatLocalVar"></param>
        /// <param name="pathLocalVar"></param>
        /// <param name="accountId"></param>
        partial void OnErrorDeleteSubscription(ref bool suppressDefaultLogLocalVar, Exception exceptionLocalVar, string pathFormatLocalVar, string pathLocalVar, long accountId);

        /// <summary>
        /// Delete Subscription Suspend the current subscription for the billable entity managed by the account.  The account must be the responsible manager to perform this action
        /// </summary>
        /// <param name="accountId">The account used to perform the delete, must be the responsible manager</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IDeleteSubscriptionApiResponse"/>&gt;</returns>
        public async Task<IDeleteSubscriptionApiResponse?> DeleteSubscriptionOrDefaultAsync(long accountId, System.Threading.CancellationToken cancellationToken = default)
        {
            try
            {
                return await DeleteSubscriptionAsync(accountId, cancellationToken).ConfigureAwait(false);
            }
            catch (Exception)
            {
                return null;
            }
        }

        /// <summary>
        /// Delete Subscription Suspend the current subscription for the billable entity managed by the account.  The account must be the responsible manager to perform this action
        /// </summary>
        /// <exception cref="ApiException">Thrown when fails to make API call</exception>
        /// <param name="accountId">The account used to perform the delete, must be the responsible manager</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IDeleteSubscriptionApiResponse"/>&gt;</returns>
        public async Task<IDeleteSubscriptionApiResponse> DeleteSubscriptionAsync(long accountId, System.Threading.CancellationToken cancellationToken = default)
        {
            UriBuilder uriBuilderLocalVar = new UriBuilder();

            try
            {
                FormatDeleteSubscription(ref accountId);

                using (HttpRequestMessage httpRequestMessageLocalVar = new HttpRequestMessage())
                {
                    uriBuilderLocalVar.Host = HttpClient.BaseAddress!.Host;
                    uriBuilderLocalVar.Port = HttpClient.BaseAddress.Port;
                    uriBuilderLocalVar.Scheme = HttpClient.BaseAddress.Scheme;
                    uriBuilderLocalVar.Path = HttpClient.BaseAddress.AbsolutePath == "/"
                        ? "/subscription/delete"
                        : string.Concat(HttpClient.BaseAddress.AbsolutePath, "/subscription/delete");

                    System.Collections.Specialized.NameValueCollection parseQueryStringLocalVar = System.Web.HttpUtility.ParseQueryString(string.Empty);

                    parseQueryStringLocalVar["accountId"] = ClientUtils.ParameterToString(accountId);

                    uriBuilderLocalVar.Query = parseQueryStringLocalVar.ToString();

                    httpRequestMessageLocalVar.RequestUri = uriBuilderLocalVar.Uri;

                    string[] acceptLocalVars = new string[] {
                        "*/*"
                    };

                    IEnumerable<MediaTypeWithQualityHeaderValue> acceptHeaderValuesLocalVar = ClientUtils.SelectHeaderAcceptArray(acceptLocalVars);

                    foreach (var acceptLocalVar in acceptHeaderValuesLocalVar)
                        httpRequestMessageLocalVar.Headers.Accept.Add(acceptLocalVar);

                    httpRequestMessageLocalVar.Method = HttpMethod.Post;

                    DateTime requestedAtLocalVar = DateTime.UtcNow;

                    using (HttpResponseMessage httpResponseMessageLocalVar = await HttpClient.SendAsync(httpRequestMessageLocalVar, cancellationToken).ConfigureAwait(false))
                    {
                        ILogger<DeleteSubscriptionApiResponse> apiResponseLoggerLocalVar = LoggerFactory.CreateLogger<DeleteSubscriptionApiResponse>();
                        DeleteSubscriptionApiResponse apiResponseLocalVar;

                        switch ((int)httpResponseMessageLocalVar.StatusCode) {
                            default: {
                                string responseContentLocalVar = await httpResponseMessageLocalVar.Content.ReadAsStringAsync(cancellationToken).ConfigureAwait(false);
                                apiResponseLocalVar = new(apiResponseLoggerLocalVar, httpRequestMessageLocalVar, httpResponseMessageLocalVar, responseContentLocalVar, "/subscription/delete", requestedAtLocalVar, _jsonSerializerOptions);

                                break;
                            }
                        }

                        AfterDeleteSubscriptionDefaultImplementation(apiResponseLocalVar, accountId);

                        Events.ExecuteOnDeleteSubscription(apiResponseLocalVar);

                        return apiResponseLocalVar;
                    }
                }
            }
            catch(Exception e)
            {
                OnErrorDeleteSubscriptionDefaultImplementation(e, "/subscription/delete", uriBuilderLocalVar.Path, accountId);
                Events.ExecuteOnErrorDeleteSubscription(e);
                throw;
            }
        }

        /// <summary>
        /// The <see cref="DeleteSubscriptionApiResponse"/>
        /// </summary>
        public partial class DeleteSubscriptionApiResponse : Org.OpenAPITools.Client.ApiResponse, IDeleteSubscriptionApiResponse
        {
            /// <summary>
            /// The logger
            /// </summary>
            public ILogger<DeleteSubscriptionApiResponse> Logger { get; }

            /// <summary>
            /// The <see cref="DeleteSubscriptionApiResponse"/>
            /// </summary>
            /// <param name="logger"></param>
            /// <param name="httpRequestMessage"></param>
            /// <param name="httpResponseMessage"></param>
            /// <param name="rawContent"></param>
            /// <param name="path"></param>
            /// <param name="requestedAt"></param>
            /// <param name="jsonSerializerOptions"></param>
            public DeleteSubscriptionApiResponse(ILogger<DeleteSubscriptionApiResponse> logger, System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage, string rawContent, string path, DateTime requestedAt, System.Text.Json.JsonSerializerOptions jsonSerializerOptions) : base(httpRequestMessage, httpResponseMessage, rawContent, path, requestedAt, jsonSerializerOptions)
            {
                Logger = logger;
                OnCreated(httpRequestMessage, httpResponseMessage);
            }

            /// <summary>
            /// The <see cref="DeleteSubscriptionApiResponse"/>
            /// </summary>
            /// <param name="logger"></param>
            /// <param name="httpRequestMessage"></param>
            /// <param name="httpResponseMessage"></param>
            /// <param name="contentStream"></param>
            /// <param name="path"></param>
            /// <param name="requestedAt"></param>
            /// <param name="jsonSerializerOptions"></param>
            public DeleteSubscriptionApiResponse(ILogger<DeleteSubscriptionApiResponse> logger, System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage, System.IO.Stream contentStream, string path, DateTime requestedAt, System.Text.Json.JsonSerializerOptions jsonSerializerOptions) : base(httpRequestMessage, httpResponseMessage, contentStream, path, requestedAt, jsonSerializerOptions)
            {
                Logger = logger;
                OnCreated(httpRequestMessage, httpResponseMessage);
            }

            partial void OnCreated(global::System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage);

            /// <summary>
            /// Returns true if the response is 200 Ok
            /// </summary>
            /// <returns></returns>
            public bool IsOk => 200 == (int)StatusCode;

            /// <summary>
            /// Deserializes the response if the response is 200 Ok
            /// </summary>
            /// <returns></returns>
            public Org.OpenAPITools.Model.SirqulResponse? Ok()
            {
                // This logic may be modified with the AsModel.mustache template
                return IsOk
                    ? System.Text.Json.JsonSerializer.Deserialize<Org.OpenAPITools.Model.SirqulResponse>(RawContent, _jsonSerializerOptions)
                    : null;
            }

            /// <summary>
            /// Returns true if the response is 200 Ok and the deserialized response is not null
            /// </summary>
            /// <param name="result"></param>
            /// <returns></returns>
            public bool TryOk([NotNullWhen(true)]out Org.OpenAPITools.Model.SirqulResponse? result)
            {
                result = null;

                try
                {
                    result = Ok();
                } catch (Exception e)
                {
                    OnDeserializationErrorDefaultImplementation(e, (HttpStatusCode)200);
                }

                return result != null;
            }

            private void OnDeserializationErrorDefaultImplementation(Exception exception, HttpStatusCode httpStatusCode)
            {
                bool suppressDefaultLog = false;
                OnDeserializationError(ref suppressDefaultLog, exception, httpStatusCode);
                if (!suppressDefaultLog)
                    Logger.LogError(exception, "An error occurred while deserializing the {code} response.", httpStatusCode);
            }

            partial void OnDeserializationError(ref bool suppressDefaultLog, Exception exception, HttpStatusCode httpStatusCode);
        }

        partial void FormatGetSubscription(ref long accountId);

        /// <summary>
        /// Processes the server response
        /// </summary>
        /// <param name="apiResponseLocalVar"></param>
        /// <param name="accountId"></param>
        private void AfterGetSubscriptionDefaultImplementation(IGetSubscriptionApiResponse apiResponseLocalVar, long accountId)
        {
            bool suppressDefaultLog = false;
            AfterGetSubscription(ref suppressDefaultLog, apiResponseLocalVar, accountId);
            if (!suppressDefaultLog)
                Logger.LogInformation("{0,-9} | {1} | {2}", (apiResponseLocalVar.DownloadedAt - apiResponseLocalVar.RequestedAt).TotalSeconds, apiResponseLocalVar.StatusCode, apiResponseLocalVar.Path);
        }

        /// <summary>
        /// Processes the server response
        /// </summary>
        /// <param name="suppressDefaultLog"></param>
        /// <param name="apiResponseLocalVar"></param>
        /// <param name="accountId"></param>
        partial void AfterGetSubscription(ref bool suppressDefaultLog, IGetSubscriptionApiResponse apiResponseLocalVar, long accountId);

        /// <summary>
        /// Logs exceptions that occur while retrieving the server response
        /// </summary>
        /// <param name="exceptionLocalVar"></param>
        /// <param name="pathFormatLocalVar"></param>
        /// <param name="pathLocalVar"></param>
        /// <param name="accountId"></param>
        private void OnErrorGetSubscriptionDefaultImplementation(Exception exceptionLocalVar, string pathFormatLocalVar, string pathLocalVar, long accountId)
        {
            bool suppressDefaultLogLocalVar = false;
            OnErrorGetSubscription(ref suppressDefaultLogLocalVar, exceptionLocalVar, pathFormatLocalVar, pathLocalVar, accountId);
            if (!suppressDefaultLogLocalVar)
                Logger.LogError(exceptionLocalVar, "An error occurred while sending the request to the server.");
        }

        /// <summary>
        /// A partial method that gives developers a way to provide customized exception handling
        /// </summary>
        /// <param name="suppressDefaultLogLocalVar"></param>
        /// <param name="exceptionLocalVar"></param>
        /// <param name="pathFormatLocalVar"></param>
        /// <param name="pathLocalVar"></param>
        /// <param name="accountId"></param>
        partial void OnErrorGetSubscription(ref bool suppressDefaultLogLocalVar, Exception exceptionLocalVar, string pathFormatLocalVar, string pathLocalVar, long accountId);

        /// <summary>
        /// Get Subscription Use the accountId to determine the associated BillableEntity.  Then get the subscription.
        /// </summary>
        /// <param name="accountId">The account used to perform the lookup</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IGetSubscriptionApiResponse"/>&gt;</returns>
        public async Task<IGetSubscriptionApiResponse?> GetSubscriptionOrDefaultAsync(long accountId, System.Threading.CancellationToken cancellationToken = default)
        {
            try
            {
                return await GetSubscriptionAsync(accountId, cancellationToken).ConfigureAwait(false);
            }
            catch (Exception)
            {
                return null;
            }
        }

        /// <summary>
        /// Get Subscription Use the accountId to determine the associated BillableEntity.  Then get the subscription.
        /// </summary>
        /// <exception cref="ApiException">Thrown when fails to make API call</exception>
        /// <param name="accountId">The account used to perform the lookup</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IGetSubscriptionApiResponse"/>&gt;</returns>
        public async Task<IGetSubscriptionApiResponse> GetSubscriptionAsync(long accountId, System.Threading.CancellationToken cancellationToken = default)
        {
            UriBuilder uriBuilderLocalVar = new UriBuilder();

            try
            {
                FormatGetSubscription(ref accountId);

                using (HttpRequestMessage httpRequestMessageLocalVar = new HttpRequestMessage())
                {
                    uriBuilderLocalVar.Host = HttpClient.BaseAddress!.Host;
                    uriBuilderLocalVar.Port = HttpClient.BaseAddress.Port;
                    uriBuilderLocalVar.Scheme = HttpClient.BaseAddress.Scheme;
                    uriBuilderLocalVar.Path = HttpClient.BaseAddress.AbsolutePath == "/"
                        ? "/subscription/get"
                        : string.Concat(HttpClient.BaseAddress.AbsolutePath, "/subscription/get");

                    System.Collections.Specialized.NameValueCollection parseQueryStringLocalVar = System.Web.HttpUtility.ParseQueryString(string.Empty);

                    parseQueryStringLocalVar["accountId"] = ClientUtils.ParameterToString(accountId);

                    uriBuilderLocalVar.Query = parseQueryStringLocalVar.ToString();

                    httpRequestMessageLocalVar.RequestUri = uriBuilderLocalVar.Uri;

                    string[] acceptLocalVars = new string[] {
                        "*/*"
                    };

                    IEnumerable<MediaTypeWithQualityHeaderValue> acceptHeaderValuesLocalVar = ClientUtils.SelectHeaderAcceptArray(acceptLocalVars);

                    foreach (var acceptLocalVar in acceptHeaderValuesLocalVar)
                        httpRequestMessageLocalVar.Headers.Accept.Add(acceptLocalVar);

                    httpRequestMessageLocalVar.Method = HttpMethod.Get;

                    DateTime requestedAtLocalVar = DateTime.UtcNow;

                    using (HttpResponseMessage httpResponseMessageLocalVar = await HttpClient.SendAsync(httpRequestMessageLocalVar, cancellationToken).ConfigureAwait(false))
                    {
                        ILogger<GetSubscriptionApiResponse> apiResponseLoggerLocalVar = LoggerFactory.CreateLogger<GetSubscriptionApiResponse>();
                        GetSubscriptionApiResponse apiResponseLocalVar;

                        switch ((int)httpResponseMessageLocalVar.StatusCode) {
                            default: {
                                string responseContentLocalVar = await httpResponseMessageLocalVar.Content.ReadAsStringAsync(cancellationToken).ConfigureAwait(false);
                                apiResponseLocalVar = new(apiResponseLoggerLocalVar, httpRequestMessageLocalVar, httpResponseMessageLocalVar, responseContentLocalVar, "/subscription/get", requestedAtLocalVar, _jsonSerializerOptions);

                                break;
                            }
                        }

                        AfterGetSubscriptionDefaultImplementation(apiResponseLocalVar, accountId);

                        Events.ExecuteOnGetSubscription(apiResponseLocalVar);

                        return apiResponseLocalVar;
                    }
                }
            }
            catch(Exception e)
            {
                OnErrorGetSubscriptionDefaultImplementation(e, "/subscription/get", uriBuilderLocalVar.Path, accountId);
                Events.ExecuteOnErrorGetSubscription(e);
                throw;
            }
        }

        /// <summary>
        /// The <see cref="GetSubscriptionApiResponse"/>
        /// </summary>
        public partial class GetSubscriptionApiResponse : Org.OpenAPITools.Client.ApiResponse, IGetSubscriptionApiResponse
        {
            /// <summary>
            /// The logger
            /// </summary>
            public ILogger<GetSubscriptionApiResponse> Logger { get; }

            /// <summary>
            /// The <see cref="GetSubscriptionApiResponse"/>
            /// </summary>
            /// <param name="logger"></param>
            /// <param name="httpRequestMessage"></param>
            /// <param name="httpResponseMessage"></param>
            /// <param name="rawContent"></param>
            /// <param name="path"></param>
            /// <param name="requestedAt"></param>
            /// <param name="jsonSerializerOptions"></param>
            public GetSubscriptionApiResponse(ILogger<GetSubscriptionApiResponse> logger, System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage, string rawContent, string path, DateTime requestedAt, System.Text.Json.JsonSerializerOptions jsonSerializerOptions) : base(httpRequestMessage, httpResponseMessage, rawContent, path, requestedAt, jsonSerializerOptions)
            {
                Logger = logger;
                OnCreated(httpRequestMessage, httpResponseMessage);
            }

            /// <summary>
            /// The <see cref="GetSubscriptionApiResponse"/>
            /// </summary>
            /// <param name="logger"></param>
            /// <param name="httpRequestMessage"></param>
            /// <param name="httpResponseMessage"></param>
            /// <param name="contentStream"></param>
            /// <param name="path"></param>
            /// <param name="requestedAt"></param>
            /// <param name="jsonSerializerOptions"></param>
            public GetSubscriptionApiResponse(ILogger<GetSubscriptionApiResponse> logger, System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage, System.IO.Stream contentStream, string path, DateTime requestedAt, System.Text.Json.JsonSerializerOptions jsonSerializerOptions) : base(httpRequestMessage, httpResponseMessage, contentStream, path, requestedAt, jsonSerializerOptions)
            {
                Logger = logger;
                OnCreated(httpRequestMessage, httpResponseMessage);
            }

            partial void OnCreated(global::System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage);

            /// <summary>
            /// Returns true if the response is 200 Ok
            /// </summary>
            /// <returns></returns>
            public bool IsOk => 200 == (int)StatusCode;

            /// <summary>
            /// Deserializes the response if the response is 200 Ok
            /// </summary>
            /// <returns></returns>
            public Org.OpenAPITools.Model.SubscriptionResponse? Ok()
            {
                // This logic may be modified with the AsModel.mustache template
                return IsOk
                    ? System.Text.Json.JsonSerializer.Deserialize<Org.OpenAPITools.Model.SubscriptionResponse>(RawContent, _jsonSerializerOptions)
                    : null;
            }

            /// <summary>
            /// Returns true if the response is 200 Ok and the deserialized response is not null
            /// </summary>
            /// <param name="result"></param>
            /// <returns></returns>
            public bool TryOk([NotNullWhen(true)]out Org.OpenAPITools.Model.SubscriptionResponse? result)
            {
                result = null;

                try
                {
                    result = Ok();
                } catch (Exception e)
                {
                    OnDeserializationErrorDefaultImplementation(e, (HttpStatusCode)200);
                }

                return result != null;
            }

            private void OnDeserializationErrorDefaultImplementation(Exception exception, HttpStatusCode httpStatusCode)
            {
                bool suppressDefaultLog = false;
                OnDeserializationError(ref suppressDefaultLog, exception, httpStatusCode);
                if (!suppressDefaultLog)
                    Logger.LogError(exception, "An error occurred while deserializing the {code} response.", httpStatusCode);
            }

            partial void OnDeserializationError(ref bool suppressDefaultLog, Exception exception, HttpStatusCode httpStatusCode);
        }

        partial void FormatGetSubscriptionPlan(ref long planId);

        /// <summary>
        /// Processes the server response
        /// </summary>
        /// <param name="apiResponseLocalVar"></param>
        /// <param name="planId"></param>
        private void AfterGetSubscriptionPlanDefaultImplementation(IGetSubscriptionPlanApiResponse apiResponseLocalVar, long planId)
        {
            bool suppressDefaultLog = false;
            AfterGetSubscriptionPlan(ref suppressDefaultLog, apiResponseLocalVar, planId);
            if (!suppressDefaultLog)
                Logger.LogInformation("{0,-9} | {1} | {2}", (apiResponseLocalVar.DownloadedAt - apiResponseLocalVar.RequestedAt).TotalSeconds, apiResponseLocalVar.StatusCode, apiResponseLocalVar.Path);
        }

        /// <summary>
        /// Processes the server response
        /// </summary>
        /// <param name="suppressDefaultLog"></param>
        /// <param name="apiResponseLocalVar"></param>
        /// <param name="planId"></param>
        partial void AfterGetSubscriptionPlan(ref bool suppressDefaultLog, IGetSubscriptionPlanApiResponse apiResponseLocalVar, long planId);

        /// <summary>
        /// Logs exceptions that occur while retrieving the server response
        /// </summary>
        /// <param name="exceptionLocalVar"></param>
        /// <param name="pathFormatLocalVar"></param>
        /// <param name="pathLocalVar"></param>
        /// <param name="planId"></param>
        private void OnErrorGetSubscriptionPlanDefaultImplementation(Exception exceptionLocalVar, string pathFormatLocalVar, string pathLocalVar, long planId)
        {
            bool suppressDefaultLogLocalVar = false;
            OnErrorGetSubscriptionPlan(ref suppressDefaultLogLocalVar, exceptionLocalVar, pathFormatLocalVar, pathLocalVar, planId);
            if (!suppressDefaultLogLocalVar)
                Logger.LogError(exceptionLocalVar, "An error occurred while sending the request to the server.");
        }

        /// <summary>
        /// A partial method that gives developers a way to provide customized exception handling
        /// </summary>
        /// <param name="suppressDefaultLogLocalVar"></param>
        /// <param name="exceptionLocalVar"></param>
        /// <param name="pathFormatLocalVar"></param>
        /// <param name="pathLocalVar"></param>
        /// <param name="planId"></param>
        partial void OnErrorGetSubscriptionPlan(ref bool suppressDefaultLogLocalVar, Exception exceptionLocalVar, string pathFormatLocalVar, string pathLocalVar, long planId);

        /// <summary>
        /// Get Subscription Plan Get the matched subscription plan
        /// </summary>
        /// <param name="planId">The ID of the plan to get</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IGetSubscriptionPlanApiResponse"/>&gt;</returns>
        public async Task<IGetSubscriptionPlanApiResponse?> GetSubscriptionPlanOrDefaultAsync(long planId, System.Threading.CancellationToken cancellationToken = default)
        {
            try
            {
                return await GetSubscriptionPlanAsync(planId, cancellationToken).ConfigureAwait(false);
            }
            catch (Exception)
            {
                return null;
            }
        }

        /// <summary>
        /// Get Subscription Plan Get the matched subscription plan
        /// </summary>
        /// <exception cref="ApiException">Thrown when fails to make API call</exception>
        /// <param name="planId">The ID of the plan to get</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IGetSubscriptionPlanApiResponse"/>&gt;</returns>
        public async Task<IGetSubscriptionPlanApiResponse> GetSubscriptionPlanAsync(long planId, System.Threading.CancellationToken cancellationToken = default)
        {
            UriBuilder uriBuilderLocalVar = new UriBuilder();

            try
            {
                FormatGetSubscriptionPlan(ref planId);

                using (HttpRequestMessage httpRequestMessageLocalVar = new HttpRequestMessage())
                {
                    uriBuilderLocalVar.Host = HttpClient.BaseAddress!.Host;
                    uriBuilderLocalVar.Port = HttpClient.BaseAddress.Port;
                    uriBuilderLocalVar.Scheme = HttpClient.BaseAddress.Scheme;
                    uriBuilderLocalVar.Path = HttpClient.BaseAddress.AbsolutePath == "/"
                        ? "/subscription/plan/get"
                        : string.Concat(HttpClient.BaseAddress.AbsolutePath, "/subscription/plan/get");

                    System.Collections.Specialized.NameValueCollection parseQueryStringLocalVar = System.Web.HttpUtility.ParseQueryString(string.Empty);

                    parseQueryStringLocalVar["planId"] = ClientUtils.ParameterToString(planId);

                    uriBuilderLocalVar.Query = parseQueryStringLocalVar.ToString();

                    httpRequestMessageLocalVar.RequestUri = uriBuilderLocalVar.Uri;

                    string[] acceptLocalVars = new string[] {
                        "*/*"
                    };

                    IEnumerable<MediaTypeWithQualityHeaderValue> acceptHeaderValuesLocalVar = ClientUtils.SelectHeaderAcceptArray(acceptLocalVars);

                    foreach (var acceptLocalVar in acceptHeaderValuesLocalVar)
                        httpRequestMessageLocalVar.Headers.Accept.Add(acceptLocalVar);

                    httpRequestMessageLocalVar.Method = HttpMethod.Get;

                    DateTime requestedAtLocalVar = DateTime.UtcNow;

                    using (HttpResponseMessage httpResponseMessageLocalVar = await HttpClient.SendAsync(httpRequestMessageLocalVar, cancellationToken).ConfigureAwait(false))
                    {
                        ILogger<GetSubscriptionPlanApiResponse> apiResponseLoggerLocalVar = LoggerFactory.CreateLogger<GetSubscriptionPlanApiResponse>();
                        GetSubscriptionPlanApiResponse apiResponseLocalVar;

                        switch ((int)httpResponseMessageLocalVar.StatusCode) {
                            default: {
                                string responseContentLocalVar = await httpResponseMessageLocalVar.Content.ReadAsStringAsync(cancellationToken).ConfigureAwait(false);
                                apiResponseLocalVar = new(apiResponseLoggerLocalVar, httpRequestMessageLocalVar, httpResponseMessageLocalVar, responseContentLocalVar, "/subscription/plan/get", requestedAtLocalVar, _jsonSerializerOptions);

                                break;
                            }
                        }

                        AfterGetSubscriptionPlanDefaultImplementation(apiResponseLocalVar, planId);

                        Events.ExecuteOnGetSubscriptionPlan(apiResponseLocalVar);

                        return apiResponseLocalVar;
                    }
                }
            }
            catch(Exception e)
            {
                OnErrorGetSubscriptionPlanDefaultImplementation(e, "/subscription/plan/get", uriBuilderLocalVar.Path, planId);
                Events.ExecuteOnErrorGetSubscriptionPlan(e);
                throw;
            }
        }

        /// <summary>
        /// The <see cref="GetSubscriptionPlanApiResponse"/>
        /// </summary>
        public partial class GetSubscriptionPlanApiResponse : Org.OpenAPITools.Client.ApiResponse, IGetSubscriptionPlanApiResponse
        {
            /// <summary>
            /// The logger
            /// </summary>
            public ILogger<GetSubscriptionPlanApiResponse> Logger { get; }

            /// <summary>
            /// The <see cref="GetSubscriptionPlanApiResponse"/>
            /// </summary>
            /// <param name="logger"></param>
            /// <param name="httpRequestMessage"></param>
            /// <param name="httpResponseMessage"></param>
            /// <param name="rawContent"></param>
            /// <param name="path"></param>
            /// <param name="requestedAt"></param>
            /// <param name="jsonSerializerOptions"></param>
            public GetSubscriptionPlanApiResponse(ILogger<GetSubscriptionPlanApiResponse> logger, System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage, string rawContent, string path, DateTime requestedAt, System.Text.Json.JsonSerializerOptions jsonSerializerOptions) : base(httpRequestMessage, httpResponseMessage, rawContent, path, requestedAt, jsonSerializerOptions)
            {
                Logger = logger;
                OnCreated(httpRequestMessage, httpResponseMessage);
            }

            /// <summary>
            /// The <see cref="GetSubscriptionPlanApiResponse"/>
            /// </summary>
            /// <param name="logger"></param>
            /// <param name="httpRequestMessage"></param>
            /// <param name="httpResponseMessage"></param>
            /// <param name="contentStream"></param>
            /// <param name="path"></param>
            /// <param name="requestedAt"></param>
            /// <param name="jsonSerializerOptions"></param>
            public GetSubscriptionPlanApiResponse(ILogger<GetSubscriptionPlanApiResponse> logger, System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage, System.IO.Stream contentStream, string path, DateTime requestedAt, System.Text.Json.JsonSerializerOptions jsonSerializerOptions) : base(httpRequestMessage, httpResponseMessage, contentStream, path, requestedAt, jsonSerializerOptions)
            {
                Logger = logger;
                OnCreated(httpRequestMessage, httpResponseMessage);
            }

            partial void OnCreated(global::System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage);

            /// <summary>
            /// Returns true if the response is 200 Ok
            /// </summary>
            /// <returns></returns>
            public bool IsOk => 200 == (int)StatusCode;

            /// <summary>
            /// Deserializes the response if the response is 200 Ok
            /// </summary>
            /// <returns></returns>
            public Org.OpenAPITools.Model.SubscriptionPlanResponse? Ok()
            {
                // This logic may be modified with the AsModel.mustache template
                return IsOk
                    ? System.Text.Json.JsonSerializer.Deserialize<Org.OpenAPITools.Model.SubscriptionPlanResponse>(RawContent, _jsonSerializerOptions)
                    : null;
            }

            /// <summary>
            /// Returns true if the response is 200 Ok and the deserialized response is not null
            /// </summary>
            /// <param name="result"></param>
            /// <returns></returns>
            public bool TryOk([NotNullWhen(true)]out Org.OpenAPITools.Model.SubscriptionPlanResponse? result)
            {
                result = null;

                try
                {
                    result = Ok();
                } catch (Exception e)
                {
                    OnDeserializationErrorDefaultImplementation(e, (HttpStatusCode)200);
                }

                return result != null;
            }

            private void OnDeserializationErrorDefaultImplementation(Exception exception, HttpStatusCode httpStatusCode)
            {
                bool suppressDefaultLog = false;
                OnDeserializationError(ref suppressDefaultLog, exception, httpStatusCode);
                if (!suppressDefaultLog)
                    Logger.LogError(exception, "An error occurred while deserializing the {code} response.", httpStatusCode);
            }

            partial void OnDeserializationError(ref bool suppressDefaultLog, Exception exception, HttpStatusCode httpStatusCode);
        }

        partial void FormatGetSubscriptionPlans(ref Option<bool> visible, ref Option<string> role);

        /// <summary>
        /// Validates the request parameters
        /// </summary>
        /// <param name="role"></param>
        /// <returns></returns>
        private void ValidateGetSubscriptionPlans(Option<string> role)
        {
            if (role.IsSet && role.Value == null)
                throw new ArgumentNullException(nameof(role));
        }

        /// <summary>
        /// Processes the server response
        /// </summary>
        /// <param name="apiResponseLocalVar"></param>
        /// <param name="visible"></param>
        /// <param name="role"></param>
        private void AfterGetSubscriptionPlansDefaultImplementation(IGetSubscriptionPlansApiResponse apiResponseLocalVar, Option<bool> visible, Option<string> role)
        {
            bool suppressDefaultLog = false;
            AfterGetSubscriptionPlans(ref suppressDefaultLog, apiResponseLocalVar, visible, role);
            if (!suppressDefaultLog)
                Logger.LogInformation("{0,-9} | {1} | {2}", (apiResponseLocalVar.DownloadedAt - apiResponseLocalVar.RequestedAt).TotalSeconds, apiResponseLocalVar.StatusCode, apiResponseLocalVar.Path);
        }

        /// <summary>
        /// Processes the server response
        /// </summary>
        /// <param name="suppressDefaultLog"></param>
        /// <param name="apiResponseLocalVar"></param>
        /// <param name="visible"></param>
        /// <param name="role"></param>
        partial void AfterGetSubscriptionPlans(ref bool suppressDefaultLog, IGetSubscriptionPlansApiResponse apiResponseLocalVar, Option<bool> visible, Option<string> role);

        /// <summary>
        /// Logs exceptions that occur while retrieving the server response
        /// </summary>
        /// <param name="exceptionLocalVar"></param>
        /// <param name="pathFormatLocalVar"></param>
        /// <param name="pathLocalVar"></param>
        /// <param name="visible"></param>
        /// <param name="role"></param>
        private void OnErrorGetSubscriptionPlansDefaultImplementation(Exception exceptionLocalVar, string pathFormatLocalVar, string pathLocalVar, Option<bool> visible, Option<string> role)
        {
            bool suppressDefaultLogLocalVar = false;
            OnErrorGetSubscriptionPlans(ref suppressDefaultLogLocalVar, exceptionLocalVar, pathFormatLocalVar, pathLocalVar, visible, role);
            if (!suppressDefaultLogLocalVar)
                Logger.LogError(exceptionLocalVar, "An error occurred while sending the request to the server.");
        }

        /// <summary>
        /// A partial method that gives developers a way to provide customized exception handling
        /// </summary>
        /// <param name="suppressDefaultLogLocalVar"></param>
        /// <param name="exceptionLocalVar"></param>
        /// <param name="pathFormatLocalVar"></param>
        /// <param name="pathLocalVar"></param>
        /// <param name="visible"></param>
        /// <param name="role"></param>
        partial void OnErrorGetSubscriptionPlans(ref bool suppressDefaultLogLocalVar, Exception exceptionLocalVar, string pathFormatLocalVar, string pathLocalVar, Option<bool> visible, Option<string> role);

        /// <summary>
        /// List Subscription Plans Get the matched subscription plan
        /// </summary>
        /// <param name="visible">Include visible only (true), hidden only (false), or all (null) (optional)</param>
        /// <param name="role">The role the plan is targeted for, values are: DEVELOPER, RETAILER, ADVERTISER (optional)</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IGetSubscriptionPlansApiResponse"/>&gt;</returns>
        public async Task<IGetSubscriptionPlansApiResponse?> GetSubscriptionPlansOrDefaultAsync(Option<bool> visible = default, Option<string> role = default, System.Threading.CancellationToken cancellationToken = default)
        {
            try
            {
                return await GetSubscriptionPlansAsync(visible, role, cancellationToken).ConfigureAwait(false);
            }
            catch (Exception)
            {
                return null;
            }
        }

        /// <summary>
        /// List Subscription Plans Get the matched subscription plan
        /// </summary>
        /// <exception cref="ApiException">Thrown when fails to make API call</exception>
        /// <param name="visible">Include visible only (true), hidden only (false), or all (null) (optional)</param>
        /// <param name="role">The role the plan is targeted for, values are: DEVELOPER, RETAILER, ADVERTISER (optional)</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IGetSubscriptionPlansApiResponse"/>&gt;</returns>
        public async Task<IGetSubscriptionPlansApiResponse> GetSubscriptionPlansAsync(Option<bool> visible = default, Option<string> role = default, System.Threading.CancellationToken cancellationToken = default)
        {
            UriBuilder uriBuilderLocalVar = new UriBuilder();

            try
            {
                ValidateGetSubscriptionPlans(role);

                FormatGetSubscriptionPlans(ref visible, ref role);

                using (HttpRequestMessage httpRequestMessageLocalVar = new HttpRequestMessage())
                {
                    uriBuilderLocalVar.Host = HttpClient.BaseAddress!.Host;
                    uriBuilderLocalVar.Port = HttpClient.BaseAddress.Port;
                    uriBuilderLocalVar.Scheme = HttpClient.BaseAddress.Scheme;
                    uriBuilderLocalVar.Path = HttpClient.BaseAddress.AbsolutePath == "/"
                        ? "/subscription/plan/list"
                        : string.Concat(HttpClient.BaseAddress.AbsolutePath, "/subscription/plan/list");

                    System.Collections.Specialized.NameValueCollection parseQueryStringLocalVar = System.Web.HttpUtility.ParseQueryString(string.Empty);

                    if (visible.IsSet)
                        parseQueryStringLocalVar["visible"] = ClientUtils.ParameterToString(visible.Value);

                    if (role.IsSet)
                        parseQueryStringLocalVar["role"] = ClientUtils.ParameterToString(role.Value);

                    uriBuilderLocalVar.Query = parseQueryStringLocalVar.ToString();

                    httpRequestMessageLocalVar.RequestUri = uriBuilderLocalVar.Uri;

                    string[] acceptLocalVars = new string[] {
                        "*/*"
                    };

                    IEnumerable<MediaTypeWithQualityHeaderValue> acceptHeaderValuesLocalVar = ClientUtils.SelectHeaderAcceptArray(acceptLocalVars);

                    foreach (var acceptLocalVar in acceptHeaderValuesLocalVar)
                        httpRequestMessageLocalVar.Headers.Accept.Add(acceptLocalVar);

                    httpRequestMessageLocalVar.Method = HttpMethod.Get;

                    DateTime requestedAtLocalVar = DateTime.UtcNow;

                    using (HttpResponseMessage httpResponseMessageLocalVar = await HttpClient.SendAsync(httpRequestMessageLocalVar, cancellationToken).ConfigureAwait(false))
                    {
                        ILogger<GetSubscriptionPlansApiResponse> apiResponseLoggerLocalVar = LoggerFactory.CreateLogger<GetSubscriptionPlansApiResponse>();
                        GetSubscriptionPlansApiResponse apiResponseLocalVar;

                        switch ((int)httpResponseMessageLocalVar.StatusCode) {
                            default: {
                                string responseContentLocalVar = await httpResponseMessageLocalVar.Content.ReadAsStringAsync(cancellationToken).ConfigureAwait(false);
                                apiResponseLocalVar = new(apiResponseLoggerLocalVar, httpRequestMessageLocalVar, httpResponseMessageLocalVar, responseContentLocalVar, "/subscription/plan/list", requestedAtLocalVar, _jsonSerializerOptions);

                                break;
                            }
                        }

                        AfterGetSubscriptionPlansDefaultImplementation(apiResponseLocalVar, visible, role);

                        Events.ExecuteOnGetSubscriptionPlans(apiResponseLocalVar);

                        return apiResponseLocalVar;
                    }
                }
            }
            catch(Exception e)
            {
                OnErrorGetSubscriptionPlansDefaultImplementation(e, "/subscription/plan/list", uriBuilderLocalVar.Path, visible, role);
                Events.ExecuteOnErrorGetSubscriptionPlans(e);
                throw;
            }
        }

        /// <summary>
        /// The <see cref="GetSubscriptionPlansApiResponse"/>
        /// </summary>
        public partial class GetSubscriptionPlansApiResponse : Org.OpenAPITools.Client.ApiResponse, IGetSubscriptionPlansApiResponse
        {
            /// <summary>
            /// The logger
            /// </summary>
            public ILogger<GetSubscriptionPlansApiResponse> Logger { get; }

            /// <summary>
            /// The <see cref="GetSubscriptionPlansApiResponse"/>
            /// </summary>
            /// <param name="logger"></param>
            /// <param name="httpRequestMessage"></param>
            /// <param name="httpResponseMessage"></param>
            /// <param name="rawContent"></param>
            /// <param name="path"></param>
            /// <param name="requestedAt"></param>
            /// <param name="jsonSerializerOptions"></param>
            public GetSubscriptionPlansApiResponse(ILogger<GetSubscriptionPlansApiResponse> logger, System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage, string rawContent, string path, DateTime requestedAt, System.Text.Json.JsonSerializerOptions jsonSerializerOptions) : base(httpRequestMessage, httpResponseMessage, rawContent, path, requestedAt, jsonSerializerOptions)
            {
                Logger = logger;
                OnCreated(httpRequestMessage, httpResponseMessage);
            }

            /// <summary>
            /// The <see cref="GetSubscriptionPlansApiResponse"/>
            /// </summary>
            /// <param name="logger"></param>
            /// <param name="httpRequestMessage"></param>
            /// <param name="httpResponseMessage"></param>
            /// <param name="contentStream"></param>
            /// <param name="path"></param>
            /// <param name="requestedAt"></param>
            /// <param name="jsonSerializerOptions"></param>
            public GetSubscriptionPlansApiResponse(ILogger<GetSubscriptionPlansApiResponse> logger, System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage, System.IO.Stream contentStream, string path, DateTime requestedAt, System.Text.Json.JsonSerializerOptions jsonSerializerOptions) : base(httpRequestMessage, httpResponseMessage, contentStream, path, requestedAt, jsonSerializerOptions)
            {
                Logger = logger;
                OnCreated(httpRequestMessage, httpResponseMessage);
            }

            partial void OnCreated(global::System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage);

            /// <summary>
            /// Returns true if the response is 200 Ok
            /// </summary>
            /// <returns></returns>
            public bool IsOk => 200 == (int)StatusCode;

            /// <summary>
            /// Deserializes the response if the response is 200 Ok
            /// </summary>
            /// <returns></returns>
            public List<SubscriptionPlanResponse>? Ok()
            {
                // This logic may be modified with the AsModel.mustache template
                return IsOk
                    ? System.Text.Json.JsonSerializer.Deserialize<List<SubscriptionPlanResponse>>(RawContent, _jsonSerializerOptions)
                    : null;
            }

            /// <summary>
            /// Returns true if the response is 200 Ok and the deserialized response is not null
            /// </summary>
            /// <param name="result"></param>
            /// <returns></returns>
            public bool TryOk([NotNullWhen(true)]out List<SubscriptionPlanResponse>? result)
            {
                result = null;

                try
                {
                    result = Ok();
                } catch (Exception e)
                {
                    OnDeserializationErrorDefaultImplementation(e, (HttpStatusCode)200);
                }

                return result != null;
            }

            private void OnDeserializationErrorDefaultImplementation(Exception exception, HttpStatusCode httpStatusCode)
            {
                bool suppressDefaultLog = false;
                OnDeserializationError(ref suppressDefaultLog, exception, httpStatusCode);
                if (!suppressDefaultLog)
                    Logger.LogError(exception, "An error occurred while deserializing the {code} response.", httpStatusCode);
            }

            partial void OnDeserializationError(ref bool suppressDefaultLog, Exception exception, HttpStatusCode httpStatusCode);
        }

        partial void FormatGetSubscriptionUsage(ref long accountId, ref Option<long> applicationId, ref Option<long> start, ref Option<long> end);

        /// <summary>
        /// Processes the server response
        /// </summary>
        /// <param name="apiResponseLocalVar"></param>
        /// <param name="accountId"></param>
        /// <param name="applicationId"></param>
        /// <param name="start"></param>
        /// <param name="end"></param>
        private void AfterGetSubscriptionUsageDefaultImplementation(IGetSubscriptionUsageApiResponse apiResponseLocalVar, long accountId, Option<long> applicationId, Option<long> start, Option<long> end)
        {
            bool suppressDefaultLog = false;
            AfterGetSubscriptionUsage(ref suppressDefaultLog, apiResponseLocalVar, accountId, applicationId, start, end);
            if (!suppressDefaultLog)
                Logger.LogInformation("{0,-9} | {1} | {2}", (apiResponseLocalVar.DownloadedAt - apiResponseLocalVar.RequestedAt).TotalSeconds, apiResponseLocalVar.StatusCode, apiResponseLocalVar.Path);
        }

        /// <summary>
        /// Processes the server response
        /// </summary>
        /// <param name="suppressDefaultLog"></param>
        /// <param name="apiResponseLocalVar"></param>
        /// <param name="accountId"></param>
        /// <param name="applicationId"></param>
        /// <param name="start"></param>
        /// <param name="end"></param>
        partial void AfterGetSubscriptionUsage(ref bool suppressDefaultLog, IGetSubscriptionUsageApiResponse apiResponseLocalVar, long accountId, Option<long> applicationId, Option<long> start, Option<long> end);

        /// <summary>
        /// Logs exceptions that occur while retrieving the server response
        /// </summary>
        /// <param name="exceptionLocalVar"></param>
        /// <param name="pathFormatLocalVar"></param>
        /// <param name="pathLocalVar"></param>
        /// <param name="accountId"></param>
        /// <param name="applicationId"></param>
        /// <param name="start"></param>
        /// <param name="end"></param>
        private void OnErrorGetSubscriptionUsageDefaultImplementation(Exception exceptionLocalVar, string pathFormatLocalVar, string pathLocalVar, long accountId, Option<long> applicationId, Option<long> start, Option<long> end)
        {
            bool suppressDefaultLogLocalVar = false;
            OnErrorGetSubscriptionUsage(ref suppressDefaultLogLocalVar, exceptionLocalVar, pathFormatLocalVar, pathLocalVar, accountId, applicationId, start, end);
            if (!suppressDefaultLogLocalVar)
                Logger.LogError(exceptionLocalVar, "An error occurred while sending the request to the server.");
        }

        /// <summary>
        /// A partial method that gives developers a way to provide customized exception handling
        /// </summary>
        /// <param name="suppressDefaultLogLocalVar"></param>
        /// <param name="exceptionLocalVar"></param>
        /// <param name="pathFormatLocalVar"></param>
        /// <param name="pathLocalVar"></param>
        /// <param name="accountId"></param>
        /// <param name="applicationId"></param>
        /// <param name="start"></param>
        /// <param name="end"></param>
        partial void OnErrorGetSubscriptionUsage(ref bool suppressDefaultLogLocalVar, Exception exceptionLocalVar, string pathFormatLocalVar, string pathLocalVar, long accountId, Option<long> applicationId, Option<long> start, Option<long> end);

        /// <summary>
        /// Get Subscription Usage Use the accountId to determine the associated BillableEntity.  Then get the application usage.
        /// </summary>
        /// <param name="accountId">The account used to perform the lookup</param>
        /// <param name="applicationId">Get for just 1 application instead of the BillableEntity (optional)</param>
        /// <param name="start">The start time frame (optional)</param>
        /// <param name="end">The end time frame (optional)</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IGetSubscriptionUsageApiResponse"/>&gt;</returns>
        public async Task<IGetSubscriptionUsageApiResponse?> GetSubscriptionUsageOrDefaultAsync(long accountId, Option<long> applicationId = default, Option<long> start = default, Option<long> end = default, System.Threading.CancellationToken cancellationToken = default)
        {
            try
            {
                return await GetSubscriptionUsageAsync(accountId, applicationId, start, end, cancellationToken).ConfigureAwait(false);
            }
            catch (Exception)
            {
                return null;
            }
        }

        /// <summary>
        /// Get Subscription Usage Use the accountId to determine the associated BillableEntity.  Then get the application usage.
        /// </summary>
        /// <exception cref="ApiException">Thrown when fails to make API call</exception>
        /// <param name="accountId">The account used to perform the lookup</param>
        /// <param name="applicationId">Get for just 1 application instead of the BillableEntity (optional)</param>
        /// <param name="start">The start time frame (optional)</param>
        /// <param name="end">The end time frame (optional)</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IGetSubscriptionUsageApiResponse"/>&gt;</returns>
        public async Task<IGetSubscriptionUsageApiResponse> GetSubscriptionUsageAsync(long accountId, Option<long> applicationId = default, Option<long> start = default, Option<long> end = default, System.Threading.CancellationToken cancellationToken = default)
        {
            UriBuilder uriBuilderLocalVar = new UriBuilder();

            try
            {
                FormatGetSubscriptionUsage(ref accountId, ref applicationId, ref start, ref end);

                using (HttpRequestMessage httpRequestMessageLocalVar = new HttpRequestMessage())
                {
                    uriBuilderLocalVar.Host = HttpClient.BaseAddress!.Host;
                    uriBuilderLocalVar.Port = HttpClient.BaseAddress.Port;
                    uriBuilderLocalVar.Scheme = HttpClient.BaseAddress.Scheme;
                    uriBuilderLocalVar.Path = HttpClient.BaseAddress.AbsolutePath == "/"
                        ? "/subscription/usage/get"
                        : string.Concat(HttpClient.BaseAddress.AbsolutePath, "/subscription/usage/get");

                    System.Collections.Specialized.NameValueCollection parseQueryStringLocalVar = System.Web.HttpUtility.ParseQueryString(string.Empty);

                    parseQueryStringLocalVar["accountId"] = ClientUtils.ParameterToString(accountId);

                    if (applicationId.IsSet)
                        parseQueryStringLocalVar["applicationId"] = ClientUtils.ParameterToString(applicationId.Value);

                    if (start.IsSet)
                        parseQueryStringLocalVar["start"] = ClientUtils.ParameterToString(start.Value);

                    if (end.IsSet)
                        parseQueryStringLocalVar["end"] = ClientUtils.ParameterToString(end.Value);

                    uriBuilderLocalVar.Query = parseQueryStringLocalVar.ToString();

                    httpRequestMessageLocalVar.RequestUri = uriBuilderLocalVar.Uri;

                    string[] acceptLocalVars = new string[] {
                        "*/*"
                    };

                    IEnumerable<MediaTypeWithQualityHeaderValue> acceptHeaderValuesLocalVar = ClientUtils.SelectHeaderAcceptArray(acceptLocalVars);

                    foreach (var acceptLocalVar in acceptHeaderValuesLocalVar)
                        httpRequestMessageLocalVar.Headers.Accept.Add(acceptLocalVar);

                    httpRequestMessageLocalVar.Method = HttpMethod.Get;

                    DateTime requestedAtLocalVar = DateTime.UtcNow;

                    using (HttpResponseMessage httpResponseMessageLocalVar = await HttpClient.SendAsync(httpRequestMessageLocalVar, cancellationToken).ConfigureAwait(false))
                    {
                        ILogger<GetSubscriptionUsageApiResponse> apiResponseLoggerLocalVar = LoggerFactory.CreateLogger<GetSubscriptionUsageApiResponse>();
                        GetSubscriptionUsageApiResponse apiResponseLocalVar;

                        switch ((int)httpResponseMessageLocalVar.StatusCode) {
                            default: {
                                string responseContentLocalVar = await httpResponseMessageLocalVar.Content.ReadAsStringAsync(cancellationToken).ConfigureAwait(false);
                                apiResponseLocalVar = new(apiResponseLoggerLocalVar, httpRequestMessageLocalVar, httpResponseMessageLocalVar, responseContentLocalVar, "/subscription/usage/get", requestedAtLocalVar, _jsonSerializerOptions);

                                break;
                            }
                        }

                        AfterGetSubscriptionUsageDefaultImplementation(apiResponseLocalVar, accountId, applicationId, start, end);

                        Events.ExecuteOnGetSubscriptionUsage(apiResponseLocalVar);

                        return apiResponseLocalVar;
                    }
                }
            }
            catch(Exception e)
            {
                OnErrorGetSubscriptionUsageDefaultImplementation(e, "/subscription/usage/get", uriBuilderLocalVar.Path, accountId, applicationId, start, end);
                Events.ExecuteOnErrorGetSubscriptionUsage(e);
                throw;
            }
        }

        /// <summary>
        /// The <see cref="GetSubscriptionUsageApiResponse"/>
        /// </summary>
        public partial class GetSubscriptionUsageApiResponse : Org.OpenAPITools.Client.ApiResponse, IGetSubscriptionUsageApiResponse
        {
            /// <summary>
            /// The logger
            /// </summary>
            public ILogger<GetSubscriptionUsageApiResponse> Logger { get; }

            /// <summary>
            /// The <see cref="GetSubscriptionUsageApiResponse"/>
            /// </summary>
            /// <param name="logger"></param>
            /// <param name="httpRequestMessage"></param>
            /// <param name="httpResponseMessage"></param>
            /// <param name="rawContent"></param>
            /// <param name="path"></param>
            /// <param name="requestedAt"></param>
            /// <param name="jsonSerializerOptions"></param>
            public GetSubscriptionUsageApiResponse(ILogger<GetSubscriptionUsageApiResponse> logger, System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage, string rawContent, string path, DateTime requestedAt, System.Text.Json.JsonSerializerOptions jsonSerializerOptions) : base(httpRequestMessage, httpResponseMessage, rawContent, path, requestedAt, jsonSerializerOptions)
            {
                Logger = logger;
                OnCreated(httpRequestMessage, httpResponseMessage);
            }

            /// <summary>
            /// The <see cref="GetSubscriptionUsageApiResponse"/>
            /// </summary>
            /// <param name="logger"></param>
            /// <param name="httpRequestMessage"></param>
            /// <param name="httpResponseMessage"></param>
            /// <param name="contentStream"></param>
            /// <param name="path"></param>
            /// <param name="requestedAt"></param>
            /// <param name="jsonSerializerOptions"></param>
            public GetSubscriptionUsageApiResponse(ILogger<GetSubscriptionUsageApiResponse> logger, System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage, System.IO.Stream contentStream, string path, DateTime requestedAt, System.Text.Json.JsonSerializerOptions jsonSerializerOptions) : base(httpRequestMessage, httpResponseMessage, contentStream, path, requestedAt, jsonSerializerOptions)
            {
                Logger = logger;
                OnCreated(httpRequestMessage, httpResponseMessage);
            }

            partial void OnCreated(global::System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage);

            /// <summary>
            /// Returns true if the response is 200 Ok
            /// </summary>
            /// <returns></returns>
            public bool IsOk => 200 == (int)StatusCode;

            /// <summary>
            /// Deserializes the response if the response is 200 Ok
            /// </summary>
            /// <returns></returns>
            public Org.OpenAPITools.Model.ApplicationUsageResponse? Ok()
            {
                // This logic may be modified with the AsModel.mustache template
                return IsOk
                    ? System.Text.Json.JsonSerializer.Deserialize<Org.OpenAPITools.Model.ApplicationUsageResponse>(RawContent, _jsonSerializerOptions)
                    : null;
            }

            /// <summary>
            /// Returns true if the response is 200 Ok and the deserialized response is not null
            /// </summary>
            /// <param name="result"></param>
            /// <returns></returns>
            public bool TryOk([NotNullWhen(true)]out Org.OpenAPITools.Model.ApplicationUsageResponse? result)
            {
                result = null;

                try
                {
                    result = Ok();
                } catch (Exception e)
                {
                    OnDeserializationErrorDefaultImplementation(e, (HttpStatusCode)200);
                }

                return result != null;
            }

            private void OnDeserializationErrorDefaultImplementation(Exception exception, HttpStatusCode httpStatusCode)
            {
                bool suppressDefaultLog = false;
                OnDeserializationError(ref suppressDefaultLog, exception, httpStatusCode);
                if (!suppressDefaultLog)
                    Logger.LogError(exception, "An error occurred while deserializing the {code} response.", httpStatusCode);
            }

            partial void OnDeserializationError(ref bool suppressDefaultLog, Exception exception, HttpStatusCode httpStatusCode);
        }

        partial void FormatUpdateSubscription(ref long accountId, ref Option<long> planId, ref Option<string> promoCode, ref Option<bool> active);

        /// <summary>
        /// Validates the request parameters
        /// </summary>
        /// <param name="promoCode"></param>
        /// <returns></returns>
        private void ValidateUpdateSubscription(Option<string> promoCode)
        {
            if (promoCode.IsSet && promoCode.Value == null)
                throw new ArgumentNullException(nameof(promoCode));
        }

        /// <summary>
        /// Processes the server response
        /// </summary>
        /// <param name="apiResponseLocalVar"></param>
        /// <param name="accountId"></param>
        /// <param name="planId"></param>
        /// <param name="promoCode"></param>
        /// <param name="active"></param>
        private void AfterUpdateSubscriptionDefaultImplementation(IUpdateSubscriptionApiResponse apiResponseLocalVar, long accountId, Option<long> planId, Option<string> promoCode, Option<bool> active)
        {
            bool suppressDefaultLog = false;
            AfterUpdateSubscription(ref suppressDefaultLog, apiResponseLocalVar, accountId, planId, promoCode, active);
            if (!suppressDefaultLog)
                Logger.LogInformation("{0,-9} | {1} | {2}", (apiResponseLocalVar.DownloadedAt - apiResponseLocalVar.RequestedAt).TotalSeconds, apiResponseLocalVar.StatusCode, apiResponseLocalVar.Path);
        }

        /// <summary>
        /// Processes the server response
        /// </summary>
        /// <param name="suppressDefaultLog"></param>
        /// <param name="apiResponseLocalVar"></param>
        /// <param name="accountId"></param>
        /// <param name="planId"></param>
        /// <param name="promoCode"></param>
        /// <param name="active"></param>
        partial void AfterUpdateSubscription(ref bool suppressDefaultLog, IUpdateSubscriptionApiResponse apiResponseLocalVar, long accountId, Option<long> planId, Option<string> promoCode, Option<bool> active);

        /// <summary>
        /// Logs exceptions that occur while retrieving the server response
        /// </summary>
        /// <param name="exceptionLocalVar"></param>
        /// <param name="pathFormatLocalVar"></param>
        /// <param name="pathLocalVar"></param>
        /// <param name="accountId"></param>
        /// <param name="planId"></param>
        /// <param name="promoCode"></param>
        /// <param name="active"></param>
        private void OnErrorUpdateSubscriptionDefaultImplementation(Exception exceptionLocalVar, string pathFormatLocalVar, string pathLocalVar, long accountId, Option<long> planId, Option<string> promoCode, Option<bool> active)
        {
            bool suppressDefaultLogLocalVar = false;
            OnErrorUpdateSubscription(ref suppressDefaultLogLocalVar, exceptionLocalVar, pathFormatLocalVar, pathLocalVar, accountId, planId, promoCode, active);
            if (!suppressDefaultLogLocalVar)
                Logger.LogError(exceptionLocalVar, "An error occurred while sending the request to the server.");
        }

        /// <summary>
        /// A partial method that gives developers a way to provide customized exception handling
        /// </summary>
        /// <param name="suppressDefaultLogLocalVar"></param>
        /// <param name="exceptionLocalVar"></param>
        /// <param name="pathFormatLocalVar"></param>
        /// <param name="pathLocalVar"></param>
        /// <param name="accountId"></param>
        /// <param name="planId"></param>
        /// <param name="promoCode"></param>
        /// <param name="active"></param>
        partial void OnErrorUpdateSubscription(ref bool suppressDefaultLogLocalVar, Exception exceptionLocalVar, string pathFormatLocalVar, string pathLocalVar, long accountId, Option<long> planId, Option<string> promoCode, Option<bool> active);

        /// <summary>
        /// Update Subscription Updates the subscription for the billable entity for an account
        /// </summary>
        /// <param name="accountId">The account used to perform the update, must be the responsible manager</param>
        /// <param name="planId">The plan to subscribe to (optional)</param>
        /// <param name="promoCode">Set a promo code for a discount. (optional)</param>
        /// <param name="active">Set active status (optional)</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IUpdateSubscriptionApiResponse"/>&gt;</returns>
        public async Task<IUpdateSubscriptionApiResponse?> UpdateSubscriptionOrDefaultAsync(long accountId, Option<long> planId = default, Option<string> promoCode = default, Option<bool> active = default, System.Threading.CancellationToken cancellationToken = default)
        {
            try
            {
                return await UpdateSubscriptionAsync(accountId, planId, promoCode, active, cancellationToken).ConfigureAwait(false);
            }
            catch (Exception)
            {
                return null;
            }
        }

        /// <summary>
        /// Update Subscription Updates the subscription for the billable entity for an account
        /// </summary>
        /// <exception cref="ApiException">Thrown when fails to make API call</exception>
        /// <param name="accountId">The account used to perform the update, must be the responsible manager</param>
        /// <param name="planId">The plan to subscribe to (optional)</param>
        /// <param name="promoCode">Set a promo code for a discount. (optional)</param>
        /// <param name="active">Set active status (optional)</param>
        /// <param name="cancellationToken">Cancellation Token to cancel the request.</param>
        /// <returns><see cref="Task"/>&lt;<see cref="IUpdateSubscriptionApiResponse"/>&gt;</returns>
        public async Task<IUpdateSubscriptionApiResponse> UpdateSubscriptionAsync(long accountId, Option<long> planId = default, Option<string> promoCode = default, Option<bool> active = default, System.Threading.CancellationToken cancellationToken = default)
        {
            UriBuilder uriBuilderLocalVar = new UriBuilder();

            try
            {
                ValidateUpdateSubscription(promoCode);

                FormatUpdateSubscription(ref accountId, ref planId, ref promoCode, ref active);

                using (HttpRequestMessage httpRequestMessageLocalVar = new HttpRequestMessage())
                {
                    uriBuilderLocalVar.Host = HttpClient.BaseAddress!.Host;
                    uriBuilderLocalVar.Port = HttpClient.BaseAddress.Port;
                    uriBuilderLocalVar.Scheme = HttpClient.BaseAddress.Scheme;
                    uriBuilderLocalVar.Path = HttpClient.BaseAddress.AbsolutePath == "/"
                        ? "/subscription/update"
                        : string.Concat(HttpClient.BaseAddress.AbsolutePath, "/subscription/update");

                    System.Collections.Specialized.NameValueCollection parseQueryStringLocalVar = System.Web.HttpUtility.ParseQueryString(string.Empty);

                    parseQueryStringLocalVar["accountId"] = ClientUtils.ParameterToString(accountId);

                    if (planId.IsSet)
                        parseQueryStringLocalVar["planId"] = ClientUtils.ParameterToString(planId.Value);

                    if (promoCode.IsSet)
                        parseQueryStringLocalVar["promoCode"] = ClientUtils.ParameterToString(promoCode.Value);

                    if (active.IsSet)
                        parseQueryStringLocalVar["active"] = ClientUtils.ParameterToString(active.Value);

                    uriBuilderLocalVar.Query = parseQueryStringLocalVar.ToString();

                    httpRequestMessageLocalVar.RequestUri = uriBuilderLocalVar.Uri;

                    string[] acceptLocalVars = new string[] {
                        "*/*"
                    };

                    IEnumerable<MediaTypeWithQualityHeaderValue> acceptHeaderValuesLocalVar = ClientUtils.SelectHeaderAcceptArray(acceptLocalVars);

                    foreach (var acceptLocalVar in acceptHeaderValuesLocalVar)
                        httpRequestMessageLocalVar.Headers.Accept.Add(acceptLocalVar);

                    httpRequestMessageLocalVar.Method = HttpMethod.Post;

                    DateTime requestedAtLocalVar = DateTime.UtcNow;

                    using (HttpResponseMessage httpResponseMessageLocalVar = await HttpClient.SendAsync(httpRequestMessageLocalVar, cancellationToken).ConfigureAwait(false))
                    {
                        ILogger<UpdateSubscriptionApiResponse> apiResponseLoggerLocalVar = LoggerFactory.CreateLogger<UpdateSubscriptionApiResponse>();
                        UpdateSubscriptionApiResponse apiResponseLocalVar;

                        switch ((int)httpResponseMessageLocalVar.StatusCode) {
                            default: {
                                string responseContentLocalVar = await httpResponseMessageLocalVar.Content.ReadAsStringAsync(cancellationToken).ConfigureAwait(false);
                                apiResponseLocalVar = new(apiResponseLoggerLocalVar, httpRequestMessageLocalVar, httpResponseMessageLocalVar, responseContentLocalVar, "/subscription/update", requestedAtLocalVar, _jsonSerializerOptions);

                                break;
                            }
                        }

                        AfterUpdateSubscriptionDefaultImplementation(apiResponseLocalVar, accountId, planId, promoCode, active);

                        Events.ExecuteOnUpdateSubscription(apiResponseLocalVar);

                        return apiResponseLocalVar;
                    }
                }
            }
            catch(Exception e)
            {
                OnErrorUpdateSubscriptionDefaultImplementation(e, "/subscription/update", uriBuilderLocalVar.Path, accountId, planId, promoCode, active);
                Events.ExecuteOnErrorUpdateSubscription(e);
                throw;
            }
        }

        /// <summary>
        /// The <see cref="UpdateSubscriptionApiResponse"/>
        /// </summary>
        public partial class UpdateSubscriptionApiResponse : Org.OpenAPITools.Client.ApiResponse, IUpdateSubscriptionApiResponse
        {
            /// <summary>
            /// The logger
            /// </summary>
            public ILogger<UpdateSubscriptionApiResponse> Logger { get; }

            /// <summary>
            /// The <see cref="UpdateSubscriptionApiResponse"/>
            /// </summary>
            /// <param name="logger"></param>
            /// <param name="httpRequestMessage"></param>
            /// <param name="httpResponseMessage"></param>
            /// <param name="rawContent"></param>
            /// <param name="path"></param>
            /// <param name="requestedAt"></param>
            /// <param name="jsonSerializerOptions"></param>
            public UpdateSubscriptionApiResponse(ILogger<UpdateSubscriptionApiResponse> logger, System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage, string rawContent, string path, DateTime requestedAt, System.Text.Json.JsonSerializerOptions jsonSerializerOptions) : base(httpRequestMessage, httpResponseMessage, rawContent, path, requestedAt, jsonSerializerOptions)
            {
                Logger = logger;
                OnCreated(httpRequestMessage, httpResponseMessage);
            }

            /// <summary>
            /// The <see cref="UpdateSubscriptionApiResponse"/>
            /// </summary>
            /// <param name="logger"></param>
            /// <param name="httpRequestMessage"></param>
            /// <param name="httpResponseMessage"></param>
            /// <param name="contentStream"></param>
            /// <param name="path"></param>
            /// <param name="requestedAt"></param>
            /// <param name="jsonSerializerOptions"></param>
            public UpdateSubscriptionApiResponse(ILogger<UpdateSubscriptionApiResponse> logger, System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage, System.IO.Stream contentStream, string path, DateTime requestedAt, System.Text.Json.JsonSerializerOptions jsonSerializerOptions) : base(httpRequestMessage, httpResponseMessage, contentStream, path, requestedAt, jsonSerializerOptions)
            {
                Logger = logger;
                OnCreated(httpRequestMessage, httpResponseMessage);
            }

            partial void OnCreated(global::System.Net.Http.HttpRequestMessage httpRequestMessage, System.Net.Http.HttpResponseMessage httpResponseMessage);

            /// <summary>
            /// Returns true if the response is 200 Ok
            /// </summary>
            /// <returns></returns>
            public bool IsOk => 200 == (int)StatusCode;

            /// <summary>
            /// Deserializes the response if the response is 200 Ok
            /// </summary>
            /// <returns></returns>
            public Org.OpenAPITools.Model.SubscriptionResponse? Ok()
            {
                // This logic may be modified with the AsModel.mustache template
                return IsOk
                    ? System.Text.Json.JsonSerializer.Deserialize<Org.OpenAPITools.Model.SubscriptionResponse>(RawContent, _jsonSerializerOptions)
                    : null;
            }

            /// <summary>
            /// Returns true if the response is 200 Ok and the deserialized response is not null
            /// </summary>
            /// <param name="result"></param>
            /// <returns></returns>
            public bool TryOk([NotNullWhen(true)]out Org.OpenAPITools.Model.SubscriptionResponse? result)
            {
                result = null;

                try
                {
                    result = Ok();
                } catch (Exception e)
                {
                    OnDeserializationErrorDefaultImplementation(e, (HttpStatusCode)200);
                }

                return result != null;
            }

            private void OnDeserializationErrorDefaultImplementation(Exception exception, HttpStatusCode httpStatusCode)
            {
                bool suppressDefaultLog = false;
                OnDeserializationError(ref suppressDefaultLog, exception, httpStatusCode);
                if (!suppressDefaultLog)
                    Logger.LogError(exception, "An error occurred while deserializing the {code} response.", httpStatusCode);
            }

            partial void OnDeserializationError(ref bool suppressDefaultLog, Exception exception, HttpStatusCode httpStatusCode);
        }
    }
}
