//
// WorkflowAPI.swift
//
// Generated by openapi-generator
// https://openapi-generator.tech
//

import Foundation

open class WorkflowAPI {

    /**
     Run Workflow
     
     - parameter version: (path)  
     - parameter accountId: (query) the account ID of the user 
     - parameter workflowId: (query) the workflow to run 
     - parameter skuId: (query) this runs a particular sku on the workflow (optional)
     - parameter versionCode: (query) this runs a particular sku version on the workflow (optional)
     - parameter parameters: (query) Override parameters in JSON format. Example: &#x60;&#x60;&#x60;json {   \&quot;arguments_81\&quot;: { \&quot;filter\&quot;: \&quot;PUBLIC\&quot; },   \&quot;arguments_87\&quot;: { \&quot;tag\&quot;: \&quot;custom_tag\&quot; } } &#x60;&#x60;&#x60;  (optional)
     - parameter apiConfiguration: The configuration for the http request.
     - returns: SirqulResponse
     */
    open class func runWorkflow(version: Double, accountId: Int64, workflowId: Int64, skuId: Int64? = nil, versionCode: Int? = nil, parameters: String? = nil, apiConfiguration: OpenAPIClientAPIConfiguration = OpenAPIClientAPIConfiguration.shared) async throws(ErrorResponse) -> SirqulResponse {
        return try await runWorkflowWithRequestBuilder(version: version, accountId: accountId, workflowId: workflowId, skuId: skuId, versionCode: versionCode, parameters: parameters, apiConfiguration: apiConfiguration).execute().body
    }

    /**
     Run Workflow
     - POST /api/{version}/workflow/run
     - Runs a published executable workflow
     - parameter version: (path)  
     - parameter accountId: (query) the account ID of the user 
     - parameter workflowId: (query) the workflow to run 
     - parameter skuId: (query) this runs a particular sku on the workflow (optional)
     - parameter versionCode: (query) this runs a particular sku version on the workflow (optional)
     - parameter parameters: (query) Override parameters in JSON format. Example: &#x60;&#x60;&#x60;json {   \&quot;arguments_81\&quot;: { \&quot;filter\&quot;: \&quot;PUBLIC\&quot; },   \&quot;arguments_87\&quot;: { \&quot;tag\&quot;: \&quot;custom_tag\&quot; } } &#x60;&#x60;&#x60;  (optional)
     - parameter apiConfiguration: The configuration for the http request.
     - returns: RequestBuilder<SirqulResponse> 
     */
    open class func runWorkflowWithRequestBuilder(version: Double, accountId: Int64, workflowId: Int64, skuId: Int64? = nil, versionCode: Int? = nil, parameters: String? = nil, apiConfiguration: OpenAPIClientAPIConfiguration = OpenAPIClientAPIConfiguration.shared) -> RequestBuilder<SirqulResponse> {
        var localVariablePath = "/api/{version}/workflow/run"
        let versionPreEscape = "\(APIHelper.mapValueToPathItem(version))"
        let versionPostEscape = versionPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
        localVariablePath = localVariablePath.replacingOccurrences(of: "{version}", with: versionPostEscape, options: .literal, range: nil)
        let localVariableURLString = apiConfiguration.basePath + localVariablePath
        let localVariableParameters: [String: any Sendable]? = nil

        var localVariableUrlComponents = URLComponents(string: localVariableURLString)
        localVariableUrlComponents?.queryItems = APIHelper.mapValuesToQueryItems([
            "accountId": (wrappedValue: accountId.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
            "workflowId": (wrappedValue: workflowId.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
            "skuId": (wrappedValue: skuId?.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
            "versionCode": (wrappedValue: versionCode?.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
            "parameters": (wrappedValue: parameters?.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
        ])

        let localVariableNillableHeaders: [String: (any Sendable)?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<SirqulResponse>.Type = apiConfiguration.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "POST", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters, requiresAuthentication: false, apiConfiguration: apiConfiguration)
    }
}
