//
// SubscriptionAPI.swift
//
// Generated by openapi-generator
// https://openapi-generator.tech
//

import Foundation

open class SubscriptionAPI {

    /**
     Create Subscription
     
     - parameter version: (path)  
     - parameter accountId: (query) The account used to perform the create, must be the responsible manager 
     - parameter planId: (query) The plan to subscribe to, if null use default plan (optional)
     - parameter promoCode: (query) Set a promo code for a discount. (optional)
     - parameter apiConfiguration: The configuration for the http request.
     - returns: SubscriptionResponse
     */
    open class func createSubscription(version: Double, accountId: Int64, planId: Int64? = nil, promoCode: String? = nil, apiConfiguration: OpenAPIClientAPIConfiguration = OpenAPIClientAPIConfiguration.shared) async throws(ErrorResponse) -> SubscriptionResponse {
        return try await createSubscriptionWithRequestBuilder(version: version, accountId: accountId, planId: planId, promoCode: promoCode, apiConfiguration: apiConfiguration).execute().body
    }

    /**
     Create Subscription
     - POST /api/{version}/subscription/create
     - Create a subscription for a billable entity.  Provide a planId, if not provided then the base plan will be assigned.
     - parameter version: (path)  
     - parameter accountId: (query) The account used to perform the create, must be the responsible manager 
     - parameter planId: (query) The plan to subscribe to, if null use default plan (optional)
     - parameter promoCode: (query) Set a promo code for a discount. (optional)
     - parameter apiConfiguration: The configuration for the http request.
     - returns: RequestBuilder<SubscriptionResponse> 
     */
    open class func createSubscriptionWithRequestBuilder(version: Double, accountId: Int64, planId: Int64? = nil, promoCode: String? = nil, apiConfiguration: OpenAPIClientAPIConfiguration = OpenAPIClientAPIConfiguration.shared) -> RequestBuilder<SubscriptionResponse> {
        var localVariablePath = "/api/{version}/subscription/create"
        let versionPreEscape = "\(APIHelper.mapValueToPathItem(version))"
        let versionPostEscape = versionPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
        localVariablePath = localVariablePath.replacingOccurrences(of: "{version}", with: versionPostEscape, options: .literal, range: nil)
        let localVariableURLString = apiConfiguration.basePath + localVariablePath
        let localVariableParameters: [String: any Sendable]? = nil

        var localVariableUrlComponents = URLComponents(string: localVariableURLString)
        localVariableUrlComponents?.queryItems = APIHelper.mapValuesToQueryItems([
            "accountId": (wrappedValue: accountId.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
            "planId": (wrappedValue: planId?.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
            "promoCode": (wrappedValue: promoCode?.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
        ])

        let localVariableNillableHeaders: [String: (any Sendable)?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<SubscriptionResponse>.Type = apiConfiguration.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "POST", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters, requiresAuthentication: false, apiConfiguration: apiConfiguration)
    }

    /**
     Delete Subscription
     
     - parameter version: (path)  
     - parameter accountId: (query) The account used to perform the delete, must be the responsible manager 
     - parameter apiConfiguration: The configuration for the http request.
     - returns: SirqulResponse
     */
    open class func deleteSubscription(version: Double, accountId: Int64, apiConfiguration: OpenAPIClientAPIConfiguration = OpenAPIClientAPIConfiguration.shared) async throws(ErrorResponse) -> SirqulResponse {
        return try await deleteSubscriptionWithRequestBuilder(version: version, accountId: accountId, apiConfiguration: apiConfiguration).execute().body
    }

    /**
     Delete Subscription
     - POST /api/{version}/subscription/delete
     - Suspend the current subscription for the billable entity managed by the account.  The account must be the responsible manager to perform this action
     - parameter version: (path)  
     - parameter accountId: (query) The account used to perform the delete, must be the responsible manager 
     - parameter apiConfiguration: The configuration for the http request.
     - returns: RequestBuilder<SirqulResponse> 
     */
    open class func deleteSubscriptionWithRequestBuilder(version: Double, accountId: Int64, apiConfiguration: OpenAPIClientAPIConfiguration = OpenAPIClientAPIConfiguration.shared) -> RequestBuilder<SirqulResponse> {
        var localVariablePath = "/api/{version}/subscription/delete"
        let versionPreEscape = "\(APIHelper.mapValueToPathItem(version))"
        let versionPostEscape = versionPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
        localVariablePath = localVariablePath.replacingOccurrences(of: "{version}", with: versionPostEscape, options: .literal, range: nil)
        let localVariableURLString = apiConfiguration.basePath + localVariablePath
        let localVariableParameters: [String: any Sendable]? = nil

        var localVariableUrlComponents = URLComponents(string: localVariableURLString)
        localVariableUrlComponents?.queryItems = APIHelper.mapValuesToQueryItems([
            "accountId": (wrappedValue: accountId.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
        ])

        let localVariableNillableHeaders: [String: (any Sendable)?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<SirqulResponse>.Type = apiConfiguration.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "POST", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters, requiresAuthentication: false, apiConfiguration: apiConfiguration)
    }

    /**
     Get Subscription
     
     - parameter version: (path)  
     - parameter accountId: (query) The account used to perform the lookup 
     - parameter apiConfiguration: The configuration for the http request.
     - returns: SubscriptionResponse
     */
    open class func getSubscription(version: Double, accountId: Int64, apiConfiguration: OpenAPIClientAPIConfiguration = OpenAPIClientAPIConfiguration.shared) async throws(ErrorResponse) -> SubscriptionResponse {
        return try await getSubscriptionWithRequestBuilder(version: version, accountId: accountId, apiConfiguration: apiConfiguration).execute().body
    }

    /**
     Get Subscription
     - GET /api/{version}/subscription/get
     - Use the accountId to determine the associated BillableEntity.  Then get the subscription.
     - parameter version: (path)  
     - parameter accountId: (query) The account used to perform the lookup 
     - parameter apiConfiguration: The configuration for the http request.
     - returns: RequestBuilder<SubscriptionResponse> 
     */
    open class func getSubscriptionWithRequestBuilder(version: Double, accountId: Int64, apiConfiguration: OpenAPIClientAPIConfiguration = OpenAPIClientAPIConfiguration.shared) -> RequestBuilder<SubscriptionResponse> {
        var localVariablePath = "/api/{version}/subscription/get"
        let versionPreEscape = "\(APIHelper.mapValueToPathItem(version))"
        let versionPostEscape = versionPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
        localVariablePath = localVariablePath.replacingOccurrences(of: "{version}", with: versionPostEscape, options: .literal, range: nil)
        let localVariableURLString = apiConfiguration.basePath + localVariablePath
        let localVariableParameters: [String: any Sendable]? = nil

        var localVariableUrlComponents = URLComponents(string: localVariableURLString)
        localVariableUrlComponents?.queryItems = APIHelper.mapValuesToQueryItems([
            "accountId": (wrappedValue: accountId.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
        ])

        let localVariableNillableHeaders: [String: (any Sendable)?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<SubscriptionResponse>.Type = apiConfiguration.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "GET", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters, requiresAuthentication: false, apiConfiguration: apiConfiguration)
    }

    /**
     Get Subscription Plan
     
     - parameter version: (path)  
     - parameter planId: (query) The ID of the plan to get 
     - parameter apiConfiguration: The configuration for the http request.
     - returns: SubscriptionPlanResponse
     */
    open class func getSubscriptionPlan(version: Double, planId: Int64, apiConfiguration: OpenAPIClientAPIConfiguration = OpenAPIClientAPIConfiguration.shared) async throws(ErrorResponse) -> SubscriptionPlanResponse {
        return try await getSubscriptionPlanWithRequestBuilder(version: version, planId: planId, apiConfiguration: apiConfiguration).execute().body
    }

    /**
     Get Subscription Plan
     - GET /api/{version}/subscription/plan/get
     - Get the matched subscription plan
     - parameter version: (path)  
     - parameter planId: (query) The ID of the plan to get 
     - parameter apiConfiguration: The configuration for the http request.
     - returns: RequestBuilder<SubscriptionPlanResponse> 
     */
    open class func getSubscriptionPlanWithRequestBuilder(version: Double, planId: Int64, apiConfiguration: OpenAPIClientAPIConfiguration = OpenAPIClientAPIConfiguration.shared) -> RequestBuilder<SubscriptionPlanResponse> {
        var localVariablePath = "/api/{version}/subscription/plan/get"
        let versionPreEscape = "\(APIHelper.mapValueToPathItem(version))"
        let versionPostEscape = versionPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
        localVariablePath = localVariablePath.replacingOccurrences(of: "{version}", with: versionPostEscape, options: .literal, range: nil)
        let localVariableURLString = apiConfiguration.basePath + localVariablePath
        let localVariableParameters: [String: any Sendable]? = nil

        var localVariableUrlComponents = URLComponents(string: localVariableURLString)
        localVariableUrlComponents?.queryItems = APIHelper.mapValuesToQueryItems([
            "planId": (wrappedValue: planId.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
        ])

        let localVariableNillableHeaders: [String: (any Sendable)?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<SubscriptionPlanResponse>.Type = apiConfiguration.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "GET", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters, requiresAuthentication: false, apiConfiguration: apiConfiguration)
    }

    /**
     List Subscription Plans
     
     - parameter version: (path)  
     - parameter visible: (query) Include visible only (true), hidden only (false), or all (null) (optional)
     - parameter role: (query) The role the plan is targeted for, values are: DEVELOPER, RETAILER, ADVERTISER (optional)
     - parameter apiConfiguration: The configuration for the http request.
     - returns: [SubscriptionPlanResponse]
     */
    open class func getSubscriptionPlans(version: Double, visible: Bool? = nil, role: String? = nil, apiConfiguration: OpenAPIClientAPIConfiguration = OpenAPIClientAPIConfiguration.shared) async throws(ErrorResponse) -> [SubscriptionPlanResponse] {
        return try await getSubscriptionPlansWithRequestBuilder(version: version, visible: visible, role: role, apiConfiguration: apiConfiguration).execute().body
    }

    /**
     List Subscription Plans
     - GET /api/{version}/subscription/plan/list
     - Get the matched subscription plan
     - parameter version: (path)  
     - parameter visible: (query) Include visible only (true), hidden only (false), or all (null) (optional)
     - parameter role: (query) The role the plan is targeted for, values are: DEVELOPER, RETAILER, ADVERTISER (optional)
     - parameter apiConfiguration: The configuration for the http request.
     - returns: RequestBuilder<[SubscriptionPlanResponse]> 
     */
    open class func getSubscriptionPlansWithRequestBuilder(version: Double, visible: Bool? = nil, role: String? = nil, apiConfiguration: OpenAPIClientAPIConfiguration = OpenAPIClientAPIConfiguration.shared) -> RequestBuilder<[SubscriptionPlanResponse]> {
        var localVariablePath = "/api/{version}/subscription/plan/list"
        let versionPreEscape = "\(APIHelper.mapValueToPathItem(version))"
        let versionPostEscape = versionPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
        localVariablePath = localVariablePath.replacingOccurrences(of: "{version}", with: versionPostEscape, options: .literal, range: nil)
        let localVariableURLString = apiConfiguration.basePath + localVariablePath
        let localVariableParameters: [String: any Sendable]? = nil

        var localVariableUrlComponents = URLComponents(string: localVariableURLString)
        localVariableUrlComponents?.queryItems = APIHelper.mapValuesToQueryItems([
            "visible": (wrappedValue: visible?.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
            "role": (wrappedValue: role?.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
        ])

        let localVariableNillableHeaders: [String: (any Sendable)?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<[SubscriptionPlanResponse]>.Type = apiConfiguration.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "GET", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters, requiresAuthentication: false, apiConfiguration: apiConfiguration)
    }

    /**
     Get Subscription Usage
     
     - parameter version: (path)  
     - parameter accountId: (query) The account used to perform the lookup 
     - parameter applicationId: (query) Get for just 1 application instead of the BillableEntity (optional)
     - parameter start: (query) The start time frame (optional)
     - parameter end: (query) The end time frame (optional)
     - parameter apiConfiguration: The configuration for the http request.
     - returns: ApplicationUsageResponse
     */
    open class func getSubscriptionUsage(version: Double, accountId: Int64, applicationId: Int64? = nil, start: Int64? = nil, end: Int64? = nil, apiConfiguration: OpenAPIClientAPIConfiguration = OpenAPIClientAPIConfiguration.shared) async throws(ErrorResponse) -> ApplicationUsageResponse {
        return try await getSubscriptionUsageWithRequestBuilder(version: version, accountId: accountId, applicationId: applicationId, start: start, end: end, apiConfiguration: apiConfiguration).execute().body
    }

    /**
     Get Subscription Usage
     - GET /api/{version}/subscription/usage/get
     - Use the accountId to determine the associated BillableEntity.  Then get the application usage.
     - parameter version: (path)  
     - parameter accountId: (query) The account used to perform the lookup 
     - parameter applicationId: (query) Get for just 1 application instead of the BillableEntity (optional)
     - parameter start: (query) The start time frame (optional)
     - parameter end: (query) The end time frame (optional)
     - parameter apiConfiguration: The configuration for the http request.
     - returns: RequestBuilder<ApplicationUsageResponse> 
     */
    open class func getSubscriptionUsageWithRequestBuilder(version: Double, accountId: Int64, applicationId: Int64? = nil, start: Int64? = nil, end: Int64? = nil, apiConfiguration: OpenAPIClientAPIConfiguration = OpenAPIClientAPIConfiguration.shared) -> RequestBuilder<ApplicationUsageResponse> {
        var localVariablePath = "/api/{version}/subscription/usage/get"
        let versionPreEscape = "\(APIHelper.mapValueToPathItem(version))"
        let versionPostEscape = versionPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
        localVariablePath = localVariablePath.replacingOccurrences(of: "{version}", with: versionPostEscape, options: .literal, range: nil)
        let localVariableURLString = apiConfiguration.basePath + localVariablePath
        let localVariableParameters: [String: any Sendable]? = nil

        var localVariableUrlComponents = URLComponents(string: localVariableURLString)
        localVariableUrlComponents?.queryItems = APIHelper.mapValuesToQueryItems([
            "accountId": (wrappedValue: accountId.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
            "applicationId": (wrappedValue: applicationId?.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
            "start": (wrappedValue: start?.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
            "end": (wrappedValue: end?.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
        ])

        let localVariableNillableHeaders: [String: (any Sendable)?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<ApplicationUsageResponse>.Type = apiConfiguration.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "GET", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters, requiresAuthentication: false, apiConfiguration: apiConfiguration)
    }

    /**
     Update Subscription
     
     - parameter version: (path)  
     - parameter accountId: (query) The account used to perform the update, must be the responsible manager 
     - parameter planId: (query) The plan to subscribe to (optional)
     - parameter promoCode: (query) Set a promo code for a discount. (optional)
     - parameter active: (query) Set active status (optional)
     - parameter apiConfiguration: The configuration for the http request.
     - returns: SubscriptionResponse
     */
    open class func updateSubscription(version: Double, accountId: Int64, planId: Int64? = nil, promoCode: String? = nil, active: Bool? = nil, apiConfiguration: OpenAPIClientAPIConfiguration = OpenAPIClientAPIConfiguration.shared) async throws(ErrorResponse) -> SubscriptionResponse {
        return try await updateSubscriptionWithRequestBuilder(version: version, accountId: accountId, planId: planId, promoCode: promoCode, active: active, apiConfiguration: apiConfiguration).execute().body
    }

    /**
     Update Subscription
     - POST /api/{version}/subscription/update
     - Updates the subscription for the billable entity for an account
     - parameter version: (path)  
     - parameter accountId: (query) The account used to perform the update, must be the responsible manager 
     - parameter planId: (query) The plan to subscribe to (optional)
     - parameter promoCode: (query) Set a promo code for a discount. (optional)
     - parameter active: (query) Set active status (optional)
     - parameter apiConfiguration: The configuration for the http request.
     - returns: RequestBuilder<SubscriptionResponse> 
     */
    open class func updateSubscriptionWithRequestBuilder(version: Double, accountId: Int64, planId: Int64? = nil, promoCode: String? = nil, active: Bool? = nil, apiConfiguration: OpenAPIClientAPIConfiguration = OpenAPIClientAPIConfiguration.shared) -> RequestBuilder<SubscriptionResponse> {
        var localVariablePath = "/api/{version}/subscription/update"
        let versionPreEscape = "\(APIHelper.mapValueToPathItem(version))"
        let versionPostEscape = versionPreEscape.addingPercentEncoding(withAllowedCharacters: .urlPathAllowed) ?? ""
        localVariablePath = localVariablePath.replacingOccurrences(of: "{version}", with: versionPostEscape, options: .literal, range: nil)
        let localVariableURLString = apiConfiguration.basePath + localVariablePath
        let localVariableParameters: [String: any Sendable]? = nil

        var localVariableUrlComponents = URLComponents(string: localVariableURLString)
        localVariableUrlComponents?.queryItems = APIHelper.mapValuesToQueryItems([
            "accountId": (wrappedValue: accountId.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
            "planId": (wrappedValue: planId?.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
            "promoCode": (wrappedValue: promoCode?.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
            "active": (wrappedValue: active?.asParameter(codableHelper: apiConfiguration.codableHelper), isExplode: true),
        ])

        let localVariableNillableHeaders: [String: (any Sendable)?] = [
            :
        ]

        let localVariableHeaderParameters = APIHelper.rejectNilHeaders(localVariableNillableHeaders)

        let localVariableRequestBuilder: RequestBuilder<SubscriptionResponse>.Type = apiConfiguration.requestBuilderFactory.getBuilder()

        return localVariableRequestBuilder.init(method: "POST", URLString: (localVariableUrlComponents?.string ?? localVariableURLString), parameters: localVariableParameters, headers: localVariableHeaderParameters, requiresAuthentication: false, apiConfiguration: apiConfiguration)
    }
}
