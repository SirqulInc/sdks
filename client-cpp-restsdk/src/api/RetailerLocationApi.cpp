/**
 * Sirqul IoT Platform
 * Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
 *
 * The version of the OpenAPI document: 3.16
 * Contact: info@sirqul.com
 *
 * NOTE: This class is auto generated by OpenAPI-Generator 7.20.0-SNAPSHOT.
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


#include "CppRestOpenAPIClient/api/RetailerLocationApi.h"
#include "CppRestOpenAPIClient/IHttpBody.h"
#include "CppRestOpenAPIClient/JsonBody.h"
#include "CppRestOpenAPIClient/MultipartFormData.h"

#include <boost/algorithm/string/replace.hpp>

#include <unordered_set>

namespace org {
namespace openapitools {
namespace client {
namespace api {

using namespace org::openapitools::client::model;

RetailerLocationApi::RetailerLocationApi( std::shared_ptr<const ApiClient> apiClient )
    : m_ApiClient(apiClient)
{
}

RetailerLocationApi::~RetailerLocationApi()
{
}

pplx::task<std::shared_ptr<RetailerLocationResponse>> RetailerLocationApi::createRetailerLocationConsumer(utility::string_t appKey, utility::string_t name, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<utility::string_t> streetAddress, boost::optional<utility::string_t> streetAddress2, boost::optional<utility::string_t> city, boost::optional<utility::string_t> state, boost::optional<utility::string_t> postalCode, boost::optional<utility::string_t> country, boost::optional<utility::string_t> businessPhone, boost::optional<utility::string_t> businessPhoneExt, boost::optional<utility::string_t> website, boost::optional<utility::string_t> email, boost::optional<utility::string_t> detailsHeader, boost::optional<utility::string_t> detailsBody, boost::optional<utility::string_t> hours, boost::optional<utility::string_t> tags, boost::optional<int64_t> logoAssetId, boost::optional<int64_t> picture1AssetId, boost::optional<int64_t> picture2AssetId, boost::optional<utility::string_t> categoryIds, boost::optional<utility::string_t> filterIds, boost::optional<utility::string_t> metaData, boost::optional<bool> publicLocation, boost::optional<bool> active, boost::optional<utility::string_t> locationType, boost::optional<double> latitude, boost::optional<double> longitude) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/location/create");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("RetailerLocationApi->createRetailerLocationConsumer does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("appKey")] = ApiClient::parameterToString(appKey);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("name")] = ApiClient::parameterToString(name);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (streetAddress)
    {
        localVarQueryParams[utility::conversions::to_string_t("streetAddress")] = ApiClient::parameterToString(*streetAddress);
    }
    if (streetAddress2)
    {
        localVarQueryParams[utility::conversions::to_string_t("streetAddress2")] = ApiClient::parameterToString(*streetAddress2);
    }
    if (city)
    {
        localVarQueryParams[utility::conversions::to_string_t("city")] = ApiClient::parameterToString(*city);
    }
    if (state)
    {
        localVarQueryParams[utility::conversions::to_string_t("state")] = ApiClient::parameterToString(*state);
    }
    if (postalCode)
    {
        localVarQueryParams[utility::conversions::to_string_t("postalCode")] = ApiClient::parameterToString(*postalCode);
    }
    if (country)
    {
        localVarQueryParams[utility::conversions::to_string_t("country")] = ApiClient::parameterToString(*country);
    }
    if (businessPhone)
    {
        localVarQueryParams[utility::conversions::to_string_t("businessPhone")] = ApiClient::parameterToString(*businessPhone);
    }
    if (businessPhoneExt)
    {
        localVarQueryParams[utility::conversions::to_string_t("businessPhoneExt")] = ApiClient::parameterToString(*businessPhoneExt);
    }
    if (website)
    {
        localVarQueryParams[utility::conversions::to_string_t("website")] = ApiClient::parameterToString(*website);
    }
    if (email)
    {
        localVarQueryParams[utility::conversions::to_string_t("email")] = ApiClient::parameterToString(*email);
    }
    if (detailsHeader)
    {
        localVarQueryParams[utility::conversions::to_string_t("detailsHeader")] = ApiClient::parameterToString(*detailsHeader);
    }
    if (detailsBody)
    {
        localVarQueryParams[utility::conversions::to_string_t("detailsBody")] = ApiClient::parameterToString(*detailsBody);
    }
    if (hours)
    {
        localVarQueryParams[utility::conversions::to_string_t("hours")] = ApiClient::parameterToString(*hours);
    }
    if (tags)
    {
        localVarQueryParams[utility::conversions::to_string_t("tags")] = ApiClient::parameterToString(*tags);
    }
    if (logoAssetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("logoAssetId")] = ApiClient::parameterToString(*logoAssetId);
    }
    if (picture1AssetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("picture1AssetId")] = ApiClient::parameterToString(*picture1AssetId);
    }
    if (picture2AssetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("picture2AssetId")] = ApiClient::parameterToString(*picture2AssetId);
    }
    if (categoryIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("categoryIds")] = ApiClient::parameterToString(*categoryIds);
    }
    if (filterIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("filterIds")] = ApiClient::parameterToString(*filterIds);
    }
    if (metaData)
    {
        localVarQueryParams[utility::conversions::to_string_t("metaData")] = ApiClient::parameterToString(*metaData);
    }
    if (publicLocation)
    {
        localVarQueryParams[utility::conversions::to_string_t("publicLocation")] = ApiClient::parameterToString(*publicLocation);
    }
    if (active)
    {
        localVarQueryParams[utility::conversions::to_string_t("active")] = ApiClient::parameterToString(*active);
    }
    if (locationType)
    {
        localVarQueryParams[utility::conversions::to_string_t("locationType")] = ApiClient::parameterToString(*locationType);
    }
    if (latitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("latitude")] = ApiClient::parameterToString(*latitude);
    }
    if (longitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("longitude")] = ApiClient::parameterToString(*longitude);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("RetailerLocationApi->createRetailerLocationConsumer does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling createRetailerLocationConsumer: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling createRetailerLocationConsumer: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<RetailerLocationResponse> localVarResult(new RetailerLocationResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling createRetailerLocationConsumer: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<RetailerLocationResponse>> RetailerLocationApi::createRetailerLocations(int64_t retailerId, utility::string_t name, utility::string_t streetAddress, utility::string_t city, utility::string_t state, utility::string_t postalCode, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<utility::string_t> streetAddress2, boost::optional<utility::string_t> country, boost::optional<utility::string_t> businessPhone, boost::optional<utility::string_t> businessPhoneExt, boost::optional<utility::string_t> website, boost::optional<utility::string_t> email, boost::optional<utility::string_t> internalId, boost::optional<utility::string_t> detailsHeader, boost::optional<utility::string_t> detailsBody, boost::optional<utility::string_t> hours, boost::optional<std::shared_ptr<HttpContent>> logo, boost::optional<int64_t> logoAssetId, boost::optional<std::shared_ptr<HttpContent>> picture1, boost::optional<int64_t> picture1AssetId, boost::optional<std::shared_ptr<HttpContent>> picture2, boost::optional<int64_t> picture2AssetId, boost::optional<utility::string_t> categoryIds, boost::optional<utility::string_t> filterIds, boost::optional<double> latitude, boost::optional<double> longitude, boost::optional<utility::string_t> building, boost::optional<utility::string_t> googlePlaceId, boost::optional<utility::string_t> yelpId, boost::optional<bool> active, boost::optional<bool> publicLocation, boost::optional<utility::string_t> locationType, boost::optional<utility::string_t> audienceIds, boost::optional<utility::string_t> audienceIdsToAdd, boost::optional<utility::string_t> audienceIdsToRemove, boost::optional<utility::string_t> responseFormat, boost::optional<utility::string_t> responseIncludes) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/retailer/location/create");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("RetailerLocationApi->createRetailerLocations does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("retailerId")] = ApiClient::parameterToString(retailerId);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("name")] = ApiClient::parameterToString(name);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("streetAddress")] = ApiClient::parameterToString(streetAddress);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("city")] = ApiClient::parameterToString(city);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("state")] = ApiClient::parameterToString(state);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("postalCode")] = ApiClient::parameterToString(postalCode);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (streetAddress2)
    {
        localVarQueryParams[utility::conversions::to_string_t("streetAddress2")] = ApiClient::parameterToString(*streetAddress2);
    }
    if (country)
    {
        localVarQueryParams[utility::conversions::to_string_t("country")] = ApiClient::parameterToString(*country);
    }
    if (businessPhone)
    {
        localVarQueryParams[utility::conversions::to_string_t("businessPhone")] = ApiClient::parameterToString(*businessPhone);
    }
    if (businessPhoneExt)
    {
        localVarQueryParams[utility::conversions::to_string_t("businessPhoneExt")] = ApiClient::parameterToString(*businessPhoneExt);
    }
    if (website)
    {
        localVarQueryParams[utility::conversions::to_string_t("website")] = ApiClient::parameterToString(*website);
    }
    if (email)
    {
        localVarQueryParams[utility::conversions::to_string_t("email")] = ApiClient::parameterToString(*email);
    }
    if (internalId)
    {
        localVarQueryParams[utility::conversions::to_string_t("internalId")] = ApiClient::parameterToString(*internalId);
    }
    if (detailsHeader)
    {
        localVarQueryParams[utility::conversions::to_string_t("detailsHeader")] = ApiClient::parameterToString(*detailsHeader);
    }
    if (detailsBody)
    {
        localVarQueryParams[utility::conversions::to_string_t("detailsBody")] = ApiClient::parameterToString(*detailsBody);
    }
    if (hours)
    {
        localVarQueryParams[utility::conversions::to_string_t("hours")] = ApiClient::parameterToString(*hours);
    }
    if (logo && *logo != nullptr)
    {
        localVarQueryParams[utility::conversions::to_string_t("logo")] = ApiClient::parameterToString(*logo);
    }
    if (logoAssetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("logoAssetId")] = ApiClient::parameterToString(*logoAssetId);
    }
    if (picture1 && *picture1 != nullptr)
    {
        localVarQueryParams[utility::conversions::to_string_t("picture1")] = ApiClient::parameterToString(*picture1);
    }
    if (picture1AssetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("picture1AssetId")] = ApiClient::parameterToString(*picture1AssetId);
    }
    if (picture2 && *picture2 != nullptr)
    {
        localVarQueryParams[utility::conversions::to_string_t("picture2")] = ApiClient::parameterToString(*picture2);
    }
    if (picture2AssetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("picture2AssetId")] = ApiClient::parameterToString(*picture2AssetId);
    }
    if (categoryIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("categoryIds")] = ApiClient::parameterToString(*categoryIds);
    }
    if (filterIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("filterIds")] = ApiClient::parameterToString(*filterIds);
    }
    if (latitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("latitude")] = ApiClient::parameterToString(*latitude);
    }
    if (longitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("longitude")] = ApiClient::parameterToString(*longitude);
    }
    if (building)
    {
        localVarQueryParams[utility::conversions::to_string_t("building")] = ApiClient::parameterToString(*building);
    }
    if (googlePlaceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("googlePlaceId")] = ApiClient::parameterToString(*googlePlaceId);
    }
    if (yelpId)
    {
        localVarQueryParams[utility::conversions::to_string_t("yelpId")] = ApiClient::parameterToString(*yelpId);
    }
    if (active)
    {
        localVarQueryParams[utility::conversions::to_string_t("active")] = ApiClient::parameterToString(*active);
    }
    if (publicLocation)
    {
        localVarQueryParams[utility::conversions::to_string_t("publicLocation")] = ApiClient::parameterToString(*publicLocation);
    }
    if (locationType)
    {
        localVarQueryParams[utility::conversions::to_string_t("locationType")] = ApiClient::parameterToString(*locationType);
    }
    if (audienceIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("audienceIds")] = ApiClient::parameterToString(*audienceIds);
    }
    if (audienceIdsToAdd)
    {
        localVarQueryParams[utility::conversions::to_string_t("audienceIdsToAdd")] = ApiClient::parameterToString(*audienceIdsToAdd);
    }
    if (audienceIdsToRemove)
    {
        localVarQueryParams[utility::conversions::to_string_t("audienceIdsToRemove")] = ApiClient::parameterToString(*audienceIdsToRemove);
    }
    if (responseFormat)
    {
        localVarQueryParams[utility::conversions::to_string_t("responseFormat")] = ApiClient::parameterToString(*responseFormat);
    }
    if (responseIncludes)
    {
        localVarQueryParams[utility::conversions::to_string_t("responseIncludes")] = ApiClient::parameterToString(*responseIncludes);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("RetailerLocationApi->createRetailerLocations does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling createRetailerLocations: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling createRetailerLocations: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<RetailerLocationResponse> localVarResult(new RetailerLocationResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling createRetailerLocations: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<SirqulResponse>> RetailerLocationApi::deleteRetailerLocation(boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<int64_t> retailerLocationId) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/retailer/location/delete");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("RetailerLocationApi->deleteRetailerLocation does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (retailerLocationId)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerLocationId")] = ApiClient::parameterToString(*retailerLocationId);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("RetailerLocationApi->deleteRetailerLocation does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling deleteRetailerLocation: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling deleteRetailerLocation: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<SirqulResponse> localVarResult(new SirqulResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling deleteRetailerLocation: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<RetailerLocationResponse>> RetailerLocationApi::getRetailerLocation(int64_t retailerLocationId, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<utility::string_t> retailerLocationToken) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/retailer/location/get");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("RetailerLocationApi->getRetailerLocation does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("retailerLocationId")] = ApiClient::parameterToString(retailerLocationId);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (retailerLocationToken)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerLocationToken")] = ApiClient::parameterToString(*retailerLocationToken);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("RetailerLocationApi->getRetailerLocation does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling getRetailerLocation: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling getRetailerLocation: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<RetailerLocationResponse> localVarResult(new RetailerLocationResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling getRetailerLocation: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<RetailerLocationResponse>> RetailerLocationApi::getRetailerLocationConsumer(int64_t retailerLocationId, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/location/get");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("RetailerLocationApi->getRetailerLocationConsumer does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("retailerLocationId")] = ApiClient::parameterToString(retailerLocationId);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("RetailerLocationApi->getRetailerLocationConsumer does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling getRetailerLocationConsumer: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling getRetailerLocationConsumer: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<RetailerLocationResponse> localVarResult(new RetailerLocationResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling getRetailerLocationConsumer: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::vector<std::shared_ptr<RetailerLocationResponse>>> RetailerLocationApi::indexedRetailerLocationDistanceSearch(double latitude, double longitude, double searchRange, int32_t start, int32_t limit, boost::optional<int64_t> accountId, boost::optional<utility::string_t> address, boost::optional<bool> hasOffers, boost::optional<utility::string_t> categories, boost::optional<utility::string_t> filters, boost::optional<utility::string_t> audiences, boost::optional<utility::string_t> retailerIds, boost::optional<utility::string_t> retailerLocationIds, boost::optional<utility::string_t> tags, boost::optional<utility::string_t> locationType, boost::optional<utility::string_t> sortField, boost::optional<bool> descending, boost::optional<utility::string_t> q, boost::optional<utility::string_t> keyword, boost::optional<utility::string_t> keywordOperator, boost::optional<utility::string_t> searchExpression, boost::optional<utility::string_t> distanceUnit, boost::optional<bool> returnFavorited, boost::optional<bool> returnRetailer, boost::optional<bool> returnAssets, boost::optional<bool> returnOffers, boost::optional<bool> returnCategories, boost::optional<bool> returnFilters, boost::optional<bool> returnAudiences, boost::optional<bool> returnQrCode, boost::optional<bool> returnExternalCategoryData, boost::optional<bool> includeFavorite, boost::optional<bool> includeLiked, boost::optional<bool> includeRating) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/retailer/location/idistancesearch");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("RetailerLocationApi->indexedRetailerLocationDistanceSearch does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("latitude")] = ApiClient::parameterToString(latitude);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("longitude")] = ApiClient::parameterToString(longitude);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("searchRange")] = ApiClient::parameterToString(searchRange);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("start")] = ApiClient::parameterToString(start);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("limit")] = ApiClient::parameterToString(limit);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (address)
    {
        localVarQueryParams[utility::conversions::to_string_t("address")] = ApiClient::parameterToString(*address);
    }
    if (hasOffers)
    {
        localVarQueryParams[utility::conversions::to_string_t("hasOffers")] = ApiClient::parameterToString(*hasOffers);
    }
    if (categories)
    {
        localVarQueryParams[utility::conversions::to_string_t("categories")] = ApiClient::parameterToString(*categories);
    }
    if (filters)
    {
        localVarQueryParams[utility::conversions::to_string_t("filters")] = ApiClient::parameterToString(*filters);
    }
    if (audiences)
    {
        localVarQueryParams[utility::conversions::to_string_t("audiences")] = ApiClient::parameterToString(*audiences);
    }
    if (retailerIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerIds")] = ApiClient::parameterToString(*retailerIds);
    }
    if (retailerLocationIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerLocationIds")] = ApiClient::parameterToString(*retailerLocationIds);
    }
    if (tags)
    {
        localVarQueryParams[utility::conversions::to_string_t("tags")] = ApiClient::parameterToString(*tags);
    }
    if (locationType)
    {
        localVarQueryParams[utility::conversions::to_string_t("locationType")] = ApiClient::parameterToString(*locationType);
    }
    if (sortField)
    {
        localVarQueryParams[utility::conversions::to_string_t("sortField")] = ApiClient::parameterToString(*sortField);
    }
    if (descending)
    {
        localVarQueryParams[utility::conversions::to_string_t("descending")] = ApiClient::parameterToString(*descending);
    }
    if (q)
    {
        localVarQueryParams[utility::conversions::to_string_t("q")] = ApiClient::parameterToString(*q);
    }
    if (keyword)
    {
        localVarQueryParams[utility::conversions::to_string_t("keyword")] = ApiClient::parameterToString(*keyword);
    }
    if (keywordOperator)
    {
        localVarQueryParams[utility::conversions::to_string_t("keywordOperator")] = ApiClient::parameterToString(*keywordOperator);
    }
    if (searchExpression)
    {
        localVarQueryParams[utility::conversions::to_string_t("searchExpression")] = ApiClient::parameterToString(*searchExpression);
    }
    if (distanceUnit)
    {
        localVarQueryParams[utility::conversions::to_string_t("distanceUnit")] = ApiClient::parameterToString(*distanceUnit);
    }
    if (returnFavorited)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnFavorited")] = ApiClient::parameterToString(*returnFavorited);
    }
    if (returnRetailer)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnRetailer")] = ApiClient::parameterToString(*returnRetailer);
    }
    if (returnAssets)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnAssets")] = ApiClient::parameterToString(*returnAssets);
    }
    if (returnOffers)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnOffers")] = ApiClient::parameterToString(*returnOffers);
    }
    if (returnCategories)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnCategories")] = ApiClient::parameterToString(*returnCategories);
    }
    if (returnFilters)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnFilters")] = ApiClient::parameterToString(*returnFilters);
    }
    if (returnAudiences)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnAudiences")] = ApiClient::parameterToString(*returnAudiences);
    }
    if (returnQrCode)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnQrCode")] = ApiClient::parameterToString(*returnQrCode);
    }
    if (returnExternalCategoryData)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnExternalCategoryData")] = ApiClient::parameterToString(*returnExternalCategoryData);
    }
    if (includeFavorite)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeFavorite")] = ApiClient::parameterToString(*includeFavorite);
    }
    if (includeLiked)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeLiked")] = ApiClient::parameterToString(*includeLiked);
    }
    if (includeRating)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeRating")] = ApiClient::parameterToString(*includeRating);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("RetailerLocationApi->indexedRetailerLocationDistanceSearch does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling indexedRetailerLocationDistanceSearch: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling indexedRetailerLocationDistanceSearch: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::vector<std::shared_ptr<RetailerLocationResponse>> localVarResult;

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);
            for( auto& localVarItem : localVarJson.as_array() )
            {
                std::shared_ptr<RetailerLocationResponse> localVarItemObj;
                ModelBase::fromJson(localVarItem, localVarItemObj);
                localVarResult.push_back(localVarItemObj);
            }
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling indexedRetailerLocationDistanceSearch: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::vector<std::shared_ptr<RetailerLocationResponse>>> RetailerLocationApi::indexedRetailerLocationSearch(boost::optional<int64_t> accountId, boost::optional<int32_t> start, boost::optional<int32_t> limit, boost::optional<bool> hasOffers, boost::optional<utility::string_t> categories, boost::optional<utility::string_t> filters, boost::optional<utility::string_t> audiences, boost::optional<utility::string_t> retailerIds, boost::optional<utility::string_t> retailerLocationIds, boost::optional<utility::string_t> tags, boost::optional<utility::string_t> locationType, boost::optional<utility::string_t> sortField, boost::optional<bool> descending, boost::optional<utility::string_t> q, boost::optional<utility::string_t> keyword, boost::optional<utility::string_t> keywordOperator, boost::optional<utility::string_t> searchExpression, boost::optional<bool> returnRetailer, boost::optional<bool> returnAssets, boost::optional<bool> returnOffers, boost::optional<bool> returnCategories, boost::optional<bool> returnFilters, boost::optional<bool> returnAudiences, boost::optional<bool> returnQrCode, boost::optional<bool> returnExternalCategoryData, boost::optional<bool> includeFavorite, boost::optional<bool> includeLiked, boost::optional<bool> includeRating) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/retailer/location/isearch");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("RetailerLocationApi->indexedRetailerLocationSearch does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (start)
    {
        localVarQueryParams[utility::conversions::to_string_t("start")] = ApiClient::parameterToString(*start);
    }
    if (limit)
    {
        localVarQueryParams[utility::conversions::to_string_t("limit")] = ApiClient::parameterToString(*limit);
    }
    if (hasOffers)
    {
        localVarQueryParams[utility::conversions::to_string_t("hasOffers")] = ApiClient::parameterToString(*hasOffers);
    }
    if (categories)
    {
        localVarQueryParams[utility::conversions::to_string_t("categories")] = ApiClient::parameterToString(*categories);
    }
    if (filters)
    {
        localVarQueryParams[utility::conversions::to_string_t("filters")] = ApiClient::parameterToString(*filters);
    }
    if (audiences)
    {
        localVarQueryParams[utility::conversions::to_string_t("audiences")] = ApiClient::parameterToString(*audiences);
    }
    if (retailerIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerIds")] = ApiClient::parameterToString(*retailerIds);
    }
    if (retailerLocationIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerLocationIds")] = ApiClient::parameterToString(*retailerLocationIds);
    }
    if (tags)
    {
        localVarQueryParams[utility::conversions::to_string_t("tags")] = ApiClient::parameterToString(*tags);
    }
    if (locationType)
    {
        localVarQueryParams[utility::conversions::to_string_t("locationType")] = ApiClient::parameterToString(*locationType);
    }
    if (sortField)
    {
        localVarQueryParams[utility::conversions::to_string_t("sortField")] = ApiClient::parameterToString(*sortField);
    }
    if (descending)
    {
        localVarQueryParams[utility::conversions::to_string_t("descending")] = ApiClient::parameterToString(*descending);
    }
    if (q)
    {
        localVarQueryParams[utility::conversions::to_string_t("q")] = ApiClient::parameterToString(*q);
    }
    if (keyword)
    {
        localVarQueryParams[utility::conversions::to_string_t("keyword")] = ApiClient::parameterToString(*keyword);
    }
    if (keywordOperator)
    {
        localVarQueryParams[utility::conversions::to_string_t("keywordOperator")] = ApiClient::parameterToString(*keywordOperator);
    }
    if (searchExpression)
    {
        localVarQueryParams[utility::conversions::to_string_t("searchExpression")] = ApiClient::parameterToString(*searchExpression);
    }
    if (returnRetailer)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnRetailer")] = ApiClient::parameterToString(*returnRetailer);
    }
    if (returnAssets)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnAssets")] = ApiClient::parameterToString(*returnAssets);
    }
    if (returnOffers)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnOffers")] = ApiClient::parameterToString(*returnOffers);
    }
    if (returnCategories)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnCategories")] = ApiClient::parameterToString(*returnCategories);
    }
    if (returnFilters)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnFilters")] = ApiClient::parameterToString(*returnFilters);
    }
    if (returnAudiences)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnAudiences")] = ApiClient::parameterToString(*returnAudiences);
    }
    if (returnQrCode)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnQrCode")] = ApiClient::parameterToString(*returnQrCode);
    }
    if (returnExternalCategoryData)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnExternalCategoryData")] = ApiClient::parameterToString(*returnExternalCategoryData);
    }
    if (includeFavorite)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeFavorite")] = ApiClient::parameterToString(*includeFavorite);
    }
    if (includeLiked)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeLiked")] = ApiClient::parameterToString(*includeLiked);
    }
    if (includeRating)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeRating")] = ApiClient::parameterToString(*includeRating);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("RetailerLocationApi->indexedRetailerLocationSearch does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling indexedRetailerLocationSearch: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling indexedRetailerLocationSearch: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::vector<std::shared_ptr<RetailerLocationResponse>> localVarResult;

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);
            for( auto& localVarItem : localVarJson.as_array() )
            {
                std::shared_ptr<RetailerLocationResponse> localVarItemObj;
                ModelBase::fromJson(localVarItem, localVarItemObj);
                localVarResult.push_back(localVarItemObj);
            }
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling indexedRetailerLocationSearch: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::vector<std::shared_ptr<RetailerLocationResponse>>> RetailerLocationApi::searchRetailerLocations(boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<utility::string_t> q, boost::optional<utility::string_t> keyword, boost::optional<utility::string_t> retailerIds, boost::optional<utility::string_t> retailerLocationIds, boost::optional<utility::string_t> locationType, boost::optional<utility::string_t> sortField, boost::optional<bool> descending, boost::optional<int32_t> i, boost::optional<int32_t> start, boost::optional<int32_t> l, boost::optional<int32_t> limit, boost::optional<bool> showPublicLocations, boost::optional<bool> activeOnly, boost::optional<bool> returnRetailer, boost::optional<bool> returnAssets, boost::optional<bool> returnOffers, boost::optional<bool> returnCategories, boost::optional<bool> returnFilters, boost::optional<bool> returnAudiences, boost::optional<bool> returnQrCode, boost::optional<bool> includeFavorite, boost::optional<bool> includeLiked, boost::optional<bool> includeRating) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/retailer/location/search");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("RetailerLocationApi->searchRetailerLocations does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (q)
    {
        localVarQueryParams[utility::conversions::to_string_t("q")] = ApiClient::parameterToString(*q);
    }
    if (keyword)
    {
        localVarQueryParams[utility::conversions::to_string_t("keyword")] = ApiClient::parameterToString(*keyword);
    }
    if (retailerIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerIds")] = ApiClient::parameterToString(*retailerIds);
    }
    if (retailerLocationIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerLocationIds")] = ApiClient::parameterToString(*retailerLocationIds);
    }
    if (locationType)
    {
        localVarQueryParams[utility::conversions::to_string_t("locationType")] = ApiClient::parameterToString(*locationType);
    }
    if (sortField)
    {
        localVarQueryParams[utility::conversions::to_string_t("sortField")] = ApiClient::parameterToString(*sortField);
    }
    if (descending)
    {
        localVarQueryParams[utility::conversions::to_string_t("descending")] = ApiClient::parameterToString(*descending);
    }
    if (i)
    {
        localVarQueryParams[utility::conversions::to_string_t("_i")] = ApiClient::parameterToString(*i);
    }
    if (start)
    {
        localVarQueryParams[utility::conversions::to_string_t("start")] = ApiClient::parameterToString(*start);
    }
    if (l)
    {
        localVarQueryParams[utility::conversions::to_string_t("_l")] = ApiClient::parameterToString(*l);
    }
    if (limit)
    {
        localVarQueryParams[utility::conversions::to_string_t("limit")] = ApiClient::parameterToString(*limit);
    }
    if (showPublicLocations)
    {
        localVarQueryParams[utility::conversions::to_string_t("showPublicLocations")] = ApiClient::parameterToString(*showPublicLocations);
    }
    if (activeOnly)
    {
        localVarQueryParams[utility::conversions::to_string_t("activeOnly")] = ApiClient::parameterToString(*activeOnly);
    }
    if (returnRetailer)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnRetailer")] = ApiClient::parameterToString(*returnRetailer);
    }
    if (returnAssets)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnAssets")] = ApiClient::parameterToString(*returnAssets);
    }
    if (returnOffers)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnOffers")] = ApiClient::parameterToString(*returnOffers);
    }
    if (returnCategories)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnCategories")] = ApiClient::parameterToString(*returnCategories);
    }
    if (returnFilters)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnFilters")] = ApiClient::parameterToString(*returnFilters);
    }
    if (returnAudiences)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnAudiences")] = ApiClient::parameterToString(*returnAudiences);
    }
    if (returnQrCode)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnQrCode")] = ApiClient::parameterToString(*returnQrCode);
    }
    if (includeFavorite)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeFavorite")] = ApiClient::parameterToString(*includeFavorite);
    }
    if (includeLiked)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeLiked")] = ApiClient::parameterToString(*includeLiked);
    }
    if (includeRating)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeRating")] = ApiClient::parameterToString(*includeRating);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("RetailerLocationApi->searchRetailerLocations does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling searchRetailerLocations: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling searchRetailerLocations: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::vector<std::shared_ptr<RetailerLocationResponse>> localVarResult;

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);
            for( auto& localVarItem : localVarJson.as_array() )
            {
                std::shared_ptr<RetailerLocationResponse> localVarItemObj;
                ModelBase::fromJson(localVarItem, localVarItemObj);
                localVarResult.push_back(localVarItemObj);
            }
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling searchRetailerLocations: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<RetailerLocationResponse>> RetailerLocationApi::updateRetailerLocations(int64_t retailerLocationId, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<utility::string_t> name, boost::optional<utility::string_t> streetAddress, boost::optional<utility::string_t> streetAddress2, boost::optional<utility::string_t> city, boost::optional<utility::string_t> state, boost::optional<utility::string_t> postalCode, boost::optional<utility::string_t> country, boost::optional<utility::string_t> businessPhone, boost::optional<utility::string_t> businessPhoneExt, boost::optional<utility::string_t> website, boost::optional<utility::string_t> email, boost::optional<utility::string_t> internalId, boost::optional<utility::string_t> detailsHeader, boost::optional<utility::string_t> detailsBody, boost::optional<utility::string_t> hours, boost::optional<std::shared_ptr<HttpContent>> logo, boost::optional<int64_t> logoAssetId, boost::optional<std::shared_ptr<HttpContent>> picture1, boost::optional<int64_t> picture1AssetId, boost::optional<std::shared_ptr<HttpContent>> picture2, boost::optional<int64_t> picture2AssetId, boost::optional<utility::string_t> categoryIds, boost::optional<utility::string_t> filterIds, boost::optional<double> latitude, boost::optional<double> longitude, boost::optional<utility::string_t> building, boost::optional<utility::string_t> googlePlaceId, boost::optional<utility::string_t> yelpId, boost::optional<utility::string_t> metaData, boost::optional<utility::string_t> paymentProvider, boost::optional<bool> active, boost::optional<bool> publicLocation, boost::optional<utility::string_t> locationType, boost::optional<utility::string_t> audienceIds, boost::optional<utility::string_t> audienceIdsToAdd, boost::optional<utility::string_t> audienceIdsToRemove, boost::optional<utility::string_t> responseFormat, boost::optional<utility::string_t> tags) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/retailer/location/update");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("RetailerLocationApi->updateRetailerLocations does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("retailerLocationId")] = ApiClient::parameterToString(retailerLocationId);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (name)
    {
        localVarQueryParams[utility::conversions::to_string_t("name")] = ApiClient::parameterToString(*name);
    }
    if (streetAddress)
    {
        localVarQueryParams[utility::conversions::to_string_t("streetAddress")] = ApiClient::parameterToString(*streetAddress);
    }
    if (streetAddress2)
    {
        localVarQueryParams[utility::conversions::to_string_t("streetAddress2")] = ApiClient::parameterToString(*streetAddress2);
    }
    if (city)
    {
        localVarQueryParams[utility::conversions::to_string_t("city")] = ApiClient::parameterToString(*city);
    }
    if (state)
    {
        localVarQueryParams[utility::conversions::to_string_t("state")] = ApiClient::parameterToString(*state);
    }
    if (postalCode)
    {
        localVarQueryParams[utility::conversions::to_string_t("postalCode")] = ApiClient::parameterToString(*postalCode);
    }
    if (country)
    {
        localVarQueryParams[utility::conversions::to_string_t("country")] = ApiClient::parameterToString(*country);
    }
    if (businessPhone)
    {
        localVarQueryParams[utility::conversions::to_string_t("businessPhone")] = ApiClient::parameterToString(*businessPhone);
    }
    if (businessPhoneExt)
    {
        localVarQueryParams[utility::conversions::to_string_t("businessPhoneExt")] = ApiClient::parameterToString(*businessPhoneExt);
    }
    if (website)
    {
        localVarQueryParams[utility::conversions::to_string_t("website")] = ApiClient::parameterToString(*website);
    }
    if (email)
    {
        localVarQueryParams[utility::conversions::to_string_t("email")] = ApiClient::parameterToString(*email);
    }
    if (internalId)
    {
        localVarQueryParams[utility::conversions::to_string_t("internalId")] = ApiClient::parameterToString(*internalId);
    }
    if (detailsHeader)
    {
        localVarQueryParams[utility::conversions::to_string_t("detailsHeader")] = ApiClient::parameterToString(*detailsHeader);
    }
    if (detailsBody)
    {
        localVarQueryParams[utility::conversions::to_string_t("detailsBody")] = ApiClient::parameterToString(*detailsBody);
    }
    if (hours)
    {
        localVarQueryParams[utility::conversions::to_string_t("hours")] = ApiClient::parameterToString(*hours);
    }
    if (logo && *logo != nullptr)
    {
        localVarQueryParams[utility::conversions::to_string_t("logo")] = ApiClient::parameterToString(*logo);
    }
    if (logoAssetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("logoAssetId")] = ApiClient::parameterToString(*logoAssetId);
    }
    if (picture1 && *picture1 != nullptr)
    {
        localVarQueryParams[utility::conversions::to_string_t("picture1")] = ApiClient::parameterToString(*picture1);
    }
    if (picture1AssetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("picture1AssetId")] = ApiClient::parameterToString(*picture1AssetId);
    }
    if (picture2 && *picture2 != nullptr)
    {
        localVarQueryParams[utility::conversions::to_string_t("picture2")] = ApiClient::parameterToString(*picture2);
    }
    if (picture2AssetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("picture2AssetId")] = ApiClient::parameterToString(*picture2AssetId);
    }
    if (categoryIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("categoryIds")] = ApiClient::parameterToString(*categoryIds);
    }
    if (filterIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("filterIds")] = ApiClient::parameterToString(*filterIds);
    }
    if (latitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("latitude")] = ApiClient::parameterToString(*latitude);
    }
    if (longitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("longitude")] = ApiClient::parameterToString(*longitude);
    }
    if (building)
    {
        localVarQueryParams[utility::conversions::to_string_t("building")] = ApiClient::parameterToString(*building);
    }
    if (googlePlaceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("googlePlaceId")] = ApiClient::parameterToString(*googlePlaceId);
    }
    if (yelpId)
    {
        localVarQueryParams[utility::conversions::to_string_t("yelpId")] = ApiClient::parameterToString(*yelpId);
    }
    if (metaData)
    {
        localVarQueryParams[utility::conversions::to_string_t("metaData")] = ApiClient::parameterToString(*metaData);
    }
    if (paymentProvider)
    {
        localVarQueryParams[utility::conversions::to_string_t("paymentProvider")] = ApiClient::parameterToString(*paymentProvider);
    }
    if (active)
    {
        localVarQueryParams[utility::conversions::to_string_t("active")] = ApiClient::parameterToString(*active);
    }
    if (publicLocation)
    {
        localVarQueryParams[utility::conversions::to_string_t("publicLocation")] = ApiClient::parameterToString(*publicLocation);
    }
    if (locationType)
    {
        localVarQueryParams[utility::conversions::to_string_t("locationType")] = ApiClient::parameterToString(*locationType);
    }
    if (audienceIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("audienceIds")] = ApiClient::parameterToString(*audienceIds);
    }
    if (audienceIdsToAdd)
    {
        localVarQueryParams[utility::conversions::to_string_t("audienceIdsToAdd")] = ApiClient::parameterToString(*audienceIdsToAdd);
    }
    if (audienceIdsToRemove)
    {
        localVarQueryParams[utility::conversions::to_string_t("audienceIdsToRemove")] = ApiClient::parameterToString(*audienceIdsToRemove);
    }
    if (responseFormat)
    {
        localVarQueryParams[utility::conversions::to_string_t("responseFormat")] = ApiClient::parameterToString(*responseFormat);
    }
    if (tags)
    {
        localVarQueryParams[utility::conversions::to_string_t("tags")] = ApiClient::parameterToString(*tags);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("RetailerLocationApi->updateRetailerLocations does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling updateRetailerLocations: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling updateRetailerLocations: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<RetailerLocationResponse> localVarResult(new RetailerLocationResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling updateRetailerLocations: unsupported response type"));
        }

        return localVarResult;
    });
}

}
}
}
}

