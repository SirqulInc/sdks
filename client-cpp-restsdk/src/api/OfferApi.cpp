/**
 * Sirqul IoT Platform
 * Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
 *
 * The version of the OpenAPI document: 3.16
 * Contact: info@sirqul.com
 *
 * NOTE: This class is auto generated by OpenAPI-Generator 7.20.0-SNAPSHOT.
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


#include "CppRestOpenAPIClient/api/OfferApi.h"
#include "CppRestOpenAPIClient/IHttpBody.h"
#include "CppRestOpenAPIClient/JsonBody.h"
#include "CppRestOpenAPIClient/MultipartFormData.h"

#include <boost/algorithm/string/replace.hpp>

#include <unordered_set>

namespace org {
namespace openapitools {
namespace client {
namespace api {

using namespace org::openapitools::client::model;

OfferApi::OfferApi( std::shared_ptr<const ApiClient> apiClient )
    : m_ApiClient(apiClient)
{
}

OfferApi::~OfferApi()
{
}

pplx::task<std::shared_ptr<SirqulResponse>> OfferApi::batchUpdateOfferLocations(utility::string_t data, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/retailer/offer/location/batchUpdate");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("OfferApi->batchUpdateOfferLocations does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("data")] = ApiClient::parameterToString(data);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("OfferApi->batchUpdateOfferLocations does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling batchUpdateOfferLocations: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling batchUpdateOfferLocations: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<SirqulResponse> localVarResult(new SirqulResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling batchUpdateOfferLocations: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<RetailerOfferResponse>> OfferApi::createOffer(bool includeOfferLocations, utility::string_t title, utility::string_t barcodeType, bool noExpiration, int32_t availableLimit, int32_t availableLimitPerUser, int32_t addedLimit, int32_t viewLimit, int32_t maxPrints, int64_t ticketPrice, double fullPrice, double discountPrice, utility::string_t offerType, utility::string_t specialOfferType, utility::string_t offerVisibility, bool active, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<utility::string_t> tags, boost::optional<int64_t> parentOfferId, boost::optional<utility::string_t> retailerLocationIds, boost::optional<utility::string_t> offerLocations, boost::optional<utility::string_t> subTitle, boost::optional<utility::string_t> details, boost::optional<utility::string_t> subDetails, boost::optional<utility::string_t> finePrint, boost::optional<utility::string_t> barcodeEntry, boost::optional<utility::string_t> externalRedeemOptions, boost::optional<utility::string_t> externalUrl, boost::optional<utility::string_t> externalId, boost::optional<utility::string_t> ticketsRewardType, boost::optional<int64_t> ticketsReward, boost::optional<int64_t> activated, boost::optional<int64_t> expires, boost::optional<utility::string_t> ticketPriceType, boost::optional<bool> showRemaining, boost::optional<bool> showRedeemed, boost::optional<bool> replaced, boost::optional<bool> featured, boost::optional<utility::string_t> categoryIds, boost::optional<utility::string_t> filterIds, boost::optional<int64_t> barcodeAssetId, boost::optional<int64_t> imageAssetId, boost::optional<int64_t> imageAssetId1, boost::optional<int64_t> imageAssetId2, boost::optional<int64_t> imageAssetId3, boost::optional<int64_t> imageAssetId4, boost::optional<int64_t> imageAssetId5, boost::optional<utility::string_t> publisher, boost::optional<int64_t> redeemableStart, boost::optional<int64_t> redeemableEnd, boost::optional<utility::string_t> brand, boost::optional<utility::string_t> productType, boost::optional<utility::string_t> conditionType, boost::optional<utility::string_t> isbn, boost::optional<utility::string_t> asin, boost::optional<utility::string_t> catalogNumbers, boost::optional<utility::string_t> department, boost::optional<utility::string_t> features, boost::optional<double> minimumPrice, boost::optional<double> width, boost::optional<double> height, boost::optional<double> depth, boost::optional<double> weight, boost::optional<utility::string_t> unit, boost::optional<utility::string_t> studio, boost::optional<utility::string_t> parentalRating, boost::optional<int64_t> publishDate, boost::optional<int64_t> availabilityDate, boost::optional<int64_t> sizeId, boost::optional<int64_t> listingId, boost::optional<utility::string_t> mediaType, boost::optional<int32_t> duration, boost::optional<utility::string_t> author, boost::optional<int64_t> releaseDate, boost::optional<utility::string_t> collectionIds, boost::optional<int32_t> rebootTimeHour, boost::optional<int32_t> rebootTimeMinute, boost::optional<int32_t> idleTimeoutInSecond, boost::optional<utility::string_t> serialNumber, boost::optional<utility::string_t> udid, boost::optional<utility::string_t> deviceType, boost::optional<double> devicePower, boost::optional<double> deviceInterference, boost::optional<utility::string_t> availability, boost::optional<utility::string_t> availabilitySummary) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/retailer/offer/create");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("OfferApi->createOffer does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("includeOfferLocations")] = ApiClient::parameterToString(includeOfferLocations);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("title")] = ApiClient::parameterToString(title);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("barcodeType")] = ApiClient::parameterToString(barcodeType);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("noExpiration")] = ApiClient::parameterToString(noExpiration);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("availableLimit")] = ApiClient::parameterToString(availableLimit);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("availableLimitPerUser")] = ApiClient::parameterToString(availableLimitPerUser);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("addedLimit")] = ApiClient::parameterToString(addedLimit);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("viewLimit")] = ApiClient::parameterToString(viewLimit);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("maxPrints")] = ApiClient::parameterToString(maxPrints);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("ticketPrice")] = ApiClient::parameterToString(ticketPrice);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("fullPrice")] = ApiClient::parameterToString(fullPrice);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("discountPrice")] = ApiClient::parameterToString(discountPrice);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("offerType")] = ApiClient::parameterToString(offerType);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("specialOfferType")] = ApiClient::parameterToString(specialOfferType);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("offerVisibility")] = ApiClient::parameterToString(offerVisibility);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("active")] = ApiClient::parameterToString(active);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (tags)
    {
        localVarQueryParams[utility::conversions::to_string_t("tags")] = ApiClient::parameterToString(*tags);
    }
    if (parentOfferId)
    {
        localVarQueryParams[utility::conversions::to_string_t("parentOfferId")] = ApiClient::parameterToString(*parentOfferId);
    }
    if (retailerLocationIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerLocationIds")] = ApiClient::parameterToString(*retailerLocationIds);
    }
    if (offerLocations)
    {
        localVarQueryParams[utility::conversions::to_string_t("offerLocations")] = ApiClient::parameterToString(*offerLocations);
    }
    if (subTitle)
    {
        localVarQueryParams[utility::conversions::to_string_t("subTitle")] = ApiClient::parameterToString(*subTitle);
    }
    if (details)
    {
        localVarQueryParams[utility::conversions::to_string_t("details")] = ApiClient::parameterToString(*details);
    }
    if (subDetails)
    {
        localVarQueryParams[utility::conversions::to_string_t("subDetails")] = ApiClient::parameterToString(*subDetails);
    }
    if (finePrint)
    {
        localVarQueryParams[utility::conversions::to_string_t("finePrint")] = ApiClient::parameterToString(*finePrint);
    }
    if (barcodeEntry)
    {
        localVarQueryParams[utility::conversions::to_string_t("barcodeEntry")] = ApiClient::parameterToString(*barcodeEntry);
    }
    if (externalRedeemOptions)
    {
        localVarQueryParams[utility::conversions::to_string_t("externalRedeemOptions")] = ApiClient::parameterToString(*externalRedeemOptions);
    }
    if (externalUrl)
    {
        localVarQueryParams[utility::conversions::to_string_t("externalUrl")] = ApiClient::parameterToString(*externalUrl);
    }
    if (externalId)
    {
        localVarQueryParams[utility::conversions::to_string_t("externalId")] = ApiClient::parameterToString(*externalId);
    }
    if (ticketsRewardType)
    {
        localVarQueryParams[utility::conversions::to_string_t("ticketsRewardType")] = ApiClient::parameterToString(*ticketsRewardType);
    }
    if (ticketsReward)
    {
        localVarQueryParams[utility::conversions::to_string_t("ticketsReward")] = ApiClient::parameterToString(*ticketsReward);
    }
    if (activated)
    {
        localVarQueryParams[utility::conversions::to_string_t("activated")] = ApiClient::parameterToString(*activated);
    }
    if (expires)
    {
        localVarQueryParams[utility::conversions::to_string_t("expires")] = ApiClient::parameterToString(*expires);
    }
    if (ticketPriceType)
    {
        localVarQueryParams[utility::conversions::to_string_t("ticketPriceType")] = ApiClient::parameterToString(*ticketPriceType);
    }
    if (showRemaining)
    {
        localVarQueryParams[utility::conversions::to_string_t("showRemaining")] = ApiClient::parameterToString(*showRemaining);
    }
    if (showRedeemed)
    {
        localVarQueryParams[utility::conversions::to_string_t("showRedeemed")] = ApiClient::parameterToString(*showRedeemed);
    }
    if (replaced)
    {
        localVarQueryParams[utility::conversions::to_string_t("replaced")] = ApiClient::parameterToString(*replaced);
    }
    if (featured)
    {
        localVarQueryParams[utility::conversions::to_string_t("featured")] = ApiClient::parameterToString(*featured);
    }
    if (categoryIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("categoryIds")] = ApiClient::parameterToString(*categoryIds);
    }
    if (filterIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("filterIds")] = ApiClient::parameterToString(*filterIds);
    }
    if (barcodeAssetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("barcodeAssetId")] = ApiClient::parameterToString(*barcodeAssetId);
    }
    if (imageAssetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId")] = ApiClient::parameterToString(*imageAssetId);
    }
    if (imageAssetId1)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId1")] = ApiClient::parameterToString(*imageAssetId1);
    }
    if (imageAssetId2)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId2")] = ApiClient::parameterToString(*imageAssetId2);
    }
    if (imageAssetId3)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId3")] = ApiClient::parameterToString(*imageAssetId3);
    }
    if (imageAssetId4)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId4")] = ApiClient::parameterToString(*imageAssetId4);
    }
    if (imageAssetId5)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId5")] = ApiClient::parameterToString(*imageAssetId5);
    }
    if (publisher)
    {
        localVarQueryParams[utility::conversions::to_string_t("publisher")] = ApiClient::parameterToString(*publisher);
    }
    if (redeemableStart)
    {
        localVarQueryParams[utility::conversions::to_string_t("redeemableStart")] = ApiClient::parameterToString(*redeemableStart);
    }
    if (redeemableEnd)
    {
        localVarQueryParams[utility::conversions::to_string_t("redeemableEnd")] = ApiClient::parameterToString(*redeemableEnd);
    }
    if (brand)
    {
        localVarQueryParams[utility::conversions::to_string_t("brand")] = ApiClient::parameterToString(*brand);
    }
    if (productType)
    {
        localVarQueryParams[utility::conversions::to_string_t("productType")] = ApiClient::parameterToString(*productType);
    }
    if (conditionType)
    {
        localVarQueryParams[utility::conversions::to_string_t("conditionType")] = ApiClient::parameterToString(*conditionType);
    }
    if (isbn)
    {
        localVarQueryParams[utility::conversions::to_string_t("isbn")] = ApiClient::parameterToString(*isbn);
    }
    if (asin)
    {
        localVarQueryParams[utility::conversions::to_string_t("asin")] = ApiClient::parameterToString(*asin);
    }
    if (catalogNumbers)
    {
        localVarQueryParams[utility::conversions::to_string_t("catalogNumbers")] = ApiClient::parameterToString(*catalogNumbers);
    }
    if (department)
    {
        localVarQueryParams[utility::conversions::to_string_t("department")] = ApiClient::parameterToString(*department);
    }
    if (features)
    {
        localVarQueryParams[utility::conversions::to_string_t("features")] = ApiClient::parameterToString(*features);
    }
    if (minimumPrice)
    {
        localVarQueryParams[utility::conversions::to_string_t("minimumPrice")] = ApiClient::parameterToString(*minimumPrice);
    }
    if (width)
    {
        localVarQueryParams[utility::conversions::to_string_t("width")] = ApiClient::parameterToString(*width);
    }
    if (height)
    {
        localVarQueryParams[utility::conversions::to_string_t("height")] = ApiClient::parameterToString(*height);
    }
    if (depth)
    {
        localVarQueryParams[utility::conversions::to_string_t("depth")] = ApiClient::parameterToString(*depth);
    }
    if (weight)
    {
        localVarQueryParams[utility::conversions::to_string_t("weight")] = ApiClient::parameterToString(*weight);
    }
    if (unit)
    {
        localVarQueryParams[utility::conversions::to_string_t("unit")] = ApiClient::parameterToString(*unit);
    }
    if (studio)
    {
        localVarQueryParams[utility::conversions::to_string_t("studio")] = ApiClient::parameterToString(*studio);
    }
    if (parentalRating)
    {
        localVarQueryParams[utility::conversions::to_string_t("parentalRating")] = ApiClient::parameterToString(*parentalRating);
    }
    if (publishDate)
    {
        localVarQueryParams[utility::conversions::to_string_t("publishDate")] = ApiClient::parameterToString(*publishDate);
    }
    if (availabilityDate)
    {
        localVarQueryParams[utility::conversions::to_string_t("availabilityDate")] = ApiClient::parameterToString(*availabilityDate);
    }
    if (sizeId)
    {
        localVarQueryParams[utility::conversions::to_string_t("sizeId")] = ApiClient::parameterToString(*sizeId);
    }
    if (listingId)
    {
        localVarQueryParams[utility::conversions::to_string_t("listingId")] = ApiClient::parameterToString(*listingId);
    }
    if (mediaType)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaType")] = ApiClient::parameterToString(*mediaType);
    }
    if (duration)
    {
        localVarQueryParams[utility::conversions::to_string_t("duration")] = ApiClient::parameterToString(*duration);
    }
    if (author)
    {
        localVarQueryParams[utility::conversions::to_string_t("author")] = ApiClient::parameterToString(*author);
    }
    if (releaseDate)
    {
        localVarQueryParams[utility::conversions::to_string_t("releaseDate")] = ApiClient::parameterToString(*releaseDate);
    }
    if (collectionIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("collectionIds")] = ApiClient::parameterToString(*collectionIds);
    }
    if (rebootTimeHour)
    {
        localVarQueryParams[utility::conversions::to_string_t("rebootTimeHour")] = ApiClient::parameterToString(*rebootTimeHour);
    }
    if (rebootTimeMinute)
    {
        localVarQueryParams[utility::conversions::to_string_t("rebootTimeMinute")] = ApiClient::parameterToString(*rebootTimeMinute);
    }
    if (idleTimeoutInSecond)
    {
        localVarQueryParams[utility::conversions::to_string_t("idleTimeoutInSecond")] = ApiClient::parameterToString(*idleTimeoutInSecond);
    }
    if (serialNumber)
    {
        localVarQueryParams[utility::conversions::to_string_t("serialNumber")] = ApiClient::parameterToString(*serialNumber);
    }
    if (udid)
    {
        localVarQueryParams[utility::conversions::to_string_t("udid")] = ApiClient::parameterToString(*udid);
    }
    if (deviceType)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceType")] = ApiClient::parameterToString(*deviceType);
    }
    if (devicePower)
    {
        localVarQueryParams[utility::conversions::to_string_t("devicePower")] = ApiClient::parameterToString(*devicePower);
    }
    if (deviceInterference)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceInterference")] = ApiClient::parameterToString(*deviceInterference);
    }
    if (availability)
    {
        localVarQueryParams[utility::conversions::to_string_t("availability")] = ApiClient::parameterToString(*availability);
    }
    if (availabilitySummary)
    {
        localVarQueryParams[utility::conversions::to_string_t("availabilitySummary")] = ApiClient::parameterToString(*availabilitySummary);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("OfferApi->createOffer does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling createOffer: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling createOffer: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<RetailerOfferResponse> localVarResult(new RetailerOfferResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling createOffer: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<SirqulResponse>> OfferApi::deleteOffer(int64_t offerId, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/retailer/offer/delete");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("OfferApi->deleteOffer does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("offerId")] = ApiClient::parameterToString(offerId);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("OfferApi->deleteOffer does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling deleteOffer: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling deleteOffer: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<SirqulResponse> localVarResult(new SirqulResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling deleteOffer: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<SirqulResponse>> OfferApi::deleteOfferLocation(int64_t offerLocationId, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/retailer/offer/location/delete");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("OfferApi->deleteOfferLocation does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("offerLocationId")] = ApiClient::parameterToString(offerLocationId);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("OfferApi->deleteOfferLocation does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling deleteOfferLocation: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling deleteOfferLocation: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<SirqulResponse> localVarResult(new SirqulResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling deleteOfferLocation: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<RetailerOfferResponse>> OfferApi::getOffer(int64_t offerId, bool includeOfferLocations, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/retailer/offer/get");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("OfferApi->getOffer does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("offerId")] = ApiClient::parameterToString(offerId);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("includeOfferLocations")] = ApiClient::parameterToString(includeOfferLocations);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("OfferApi->getOffer does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling getOffer: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling getOffer: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<RetailerOfferResponse> localVarResult(new RetailerOfferResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling getOffer: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<OfferResponse>> OfferApi::getOfferDetails(boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<int64_t> offerId, boost::optional<int64_t> offerLocationId, boost::optional<double> distance, boost::optional<double> latitude, boost::optional<double> longitude, boost::optional<bool> includeOfferLocations, boost::optional<bool> includeRetailerLocations, boost::optional<bool> includeChildOffers) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/offer/get");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("OfferApi->getOfferDetails does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (offerId)
    {
        localVarQueryParams[utility::conversions::to_string_t("offerId")] = ApiClient::parameterToString(*offerId);
    }
    if (offerLocationId)
    {
        localVarQueryParams[utility::conversions::to_string_t("offerLocationId")] = ApiClient::parameterToString(*offerLocationId);
    }
    if (distance)
    {
        localVarQueryParams[utility::conversions::to_string_t("distance")] = ApiClient::parameterToString(*distance);
    }
    if (latitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("latitude")] = ApiClient::parameterToString(*latitude);
    }
    if (longitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("longitude")] = ApiClient::parameterToString(*longitude);
    }
    if (includeOfferLocations)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeOfferLocations")] = ApiClient::parameterToString(*includeOfferLocations);
    }
    if (includeRetailerLocations)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeRetailerLocations")] = ApiClient::parameterToString(*includeRetailerLocations);
    }
    if (includeChildOffers)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeChildOffers")] = ApiClient::parameterToString(*includeChildOffers);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("OfferApi->getOfferDetails does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling getOfferDetails: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling getOfferDetails: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<OfferResponse> localVarResult(new OfferResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling getOfferDetails: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<ListCountResponse>> OfferApi::getOfferListCounts(double latitude, double longitude, boost::optional<double> searchRange, boost::optional<utility::string_t> distanceUnit) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/offer/lists/count");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("OfferApi->getOfferListCounts does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("latitude")] = ApiClient::parameterToString(latitude);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("longitude")] = ApiClient::parameterToString(longitude);
    }
    if (searchRange)
    {
        localVarQueryParams[utility::conversions::to_string_t("searchRange")] = ApiClient::parameterToString(*searchRange);
    }
    if (distanceUnit)
    {
        localVarQueryParams[utility::conversions::to_string_t("distanceUnit")] = ApiClient::parameterToString(*distanceUnit);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("OfferApi->getOfferListCounts does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling getOfferListCounts: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling getOfferListCounts: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<ListCountResponse> localVarResult(new ListCountResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling getOfferListCounts: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<OfferShortResponse>> OfferApi::getOfferLocation(boost::optional<int64_t> offerLocationId, boost::optional<utility::string_t> udid) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/offer/location/get");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("OfferApi->getOfferLocation does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    if (offerLocationId)
    {
        localVarQueryParams[utility::conversions::to_string_t("offerLocationId")] = ApiClient::parameterToString(*offerLocationId);
    }
    if (udid)
    {
        localVarQueryParams[utility::conversions::to_string_t("udid")] = ApiClient::parameterToString(*udid);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("OfferApi->getOfferLocation does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling getOfferLocation: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling getOfferLocation: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<OfferShortResponse> localVarResult(new OfferShortResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling getOfferLocation: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::vector<std::shared_ptr<OfferShortResponse>>> OfferApi::getOfferLocationsForRetailers(utility::string_t sortField, bool descending, int32_t start, int32_t limit, bool activeOnly, bool includeRetailerLocation, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<utility::string_t> keyword, boost::optional<int64_t> retailerId, boost::optional<int64_t> retailerLocationId, boost::optional<utility::string_t> offerType, boost::optional<utility::string_t> specialOfferType, boost::optional<utility::string_t> barcodeType, boost::optional<utility::string_t> barcodeEntry, boost::optional<utility::string_t> isbn, boost::optional<utility::string_t> asin, boost::optional<utility::string_t> deviceStatus, boost::optional<bool> needsNotificationSent, boost::optional<int64_t> lastNotificationSent) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/retailer/offer/location/search");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("OfferApi->getOfferLocationsForRetailers does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("sortField")] = ApiClient::parameterToString(sortField);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("descending")] = ApiClient::parameterToString(descending);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("start")] = ApiClient::parameterToString(start);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("limit")] = ApiClient::parameterToString(limit);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("activeOnly")] = ApiClient::parameterToString(activeOnly);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("includeRetailerLocation")] = ApiClient::parameterToString(includeRetailerLocation);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (keyword)
    {
        localVarQueryParams[utility::conversions::to_string_t("keyword")] = ApiClient::parameterToString(*keyword);
    }
    if (retailerId)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerId")] = ApiClient::parameterToString(*retailerId);
    }
    if (retailerLocationId)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerLocationId")] = ApiClient::parameterToString(*retailerLocationId);
    }
    if (offerType)
    {
        localVarQueryParams[utility::conversions::to_string_t("offerType")] = ApiClient::parameterToString(*offerType);
    }
    if (specialOfferType)
    {
        localVarQueryParams[utility::conversions::to_string_t("specialOfferType")] = ApiClient::parameterToString(*specialOfferType);
    }
    if (barcodeType)
    {
        localVarQueryParams[utility::conversions::to_string_t("barcodeType")] = ApiClient::parameterToString(*barcodeType);
    }
    if (barcodeEntry)
    {
        localVarQueryParams[utility::conversions::to_string_t("barcodeEntry")] = ApiClient::parameterToString(*barcodeEntry);
    }
    if (isbn)
    {
        localVarQueryParams[utility::conversions::to_string_t("isbn")] = ApiClient::parameterToString(*isbn);
    }
    if (asin)
    {
        localVarQueryParams[utility::conversions::to_string_t("asin")] = ApiClient::parameterToString(*asin);
    }
    if (deviceStatus)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceStatus")] = ApiClient::parameterToString(*deviceStatus);
    }
    if (needsNotificationSent)
    {
        localVarQueryParams[utility::conversions::to_string_t("needsNotificationSent")] = ApiClient::parameterToString(*needsNotificationSent);
    }
    if (lastNotificationSent)
    {
        localVarQueryParams[utility::conversions::to_string_t("lastNotificationSent")] = ApiClient::parameterToString(*lastNotificationSent);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("OfferApi->getOfferLocationsForRetailers does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling getOfferLocationsForRetailers: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling getOfferLocationsForRetailers: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::vector<std::shared_ptr<OfferShortResponse>> localVarResult;

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);
            for( auto& localVarItem : localVarJson.as_array() )
            {
                std::shared_ptr<OfferShortResponse> localVarItemObj;
                ModelBase::fromJson(localVarItem, localVarItemObj);
                localVarResult.push_back(localVarItemObj);
            }
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling getOfferLocationsForRetailers: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::vector<std::shared_ptr<OfferResponse>>> OfferApi::getOffersForRetailers(utility::string_t offerVisibility, utility::string_t sortField, bool descending, int32_t start, int32_t limit, bool availableOnly, bool activeOnly, bool includeCategories, bool includeFilters, bool includeOfferLocations, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<utility::string_t> categoryIds, boost::optional<utility::string_t> filterIds, boost::optional<utility::string_t> q, boost::optional<utility::string_t> keyword, boost::optional<int64_t> retailerId, boost::optional<int64_t> retailerLocationId, boost::optional<utility::string_t> couponType, boost::optional<utility::string_t> offerType, boost::optional<utility::string_t> offerTypes, boost::optional<utility::string_t> specialOfferType, boost::optional<int32_t> i, boost::optional<int32_t> l, boost::optional<utility::string_t> barcodeType, boost::optional<utility::string_t> barcodeEntry, boost::optional<utility::string_t> isbn, boost::optional<utility::string_t> asin, boost::optional<utility::string_t> deviceStatus, boost::optional<bool> needsNotificationSent, boost::optional<int64_t> lastNotificationSent) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/retailer/offer/search");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("OfferApi->getOffersForRetailers does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("offerVisibility")] = ApiClient::parameterToString(offerVisibility);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("sortField")] = ApiClient::parameterToString(sortField);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("descending")] = ApiClient::parameterToString(descending);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("start")] = ApiClient::parameterToString(start);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("limit")] = ApiClient::parameterToString(limit);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("availableOnly")] = ApiClient::parameterToString(availableOnly);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("activeOnly")] = ApiClient::parameterToString(activeOnly);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("includeCategories")] = ApiClient::parameterToString(includeCategories);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("includeFilters")] = ApiClient::parameterToString(includeFilters);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("includeOfferLocations")] = ApiClient::parameterToString(includeOfferLocations);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (categoryIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("categoryIds")] = ApiClient::parameterToString(*categoryIds);
    }
    if (filterIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("filterIds")] = ApiClient::parameterToString(*filterIds);
    }
    if (q)
    {
        localVarQueryParams[utility::conversions::to_string_t("q")] = ApiClient::parameterToString(*q);
    }
    if (keyword)
    {
        localVarQueryParams[utility::conversions::to_string_t("keyword")] = ApiClient::parameterToString(*keyword);
    }
    if (retailerId)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerId")] = ApiClient::parameterToString(*retailerId);
    }
    if (retailerLocationId)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerLocationId")] = ApiClient::parameterToString(*retailerLocationId);
    }
    if (couponType)
    {
        localVarQueryParams[utility::conversions::to_string_t("couponType")] = ApiClient::parameterToString(*couponType);
    }
    if (offerType)
    {
        localVarQueryParams[utility::conversions::to_string_t("offerType")] = ApiClient::parameterToString(*offerType);
    }
    if (offerTypes)
    {
        localVarQueryParams[utility::conversions::to_string_t("offerTypes")] = ApiClient::parameterToString(*offerTypes);
    }
    if (specialOfferType)
    {
        localVarQueryParams[utility::conversions::to_string_t("specialOfferType")] = ApiClient::parameterToString(*specialOfferType);
    }
    if (i)
    {
        localVarQueryParams[utility::conversions::to_string_t("_i")] = ApiClient::parameterToString(*i);
    }
    if (l)
    {
        localVarQueryParams[utility::conversions::to_string_t("_l")] = ApiClient::parameterToString(*l);
    }
    if (barcodeType)
    {
        localVarQueryParams[utility::conversions::to_string_t("barcodeType")] = ApiClient::parameterToString(*barcodeType);
    }
    if (barcodeEntry)
    {
        localVarQueryParams[utility::conversions::to_string_t("barcodeEntry")] = ApiClient::parameterToString(*barcodeEntry);
    }
    if (isbn)
    {
        localVarQueryParams[utility::conversions::to_string_t("isbn")] = ApiClient::parameterToString(*isbn);
    }
    if (asin)
    {
        localVarQueryParams[utility::conversions::to_string_t("asin")] = ApiClient::parameterToString(*asin);
    }
    if (deviceStatus)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceStatus")] = ApiClient::parameterToString(*deviceStatus);
    }
    if (needsNotificationSent)
    {
        localVarQueryParams[utility::conversions::to_string_t("needsNotificationSent")] = ApiClient::parameterToString(*needsNotificationSent);
    }
    if (lastNotificationSent)
    {
        localVarQueryParams[utility::conversions::to_string_t("lastNotificationSent")] = ApiClient::parameterToString(*lastNotificationSent);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("OfferApi->getOffersForRetailers does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling getOffersForRetailers: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling getOffersForRetailers: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::vector<std::shared_ptr<OfferResponse>> localVarResult;

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);
            for( auto& localVarItem : localVarJson.as_array() )
            {
                std::shared_ptr<OfferResponse> localVarItemObj;
                ModelBase::fromJson(localVarItem, localVarItemObj);
                localVarResult.push_back(localVarItemObj);
            }
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling getOffersForRetailers: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<SirqulResponse>> OfferApi::redeemOfferTransaction(int64_t offerTransactionId, int32_t status, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<int64_t> offerLocationId) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/retailer/offer/transaction/update");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("OfferApi->redeemOfferTransaction does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("offerTransactionId")] = ApiClient::parameterToString(offerTransactionId);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("status")] = ApiClient::parameterToString(status);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (offerLocationId)
    {
        localVarQueryParams[utility::conversions::to_string_t("offerLocationId")] = ApiClient::parameterToString(*offerLocationId);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("OfferApi->redeemOfferTransaction does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling redeemOfferTransaction: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling redeemOfferTransaction: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<SirqulResponse> localVarResult(new SirqulResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling redeemOfferTransaction: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::vector<std::shared_ptr<OfferTransactionResponse>>> OfferApi::searchOfferTransactionsForRetailers(utility::string_t sortField, bool descending, int32_t start, int32_t limit, bool activeOnly, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<utility::string_t> q, boost::optional<utility::string_t> keyword, boost::optional<int64_t> retailerId, boost::optional<int64_t> retailerLocationId, boost::optional<int64_t> offerId, boost::optional<int64_t> offerLocationId, boost::optional<bool> redeemed, boost::optional<bool> reservationsOnly, boost::optional<utility::string_t> couponType, boost::optional<utility::string_t> offerType, boost::optional<utility::string_t> specialOfferType, boost::optional<utility::string_t> customerAccountIds, boost::optional<utility::string_t> categoryIds, boost::optional<int64_t> redeemableStartDate, boost::optional<int64_t> redeemableEndDate, boost::optional<int32_t> i, boost::optional<int32_t> l) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/retailer/offer/transaction/search");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("OfferApi->searchOfferTransactionsForRetailers does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("sortField")] = ApiClient::parameterToString(sortField);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("descending")] = ApiClient::parameterToString(descending);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("start")] = ApiClient::parameterToString(start);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("limit")] = ApiClient::parameterToString(limit);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("activeOnly")] = ApiClient::parameterToString(activeOnly);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (q)
    {
        localVarQueryParams[utility::conversions::to_string_t("q")] = ApiClient::parameterToString(*q);
    }
    if (keyword)
    {
        localVarQueryParams[utility::conversions::to_string_t("keyword")] = ApiClient::parameterToString(*keyword);
    }
    if (retailerId)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerId")] = ApiClient::parameterToString(*retailerId);
    }
    if (retailerLocationId)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerLocationId")] = ApiClient::parameterToString(*retailerLocationId);
    }
    if (offerId)
    {
        localVarQueryParams[utility::conversions::to_string_t("offerId")] = ApiClient::parameterToString(*offerId);
    }
    if (offerLocationId)
    {
        localVarQueryParams[utility::conversions::to_string_t("offerLocationId")] = ApiClient::parameterToString(*offerLocationId);
    }
    if (redeemed)
    {
        localVarQueryParams[utility::conversions::to_string_t("redeemed")] = ApiClient::parameterToString(*redeemed);
    }
    if (reservationsOnly)
    {
        localVarQueryParams[utility::conversions::to_string_t("reservationsOnly")] = ApiClient::parameterToString(*reservationsOnly);
    }
    if (couponType)
    {
        localVarQueryParams[utility::conversions::to_string_t("couponType")] = ApiClient::parameterToString(*couponType);
    }
    if (offerType)
    {
        localVarQueryParams[utility::conversions::to_string_t("offerType")] = ApiClient::parameterToString(*offerType);
    }
    if (specialOfferType)
    {
        localVarQueryParams[utility::conversions::to_string_t("specialOfferType")] = ApiClient::parameterToString(*specialOfferType);
    }
    if (customerAccountIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("customerAccountIds")] = ApiClient::parameterToString(*customerAccountIds);
    }
    if (categoryIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("categoryIds")] = ApiClient::parameterToString(*categoryIds);
    }
    if (redeemableStartDate)
    {
        localVarQueryParams[utility::conversions::to_string_t("redeemableStartDate")] = ApiClient::parameterToString(*redeemableStartDate);
    }
    if (redeemableEndDate)
    {
        localVarQueryParams[utility::conversions::to_string_t("redeemableEndDate")] = ApiClient::parameterToString(*redeemableEndDate);
    }
    if (i)
    {
        localVarQueryParams[utility::conversions::to_string_t("_i")] = ApiClient::parameterToString(*i);
    }
    if (l)
    {
        localVarQueryParams[utility::conversions::to_string_t("_l")] = ApiClient::parameterToString(*l);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("OfferApi->searchOfferTransactionsForRetailers does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling searchOfferTransactionsForRetailers: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling searchOfferTransactionsForRetailers: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::vector<std::shared_ptr<OfferTransactionResponse>> localVarResult;

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);
            for( auto& localVarItem : localVarJson.as_array() )
            {
                std::shared_ptr<OfferTransactionResponse> localVarItemObj;
                ModelBase::fromJson(localVarItem, localVarItemObj);
                localVarResult.push_back(localVarItemObj);
            }
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling searchOfferTransactionsForRetailers: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<OfferListResponse>> OfferApi::searchOffersForConsumer(double latitude, double longitude, utility::string_t recommendationType, int64_t locationId, int32_t start, int32_t limit, int32_t maxRecommendations, utility::string_t distanceUnit, boost::optional<utility::string_t> appKey, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<double> searchRange, boost::optional<utility::string_t> tags, boost::optional<utility::string_t> supportedPostalCodes, boost::optional<utility::string_t> keyword, boost::optional<utility::string_t> categories, boost::optional<utility::string_t> filters, boost::optional<utility::string_t> offerTypes, boost::optional<utility::string_t> type, boost::optional<utility::string_t> sortField, boost::optional<utility::string_t> recommendOfferIds, boost::optional<utility::string_t> retailerLocationIds, boost::optional<int64_t> offerId, boost::optional<bool> includeMission, boost::optional<bool> includeCategories, boost::optional<bool> includeFilters, boost::optional<bool> includeExpired, boost::optional<bool> includeFavorite, boost::optional<bool> closestOfferOnly, boost::optional<utility::string_t> searchExpression, boost::optional<utility::string_t> groupBy) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/offer/lists");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("OfferApi->searchOffersForConsumer does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("latitude")] = ApiClient::parameterToString(latitude);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("longitude")] = ApiClient::parameterToString(longitude);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("recommendationType")] = ApiClient::parameterToString(recommendationType);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("locationId")] = ApiClient::parameterToString(locationId);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("start")] = ApiClient::parameterToString(start);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("limit")] = ApiClient::parameterToString(limit);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("maxRecommendations")] = ApiClient::parameterToString(maxRecommendations);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("distanceUnit")] = ApiClient::parameterToString(distanceUnit);
    }
    if (appKey)
    {
        localVarQueryParams[utility::conversions::to_string_t("appKey")] = ApiClient::parameterToString(*appKey);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (searchRange)
    {
        localVarQueryParams[utility::conversions::to_string_t("searchRange")] = ApiClient::parameterToString(*searchRange);
    }
    if (tags)
    {
        localVarQueryParams[utility::conversions::to_string_t("tags")] = ApiClient::parameterToString(*tags);
    }
    if (supportedPostalCodes)
    {
        localVarQueryParams[utility::conversions::to_string_t("supportedPostalCodes")] = ApiClient::parameterToString(*supportedPostalCodes);
    }
    if (keyword)
    {
        localVarQueryParams[utility::conversions::to_string_t("keyword")] = ApiClient::parameterToString(*keyword);
    }
    if (categories)
    {
        localVarQueryParams[utility::conversions::to_string_t("categories")] = ApiClient::parameterToString(*categories);
    }
    if (filters)
    {
        localVarQueryParams[utility::conversions::to_string_t("filters")] = ApiClient::parameterToString(*filters);
    }
    if (offerTypes)
    {
        localVarQueryParams[utility::conversions::to_string_t("offerTypes")] = ApiClient::parameterToString(*offerTypes);
    }
    if (type)
    {
        localVarQueryParams[utility::conversions::to_string_t("type")] = ApiClient::parameterToString(*type);
    }
    if (sortField)
    {
        localVarQueryParams[utility::conversions::to_string_t("sortField")] = ApiClient::parameterToString(*sortField);
    }
    if (recommendOfferIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("recommendOfferIds")] = ApiClient::parameterToString(*recommendOfferIds);
    }
    if (retailerLocationIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerLocationIds")] = ApiClient::parameterToString(*retailerLocationIds);
    }
    if (offerId)
    {
        localVarQueryParams[utility::conversions::to_string_t("offerId")] = ApiClient::parameterToString(*offerId);
    }
    if (includeMission)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeMission")] = ApiClient::parameterToString(*includeMission);
    }
    if (includeCategories)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeCategories")] = ApiClient::parameterToString(*includeCategories);
    }
    if (includeFilters)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeFilters")] = ApiClient::parameterToString(*includeFilters);
    }
    if (includeExpired)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeExpired")] = ApiClient::parameterToString(*includeExpired);
    }
    if (includeFavorite)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeFavorite")] = ApiClient::parameterToString(*includeFavorite);
    }
    if (closestOfferOnly)
    {
        localVarQueryParams[utility::conversions::to_string_t("closestOfferOnly")] = ApiClient::parameterToString(*closestOfferOnly);
    }
    if (searchExpression)
    {
        localVarQueryParams[utility::conversions::to_string_t("searchExpression")] = ApiClient::parameterToString(*searchExpression);
    }
    if (groupBy)
    {
        localVarQueryParams[utility::conversions::to_string_t("groupBy")] = ApiClient::parameterToString(*groupBy);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("OfferApi->searchOffersForConsumer does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling searchOffersForConsumer: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling searchOffersForConsumer: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<OfferListResponse> localVarResult(new OfferListResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling searchOffersForConsumer: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<OfferListResponse>> OfferApi::topOfferTransactions(boost::optional<int32_t> start, boost::optional<int32_t> limit) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/offer/top");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("OfferApi->topOfferTransactions does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    if (start)
    {
        localVarQueryParams[utility::conversions::to_string_t("start")] = ApiClient::parameterToString(*start);
    }
    if (limit)
    {
        localVarQueryParams[utility::conversions::to_string_t("limit")] = ApiClient::parameterToString(*limit);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("OfferApi->topOfferTransactions does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling topOfferTransactions: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling topOfferTransactions: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<OfferListResponse> localVarResult(new OfferListResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling topOfferTransactions: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<RetailerOfferResponse>> OfferApi::updateOffer(int64_t offerId, bool includeOfferLocations, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<int64_t> parentOfferId, boost::optional<utility::string_t> retailerLocationIds, boost::optional<utility::string_t> offerLocations, boost::optional<utility::string_t> tags, boost::optional<utility::string_t> title, boost::optional<utility::string_t> subTitle, boost::optional<utility::string_t> details, boost::optional<utility::string_t> subDetails, boost::optional<utility::string_t> finePrint, boost::optional<utility::string_t> barcodeType, boost::optional<utility::string_t> barcodeEntry, boost::optional<utility::string_t> externalRedeemOptions, boost::optional<utility::string_t> externalUrl, boost::optional<utility::string_t> externalId, boost::optional<utility::string_t> ticketsRewardType, boost::optional<int64_t> ticketsReward, boost::optional<int64_t> activated, boost::optional<int64_t> expires, boost::optional<bool> noExpiration, boost::optional<int32_t> availableLimit, boost::optional<int32_t> availableLimitPerUser, boost::optional<int32_t> addedLimit, boost::optional<int32_t> viewLimit, boost::optional<int32_t> maxPrints, boost::optional<utility::string_t> ticketPriceType, boost::optional<int64_t> ticketPrice, boost::optional<double> fullPrice, boost::optional<double> discountPrice, boost::optional<bool> showRemaining, boost::optional<bool> showRedeemed, boost::optional<bool> replaced, boost::optional<bool> featured, boost::optional<utility::string_t> offerType, boost::optional<utility::string_t> specialOfferType, boost::optional<utility::string_t> offerVisibility, boost::optional<utility::string_t> categoryIds, boost::optional<utility::string_t> filterIds, boost::optional<bool> active, boost::optional<int64_t> barcodeAssetId, boost::optional<int64_t> imageAssetId, boost::optional<int64_t> imageAssetId1, boost::optional<int64_t> imageAssetId2, boost::optional<int64_t> imageAssetId3, boost::optional<int64_t> imageAssetId4, boost::optional<int64_t> imageAssetId5, boost::optional<utility::string_t> publisher, boost::optional<int64_t> redeemableStart, boost::optional<int64_t> redeemableEnd, boost::optional<utility::string_t> brand, boost::optional<utility::string_t> productType, boost::optional<utility::string_t> conditionType, boost::optional<utility::string_t> isbn, boost::optional<utility::string_t> asin, boost::optional<utility::string_t> catalogNumbers, boost::optional<utility::string_t> department, boost::optional<utility::string_t> features, boost::optional<double> minimumPrice, boost::optional<double> width, boost::optional<double> height, boost::optional<double> depth, boost::optional<double> weight, boost::optional<utility::string_t> unit, boost::optional<utility::string_t> studio, boost::optional<utility::string_t> parentalRating, boost::optional<int64_t> publishDate, boost::optional<int64_t> availabilityDate, boost::optional<int64_t> sizeId, boost::optional<int64_t> listingId, boost::optional<utility::string_t> mediaType, boost::optional<int32_t> duration, boost::optional<utility::string_t> author, boost::optional<int64_t> releaseDate, boost::optional<utility::string_t> collectionIds, boost::optional<int32_t> rebootTimeHour, boost::optional<int32_t> rebootTimeMinute, boost::optional<int32_t> idleTimeoutInSecond, boost::optional<utility::string_t> serialNumber, boost::optional<utility::string_t> udid, boost::optional<utility::string_t> deviceType, boost::optional<double> devicePower, boost::optional<double> deviceInterference, boost::optional<utility::string_t> availability, boost::optional<utility::string_t> availabilitySummary) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/retailer/offer/update");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("OfferApi->updateOffer does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("offerId")] = ApiClient::parameterToString(offerId);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("includeOfferLocations")] = ApiClient::parameterToString(includeOfferLocations);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (parentOfferId)
    {
        localVarQueryParams[utility::conversions::to_string_t("parentOfferId")] = ApiClient::parameterToString(*parentOfferId);
    }
    if (retailerLocationIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerLocationIds")] = ApiClient::parameterToString(*retailerLocationIds);
    }
    if (offerLocations)
    {
        localVarQueryParams[utility::conversions::to_string_t("offerLocations")] = ApiClient::parameterToString(*offerLocations);
    }
    if (tags)
    {
        localVarQueryParams[utility::conversions::to_string_t("tags")] = ApiClient::parameterToString(*tags);
    }
    if (title)
    {
        localVarQueryParams[utility::conversions::to_string_t("title")] = ApiClient::parameterToString(*title);
    }
    if (subTitle)
    {
        localVarQueryParams[utility::conversions::to_string_t("subTitle")] = ApiClient::parameterToString(*subTitle);
    }
    if (details)
    {
        localVarQueryParams[utility::conversions::to_string_t("details")] = ApiClient::parameterToString(*details);
    }
    if (subDetails)
    {
        localVarQueryParams[utility::conversions::to_string_t("subDetails")] = ApiClient::parameterToString(*subDetails);
    }
    if (finePrint)
    {
        localVarQueryParams[utility::conversions::to_string_t("finePrint")] = ApiClient::parameterToString(*finePrint);
    }
    if (barcodeType)
    {
        localVarQueryParams[utility::conversions::to_string_t("barcodeType")] = ApiClient::parameterToString(*barcodeType);
    }
    if (barcodeEntry)
    {
        localVarQueryParams[utility::conversions::to_string_t("barcodeEntry")] = ApiClient::parameterToString(*barcodeEntry);
    }
    if (externalRedeemOptions)
    {
        localVarQueryParams[utility::conversions::to_string_t("externalRedeemOptions")] = ApiClient::parameterToString(*externalRedeemOptions);
    }
    if (externalUrl)
    {
        localVarQueryParams[utility::conversions::to_string_t("externalUrl")] = ApiClient::parameterToString(*externalUrl);
    }
    if (externalId)
    {
        localVarQueryParams[utility::conversions::to_string_t("externalId")] = ApiClient::parameterToString(*externalId);
    }
    if (ticketsRewardType)
    {
        localVarQueryParams[utility::conversions::to_string_t("ticketsRewardType")] = ApiClient::parameterToString(*ticketsRewardType);
    }
    if (ticketsReward)
    {
        localVarQueryParams[utility::conversions::to_string_t("ticketsReward")] = ApiClient::parameterToString(*ticketsReward);
    }
    if (activated)
    {
        localVarQueryParams[utility::conversions::to_string_t("activated")] = ApiClient::parameterToString(*activated);
    }
    if (expires)
    {
        localVarQueryParams[utility::conversions::to_string_t("expires")] = ApiClient::parameterToString(*expires);
    }
    if (noExpiration)
    {
        localVarQueryParams[utility::conversions::to_string_t("noExpiration")] = ApiClient::parameterToString(*noExpiration);
    }
    if (availableLimit)
    {
        localVarQueryParams[utility::conversions::to_string_t("availableLimit")] = ApiClient::parameterToString(*availableLimit);
    }
    if (availableLimitPerUser)
    {
        localVarQueryParams[utility::conversions::to_string_t("availableLimitPerUser")] = ApiClient::parameterToString(*availableLimitPerUser);
    }
    if (addedLimit)
    {
        localVarQueryParams[utility::conversions::to_string_t("addedLimit")] = ApiClient::parameterToString(*addedLimit);
    }
    if (viewLimit)
    {
        localVarQueryParams[utility::conversions::to_string_t("viewLimit")] = ApiClient::parameterToString(*viewLimit);
    }
    if (maxPrints)
    {
        localVarQueryParams[utility::conversions::to_string_t("maxPrints")] = ApiClient::parameterToString(*maxPrints);
    }
    if (ticketPriceType)
    {
        localVarQueryParams[utility::conversions::to_string_t("ticketPriceType")] = ApiClient::parameterToString(*ticketPriceType);
    }
    if (ticketPrice)
    {
        localVarQueryParams[utility::conversions::to_string_t("ticketPrice")] = ApiClient::parameterToString(*ticketPrice);
    }
    if (fullPrice)
    {
        localVarQueryParams[utility::conversions::to_string_t("fullPrice")] = ApiClient::parameterToString(*fullPrice);
    }
    if (discountPrice)
    {
        localVarQueryParams[utility::conversions::to_string_t("discountPrice")] = ApiClient::parameterToString(*discountPrice);
    }
    if (showRemaining)
    {
        localVarQueryParams[utility::conversions::to_string_t("showRemaining")] = ApiClient::parameterToString(*showRemaining);
    }
    if (showRedeemed)
    {
        localVarQueryParams[utility::conversions::to_string_t("showRedeemed")] = ApiClient::parameterToString(*showRedeemed);
    }
    if (replaced)
    {
        localVarQueryParams[utility::conversions::to_string_t("replaced")] = ApiClient::parameterToString(*replaced);
    }
    if (featured)
    {
        localVarQueryParams[utility::conversions::to_string_t("featured")] = ApiClient::parameterToString(*featured);
    }
    if (offerType)
    {
        localVarQueryParams[utility::conversions::to_string_t("offerType")] = ApiClient::parameterToString(*offerType);
    }
    if (specialOfferType)
    {
        localVarQueryParams[utility::conversions::to_string_t("specialOfferType")] = ApiClient::parameterToString(*specialOfferType);
    }
    if (offerVisibility)
    {
        localVarQueryParams[utility::conversions::to_string_t("offerVisibility")] = ApiClient::parameterToString(*offerVisibility);
    }
    if (categoryIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("categoryIds")] = ApiClient::parameterToString(*categoryIds);
    }
    if (filterIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("filterIds")] = ApiClient::parameterToString(*filterIds);
    }
    if (active)
    {
        localVarQueryParams[utility::conversions::to_string_t("active")] = ApiClient::parameterToString(*active);
    }
    if (barcodeAssetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("barcodeAssetId")] = ApiClient::parameterToString(*barcodeAssetId);
    }
    if (imageAssetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId")] = ApiClient::parameterToString(*imageAssetId);
    }
    if (imageAssetId1)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId1")] = ApiClient::parameterToString(*imageAssetId1);
    }
    if (imageAssetId2)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId2")] = ApiClient::parameterToString(*imageAssetId2);
    }
    if (imageAssetId3)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId3")] = ApiClient::parameterToString(*imageAssetId3);
    }
    if (imageAssetId4)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId4")] = ApiClient::parameterToString(*imageAssetId4);
    }
    if (imageAssetId5)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId5")] = ApiClient::parameterToString(*imageAssetId5);
    }
    if (publisher)
    {
        localVarQueryParams[utility::conversions::to_string_t("publisher")] = ApiClient::parameterToString(*publisher);
    }
    if (redeemableStart)
    {
        localVarQueryParams[utility::conversions::to_string_t("redeemableStart")] = ApiClient::parameterToString(*redeemableStart);
    }
    if (redeemableEnd)
    {
        localVarQueryParams[utility::conversions::to_string_t("redeemableEnd")] = ApiClient::parameterToString(*redeemableEnd);
    }
    if (brand)
    {
        localVarQueryParams[utility::conversions::to_string_t("brand")] = ApiClient::parameterToString(*brand);
    }
    if (productType)
    {
        localVarQueryParams[utility::conversions::to_string_t("productType")] = ApiClient::parameterToString(*productType);
    }
    if (conditionType)
    {
        localVarQueryParams[utility::conversions::to_string_t("conditionType")] = ApiClient::parameterToString(*conditionType);
    }
    if (isbn)
    {
        localVarQueryParams[utility::conversions::to_string_t("isbn")] = ApiClient::parameterToString(*isbn);
    }
    if (asin)
    {
        localVarQueryParams[utility::conversions::to_string_t("asin")] = ApiClient::parameterToString(*asin);
    }
    if (catalogNumbers)
    {
        localVarQueryParams[utility::conversions::to_string_t("catalogNumbers")] = ApiClient::parameterToString(*catalogNumbers);
    }
    if (department)
    {
        localVarQueryParams[utility::conversions::to_string_t("department")] = ApiClient::parameterToString(*department);
    }
    if (features)
    {
        localVarQueryParams[utility::conversions::to_string_t("features")] = ApiClient::parameterToString(*features);
    }
    if (minimumPrice)
    {
        localVarQueryParams[utility::conversions::to_string_t("minimumPrice")] = ApiClient::parameterToString(*minimumPrice);
    }
    if (width)
    {
        localVarQueryParams[utility::conversions::to_string_t("width")] = ApiClient::parameterToString(*width);
    }
    if (height)
    {
        localVarQueryParams[utility::conversions::to_string_t("height")] = ApiClient::parameterToString(*height);
    }
    if (depth)
    {
        localVarQueryParams[utility::conversions::to_string_t("depth")] = ApiClient::parameterToString(*depth);
    }
    if (weight)
    {
        localVarQueryParams[utility::conversions::to_string_t("weight")] = ApiClient::parameterToString(*weight);
    }
    if (unit)
    {
        localVarQueryParams[utility::conversions::to_string_t("unit")] = ApiClient::parameterToString(*unit);
    }
    if (studio)
    {
        localVarQueryParams[utility::conversions::to_string_t("studio")] = ApiClient::parameterToString(*studio);
    }
    if (parentalRating)
    {
        localVarQueryParams[utility::conversions::to_string_t("parentalRating")] = ApiClient::parameterToString(*parentalRating);
    }
    if (publishDate)
    {
        localVarQueryParams[utility::conversions::to_string_t("publishDate")] = ApiClient::parameterToString(*publishDate);
    }
    if (availabilityDate)
    {
        localVarQueryParams[utility::conversions::to_string_t("availabilityDate")] = ApiClient::parameterToString(*availabilityDate);
    }
    if (sizeId)
    {
        localVarQueryParams[utility::conversions::to_string_t("sizeId")] = ApiClient::parameterToString(*sizeId);
    }
    if (listingId)
    {
        localVarQueryParams[utility::conversions::to_string_t("listingId")] = ApiClient::parameterToString(*listingId);
    }
    if (mediaType)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaType")] = ApiClient::parameterToString(*mediaType);
    }
    if (duration)
    {
        localVarQueryParams[utility::conversions::to_string_t("duration")] = ApiClient::parameterToString(*duration);
    }
    if (author)
    {
        localVarQueryParams[utility::conversions::to_string_t("author")] = ApiClient::parameterToString(*author);
    }
    if (releaseDate)
    {
        localVarQueryParams[utility::conversions::to_string_t("releaseDate")] = ApiClient::parameterToString(*releaseDate);
    }
    if (collectionIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("collectionIds")] = ApiClient::parameterToString(*collectionIds);
    }
    if (rebootTimeHour)
    {
        localVarQueryParams[utility::conversions::to_string_t("rebootTimeHour")] = ApiClient::parameterToString(*rebootTimeHour);
    }
    if (rebootTimeMinute)
    {
        localVarQueryParams[utility::conversions::to_string_t("rebootTimeMinute")] = ApiClient::parameterToString(*rebootTimeMinute);
    }
    if (idleTimeoutInSecond)
    {
        localVarQueryParams[utility::conversions::to_string_t("idleTimeoutInSecond")] = ApiClient::parameterToString(*idleTimeoutInSecond);
    }
    if (serialNumber)
    {
        localVarQueryParams[utility::conversions::to_string_t("serialNumber")] = ApiClient::parameterToString(*serialNumber);
    }
    if (udid)
    {
        localVarQueryParams[utility::conversions::to_string_t("udid")] = ApiClient::parameterToString(*udid);
    }
    if (deviceType)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceType")] = ApiClient::parameterToString(*deviceType);
    }
    if (devicePower)
    {
        localVarQueryParams[utility::conversions::to_string_t("devicePower")] = ApiClient::parameterToString(*devicePower);
    }
    if (deviceInterference)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceInterference")] = ApiClient::parameterToString(*deviceInterference);
    }
    if (availability)
    {
        localVarQueryParams[utility::conversions::to_string_t("availability")] = ApiClient::parameterToString(*availability);
    }
    if (availabilitySummary)
    {
        localVarQueryParams[utility::conversions::to_string_t("availabilitySummary")] = ApiClient::parameterToString(*availabilitySummary);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("OfferApi->updateOffer does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling updateOffer: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling updateOffer: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<RetailerOfferResponse> localVarResult(new RetailerOfferResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling updateOffer: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<SirqulResponse>> OfferApi::updateOfferStatus(utility::string_t offerIds, bool active, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/retailer/offer/status");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("OfferApi->updateOfferStatus does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("offerIds")] = ApiClient::parameterToString(offerIds);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("active")] = ApiClient::parameterToString(active);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("OfferApi->updateOfferStatus does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling updateOfferStatus: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling updateOfferStatus: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<SirqulResponse> localVarResult(new SirqulResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling updateOfferStatus: unsupported response type"));
        }

        return localVarResult;
    });
}

}
}
}
}

