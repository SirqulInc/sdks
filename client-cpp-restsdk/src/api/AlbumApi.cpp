/**
 * Sirqul IoT Platform
 * Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
 *
 * The version of the OpenAPI document: 3.16
 * Contact: info@sirqul.com
 *
 * NOTE: This class is auto generated by OpenAPI-Generator 7.20.0-SNAPSHOT.
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


#include "CppRestOpenAPIClient/api/AlbumApi.h"
#include "CppRestOpenAPIClient/IHttpBody.h"
#include "CppRestOpenAPIClient/JsonBody.h"
#include "CppRestOpenAPIClient/MultipartFormData.h"

#include <boost/algorithm/string/replace.hpp>

#include <unordered_set>

namespace org {
namespace openapitools {
namespace client {
namespace api {

using namespace org::openapitools::client::model;

AlbumApi::AlbumApi( std::shared_ptr<const ApiClient> apiClient )
    : m_ApiClient(apiClient)
{
}

AlbumApi::~AlbumApi()
{
}

pplx::task<std::shared_ptr<SearchResponse>> AlbumApi::addAlbumCollection(double version, utility::string_t title, bool coverAssetNullable, bool includeCoverInAssetList, bool publicRead, bool publicWrite, bool publicDelete, bool publicAdd, bool anonymous, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<utility::string_t> assetsToAdd, boost::optional<std::shared_ptr<HttpContent>> media, boost::optional<utility::string_t> mediaURL, boost::optional<int64_t> assetId, boost::optional<std::shared_ptr<HttpContent>> attachedMedia, boost::optional<utility::string_t> attachedMediaURL, boost::optional<int64_t> startDate, boost::optional<int64_t> endDate, boost::optional<utility::string_t> tags, boost::optional<utility::string_t> description, boost::optional<utility::string_t> albumType, boost::optional<int64_t> albumTypeId, boost::optional<utility::string_t> subType, boost::optional<double> latitude, boost::optional<double> longitude, boost::optional<utility::string_t> locationDescription, boost::optional<utility::string_t> visibility, boost::optional<utility::string_t> gameType, boost::optional<utility::string_t> appKey, boost::optional<utility::string_t> cellPhone, boost::optional<utility::string_t> streetAddress, boost::optional<utility::string_t> streetAddress2, boost::optional<utility::string_t> city, boost::optional<utility::string_t> state, boost::optional<utility::string_t> postalCode, boost::optional<utility::string_t> fullAddress, boost::optional<utility::string_t> metaData, boost::optional<utility::string_t> categoryIds, boost::optional<utility::string_t> categoryFilterIds, boost::optional<utility::string_t> audienceIds, boost::optional<bool> includeAllAppUsersAsMembers, boost::optional<bool> includeAudiencesAsMembers, boost::optional<utility::string_t> audienceOperator, boost::optional<utility::string_t> approvalStatus, boost::optional<utility::string_t> linkedObjectType, boost::optional<int64_t> linkedObjectId) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/api/{version}/album/create");
    boost::replace_all(localVarPath, utility::conversions::to_string_t("{") + utility::conversions::to_string_t("version") + utility::conversions::to_string_t("}"), web::uri::encode_uri(ApiClient::parameterToString(version)));

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("AlbumApi->addAlbumCollection does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("title")] = ApiClient::parameterToString(title);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("coverAssetNullable")] = ApiClient::parameterToString(coverAssetNullable);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("includeCoverInAssetList")] = ApiClient::parameterToString(includeCoverInAssetList);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("publicRead")] = ApiClient::parameterToString(publicRead);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("publicWrite")] = ApiClient::parameterToString(publicWrite);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("publicDelete")] = ApiClient::parameterToString(publicDelete);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("publicAdd")] = ApiClient::parameterToString(publicAdd);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("anonymous")] = ApiClient::parameterToString(anonymous);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (assetsToAdd)
    {
        localVarQueryParams[utility::conversions::to_string_t("assetsToAdd")] = ApiClient::parameterToString(*assetsToAdd);
    }
    if (media && *media != nullptr)
    {
        localVarQueryParams[utility::conversions::to_string_t("media")] = ApiClient::parameterToString(*media);
    }
    if (mediaURL)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaURL")] = ApiClient::parameterToString(*mediaURL);
    }
    if (assetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("assetId")] = ApiClient::parameterToString(*assetId);
    }
    if (attachedMedia && *attachedMedia != nullptr)
    {
        localVarQueryParams[utility::conversions::to_string_t("attachedMedia")] = ApiClient::parameterToString(*attachedMedia);
    }
    if (attachedMediaURL)
    {
        localVarQueryParams[utility::conversions::to_string_t("attachedMediaURL")] = ApiClient::parameterToString(*attachedMediaURL);
    }
    if (startDate)
    {
        localVarQueryParams[utility::conversions::to_string_t("startDate")] = ApiClient::parameterToString(*startDate);
    }
    if (endDate)
    {
        localVarQueryParams[utility::conversions::to_string_t("endDate")] = ApiClient::parameterToString(*endDate);
    }
    if (tags)
    {
        localVarQueryParams[utility::conversions::to_string_t("tags")] = ApiClient::parameterToString(*tags);
    }
    if (description)
    {
        localVarQueryParams[utility::conversions::to_string_t("description")] = ApiClient::parameterToString(*description);
    }
    if (albumType)
    {
        localVarQueryParams[utility::conversions::to_string_t("albumType")] = ApiClient::parameterToString(*albumType);
    }
    if (albumTypeId)
    {
        localVarQueryParams[utility::conversions::to_string_t("albumTypeId")] = ApiClient::parameterToString(*albumTypeId);
    }
    if (subType)
    {
        localVarQueryParams[utility::conversions::to_string_t("subType")] = ApiClient::parameterToString(*subType);
    }
    if (latitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("latitude")] = ApiClient::parameterToString(*latitude);
    }
    if (longitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("longitude")] = ApiClient::parameterToString(*longitude);
    }
    if (locationDescription)
    {
        localVarQueryParams[utility::conversions::to_string_t("locationDescription")] = ApiClient::parameterToString(*locationDescription);
    }
    if (visibility)
    {
        localVarQueryParams[utility::conversions::to_string_t("visibility")] = ApiClient::parameterToString(*visibility);
    }
    if (gameType)
    {
        localVarQueryParams[utility::conversions::to_string_t("gameType")] = ApiClient::parameterToString(*gameType);
    }
    if (appKey)
    {
        localVarQueryParams[utility::conversions::to_string_t("appKey")] = ApiClient::parameterToString(*appKey);
    }
    if (cellPhone)
    {
        localVarQueryParams[utility::conversions::to_string_t("cellPhone")] = ApiClient::parameterToString(*cellPhone);
    }
    if (streetAddress)
    {
        localVarQueryParams[utility::conversions::to_string_t("streetAddress")] = ApiClient::parameterToString(*streetAddress);
    }
    if (streetAddress2)
    {
        localVarQueryParams[utility::conversions::to_string_t("streetAddress2")] = ApiClient::parameterToString(*streetAddress2);
    }
    if (city)
    {
        localVarQueryParams[utility::conversions::to_string_t("city")] = ApiClient::parameterToString(*city);
    }
    if (state)
    {
        localVarQueryParams[utility::conversions::to_string_t("state")] = ApiClient::parameterToString(*state);
    }
    if (postalCode)
    {
        localVarQueryParams[utility::conversions::to_string_t("postalCode")] = ApiClient::parameterToString(*postalCode);
    }
    if (fullAddress)
    {
        localVarQueryParams[utility::conversions::to_string_t("fullAddress")] = ApiClient::parameterToString(*fullAddress);
    }
    if (metaData)
    {
        localVarQueryParams[utility::conversions::to_string_t("metaData")] = ApiClient::parameterToString(*metaData);
    }
    if (categoryIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("categoryIds")] = ApiClient::parameterToString(*categoryIds);
    }
    if (categoryFilterIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("categoryFilterIds")] = ApiClient::parameterToString(*categoryFilterIds);
    }
    if (audienceIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("audienceIds")] = ApiClient::parameterToString(*audienceIds);
    }
    if (includeAllAppUsersAsMembers)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeAllAppUsersAsMembers")] = ApiClient::parameterToString(*includeAllAppUsersAsMembers);
    }
    if (includeAudiencesAsMembers)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeAudiencesAsMembers")] = ApiClient::parameterToString(*includeAudiencesAsMembers);
    }
    if (audienceOperator)
    {
        localVarQueryParams[utility::conversions::to_string_t("audienceOperator")] = ApiClient::parameterToString(*audienceOperator);
    }
    if (approvalStatus)
    {
        localVarQueryParams[utility::conversions::to_string_t("approvalStatus")] = ApiClient::parameterToString(*approvalStatus);
    }
    if (linkedObjectType)
    {
        localVarQueryParams[utility::conversions::to_string_t("linkedObjectType")] = ApiClient::parameterToString(*linkedObjectType);
    }
    if (linkedObjectId)
    {
        localVarQueryParams[utility::conversions::to_string_t("linkedObjectId")] = ApiClient::parameterToString(*linkedObjectId);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("AlbumApi->addAlbumCollection does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling addAlbumCollection: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling addAlbumCollection: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<SearchResponse> localVarResult(new SearchResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling addAlbumCollection: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<SirqulResponse>> AlbumApi::addAlbumUsers(double version, int64_t albumId, bool includeFriendGroup, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<bool> read, boost::optional<bool> write, boost::optional<bool> r_delete, boost::optional<bool> add, boost::optional<utility::string_t> connections, boost::optional<utility::string_t> connectionGroups) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/api/{version}/album/user/add");
    boost::replace_all(localVarPath, utility::conversions::to_string_t("{") + utility::conversions::to_string_t("version") + utility::conversions::to_string_t("}"), web::uri::encode_uri(ApiClient::parameterToString(version)));

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("AlbumApi->addAlbumUsers does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("albumId")] = ApiClient::parameterToString(albumId);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("includeFriendGroup")] = ApiClient::parameterToString(includeFriendGroup);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (read)
    {
        localVarQueryParams[utility::conversions::to_string_t("read")] = ApiClient::parameterToString(*read);
    }
    if (write)
    {
        localVarQueryParams[utility::conversions::to_string_t("write")] = ApiClient::parameterToString(*write);
    }
    if (r_delete)
    {
        localVarQueryParams[utility::conversions::to_string_t("delete")] = ApiClient::parameterToString(*r_delete);
    }
    if (add)
    {
        localVarQueryParams[utility::conversions::to_string_t("add")] = ApiClient::parameterToString(*add);
    }
    if (connections)
    {
        localVarQueryParams[utility::conversions::to_string_t("connections")] = ApiClient::parameterToString(*connections);
    }
    if (connectionGroups)
    {
        localVarQueryParams[utility::conversions::to_string_t("connectionGroups")] = ApiClient::parameterToString(*connectionGroups);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("AlbumApi->addAlbumUsers does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling addAlbumUsers: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling addAlbumUsers: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<SirqulResponse> localVarResult(new SirqulResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling addAlbumUsers: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<SirqulResponse>> AlbumApi::approveAlbum(double version, int64_t albumId, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<utility::string_t> approvalStatus, boost::optional<bool> verified) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/api/{version}/album/approve");
    boost::replace_all(localVarPath, utility::conversions::to_string_t("{") + utility::conversions::to_string_t("version") + utility::conversions::to_string_t("}"), web::uri::encode_uri(ApiClient::parameterToString(version)));

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("AlbumApi->approveAlbum does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("albumId")] = ApiClient::parameterToString(albumId);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (approvalStatus)
    {
        localVarQueryParams[utility::conversions::to_string_t("approvalStatus")] = ApiClient::parameterToString(*approvalStatus);
    }
    if (verified)
    {
        localVarQueryParams[utility::conversions::to_string_t("verified")] = ApiClient::parameterToString(*verified);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("AlbumApi->approveAlbum does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling approveAlbum: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling approveAlbum: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<SirqulResponse> localVarResult(new SirqulResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling approveAlbum: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<AlbumFullResponse>> AlbumApi::getAlbumCollection(double version, bool returnNulls, int64_t albumId, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<int32_t> likePreviewSize, boost::optional<int32_t> assetPreviewSize, boost::optional<int32_t> notePreviewSize, boost::optional<int32_t> connectionPreviewSize, boost::optional<int32_t> audiencePreviewSize) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/api/{version}/album/get");
    boost::replace_all(localVarPath, utility::conversions::to_string_t("{") + utility::conversions::to_string_t("version") + utility::conversions::to_string_t("}"), web::uri::encode_uri(ApiClient::parameterToString(version)));

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("AlbumApi->getAlbumCollection does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("returnNulls")] = ApiClient::parameterToString(returnNulls);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("albumId")] = ApiClient::parameterToString(albumId);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (likePreviewSize)
    {
        localVarQueryParams[utility::conversions::to_string_t("likePreviewSize")] = ApiClient::parameterToString(*likePreviewSize);
    }
    if (assetPreviewSize)
    {
        localVarQueryParams[utility::conversions::to_string_t("assetPreviewSize")] = ApiClient::parameterToString(*assetPreviewSize);
    }
    if (notePreviewSize)
    {
        localVarQueryParams[utility::conversions::to_string_t("notePreviewSize")] = ApiClient::parameterToString(*notePreviewSize);
    }
    if (connectionPreviewSize)
    {
        localVarQueryParams[utility::conversions::to_string_t("connectionPreviewSize")] = ApiClient::parameterToString(*connectionPreviewSize);
    }
    if (audiencePreviewSize)
    {
        localVarQueryParams[utility::conversions::to_string_t("audiencePreviewSize")] = ApiClient::parameterToString(*audiencePreviewSize);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("AlbumApi->getAlbumCollection does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling getAlbumCollection: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling getAlbumCollection: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<AlbumFullResponse> localVarResult(new AlbumFullResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling getAlbumCollection: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<SirqulResponse>> AlbumApi::leaveAlbum(double version, int64_t albumId, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/api/{version}/album/user/leave");
    boost::replace_all(localVarPath, utility::conversions::to_string_t("{") + utility::conversions::to_string_t("version") + utility::conversions::to_string_t("}"), web::uri::encode_uri(ApiClient::parameterToString(version)));

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("AlbumApi->leaveAlbum does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("albumId")] = ApiClient::parameterToString(albumId);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("AlbumApi->leaveAlbum does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling leaveAlbum: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling leaveAlbum: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<SirqulResponse> localVarResult(new SirqulResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling leaveAlbum: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<SirqulResponse>> AlbumApi::removeAlbum(double version, int64_t albumId, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/api/{version}/album/delete");
    boost::replace_all(localVarPath, utility::conversions::to_string_t("{") + utility::conversions::to_string_t("version") + utility::conversions::to_string_t("}"), web::uri::encode_uri(ApiClient::parameterToString(version)));

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("AlbumApi->removeAlbum does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("albumId")] = ApiClient::parameterToString(albumId);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("AlbumApi->removeAlbum does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling removeAlbum: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling removeAlbum: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<SirqulResponse> localVarResult(new SirqulResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling removeAlbum: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<SirqulResponse>> AlbumApi::removeAlbumUsers(double version, int64_t albumId, bool removeFriendGroup, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<utility::string_t> connections, boost::optional<utility::string_t> connectionGroups) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/api/{version}/album/user/delete");
    boost::replace_all(localVarPath, utility::conversions::to_string_t("{") + utility::conversions::to_string_t("version") + utility::conversions::to_string_t("}"), web::uri::encode_uri(ApiClient::parameterToString(version)));

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("AlbumApi->removeAlbumUsers does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("albumId")] = ApiClient::parameterToString(albumId);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("removeFriendGroup")] = ApiClient::parameterToString(removeFriendGroup);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (connections)
    {
        localVarQueryParams[utility::conversions::to_string_t("connections")] = ApiClient::parameterToString(*connections);
    }
    if (connectionGroups)
    {
        localVarQueryParams[utility::conversions::to_string_t("connectionGroups")] = ApiClient::parameterToString(*connectionGroups);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("AlbumApi->removeAlbumUsers does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling removeAlbumUsers: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling removeAlbumUsers: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<SirqulResponse> localVarResult(new SirqulResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling removeAlbumUsers: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::vector<std::shared_ptr<AlbumFullResponse>>> AlbumApi::searchAlbums(double version, utility::string_t filter, int64_t albumTypeId, utility::string_t subType, bool includeInactive, utility::string_t sortField, bool descending, int32_t start, int32_t limit, double range, bool includeLiked, bool includeFavorited, bool includePermissions, int32_t likePreviewSize, int32_t assetPreviewSize, int32_t notePreviewSize, int32_t connectionPreviewSize, int32_t audiencePreviewSize, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<int64_t> connectionAccountId, boost::optional<int64_t> ownerId, boost::optional<utility::string_t> albumIds, boost::optional<utility::string_t> excludeAlbumIds, boost::optional<int64_t> mediaId, boost::optional<utility::string_t> keyword, boost::optional<utility::string_t> albumType, boost::optional<int32_t> limitPerAlbumType, boost::optional<int64_t> dateCreated, boost::optional<int64_t> updatedSince, boost::optional<int64_t> updatedBefore, boost::optional<int64_t> createdSince, boost::optional<int64_t> createdBefore, boost::optional<int64_t> startedSince, boost::optional<int64_t> startedBefore, boost::optional<int64_t> endedSince, boost::optional<int64_t> endedBefore, boost::optional<double> latitude, boost::optional<double> longitude, boost::optional<utility::string_t> appKey, boost::optional<utility::string_t> categoryIds, boost::optional<utility::string_t> categoryFilterIds, boost::optional<utility::string_t> audienceIds, boost::optional<utility::string_t> excludeAudienceIds, boost::optional<bool> includeCompletable, boost::optional<bool> includeRating, boost::optional<utility::string_t> searchMode, boost::optional<bool> stackSearch, boost::optional<int32_t> stackWindowSize, boost::optional<int32_t> minStackPerPage, boost::optional<utility::string_t> stackPaginationIdentifier, boost::optional<bool> stackDetails, boost::optional<int64_t> flagCountMinimum, boost::optional<bool> removeFlaggedContent, boost::optional<bool> verifiedFilter, boost::optional<utility::string_t> linkedObjectType, boost::optional<int64_t> linkedObjectId, boost::optional<int64_t> orderAudienceId, boost::optional<bool> ignoreDefaultAppFilter, boost::optional<utility::string_t> searchExpression, boost::optional<bool> generateAlbums) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/api/{version}/album/search");
    boost::replace_all(localVarPath, utility::conversions::to_string_t("{") + utility::conversions::to_string_t("version") + utility::conversions::to_string_t("}"), web::uri::encode_uri(ApiClient::parameterToString(version)));

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("AlbumApi->searchAlbums does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("filter")] = ApiClient::parameterToString(filter);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("albumTypeId")] = ApiClient::parameterToString(albumTypeId);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("subType")] = ApiClient::parameterToString(subType);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("includeInactive")] = ApiClient::parameterToString(includeInactive);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("sortField")] = ApiClient::parameterToString(sortField);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("descending")] = ApiClient::parameterToString(descending);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("start")] = ApiClient::parameterToString(start);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("limit")] = ApiClient::parameterToString(limit);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("range")] = ApiClient::parameterToString(range);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("includeLiked")] = ApiClient::parameterToString(includeLiked);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("includeFavorited")] = ApiClient::parameterToString(includeFavorited);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("includePermissions")] = ApiClient::parameterToString(includePermissions);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("likePreviewSize")] = ApiClient::parameterToString(likePreviewSize);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("assetPreviewSize")] = ApiClient::parameterToString(assetPreviewSize);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("notePreviewSize")] = ApiClient::parameterToString(notePreviewSize);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("connectionPreviewSize")] = ApiClient::parameterToString(connectionPreviewSize);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("audiencePreviewSize")] = ApiClient::parameterToString(audiencePreviewSize);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (connectionAccountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("connectionAccountId")] = ApiClient::parameterToString(*connectionAccountId);
    }
    if (ownerId)
    {
        localVarQueryParams[utility::conversions::to_string_t("ownerId")] = ApiClient::parameterToString(*ownerId);
    }
    if (albumIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("albumIds")] = ApiClient::parameterToString(*albumIds);
    }
    if (excludeAlbumIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("excludeAlbumIds")] = ApiClient::parameterToString(*excludeAlbumIds);
    }
    if (mediaId)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaId")] = ApiClient::parameterToString(*mediaId);
    }
    if (keyword)
    {
        localVarQueryParams[utility::conversions::to_string_t("keyword")] = ApiClient::parameterToString(*keyword);
    }
    if (albumType)
    {
        localVarQueryParams[utility::conversions::to_string_t("albumType")] = ApiClient::parameterToString(*albumType);
    }
    if (limitPerAlbumType)
    {
        localVarQueryParams[utility::conversions::to_string_t("limitPerAlbumType")] = ApiClient::parameterToString(*limitPerAlbumType);
    }
    if (dateCreated)
    {
        localVarQueryParams[utility::conversions::to_string_t("dateCreated")] = ApiClient::parameterToString(*dateCreated);
    }
    if (updatedSince)
    {
        localVarQueryParams[utility::conversions::to_string_t("updatedSince")] = ApiClient::parameterToString(*updatedSince);
    }
    if (updatedBefore)
    {
        localVarQueryParams[utility::conversions::to_string_t("updatedBefore")] = ApiClient::parameterToString(*updatedBefore);
    }
    if (createdSince)
    {
        localVarQueryParams[utility::conversions::to_string_t("createdSince")] = ApiClient::parameterToString(*createdSince);
    }
    if (createdBefore)
    {
        localVarQueryParams[utility::conversions::to_string_t("createdBefore")] = ApiClient::parameterToString(*createdBefore);
    }
    if (startedSince)
    {
        localVarQueryParams[utility::conversions::to_string_t("startedSince")] = ApiClient::parameterToString(*startedSince);
    }
    if (startedBefore)
    {
        localVarQueryParams[utility::conversions::to_string_t("startedBefore")] = ApiClient::parameterToString(*startedBefore);
    }
    if (endedSince)
    {
        localVarQueryParams[utility::conversions::to_string_t("endedSince")] = ApiClient::parameterToString(*endedSince);
    }
    if (endedBefore)
    {
        localVarQueryParams[utility::conversions::to_string_t("endedBefore")] = ApiClient::parameterToString(*endedBefore);
    }
    if (latitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("latitude")] = ApiClient::parameterToString(*latitude);
    }
    if (longitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("longitude")] = ApiClient::parameterToString(*longitude);
    }
    if (appKey)
    {
        localVarQueryParams[utility::conversions::to_string_t("appKey")] = ApiClient::parameterToString(*appKey);
    }
    if (categoryIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("categoryIds")] = ApiClient::parameterToString(*categoryIds);
    }
    if (categoryFilterIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("categoryFilterIds")] = ApiClient::parameterToString(*categoryFilterIds);
    }
    if (audienceIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("audienceIds")] = ApiClient::parameterToString(*audienceIds);
    }
    if (excludeAudienceIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("excludeAudienceIds")] = ApiClient::parameterToString(*excludeAudienceIds);
    }
    if (includeCompletable)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeCompletable")] = ApiClient::parameterToString(*includeCompletable);
    }
    if (includeRating)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeRating")] = ApiClient::parameterToString(*includeRating);
    }
    if (searchMode)
    {
        localVarQueryParams[utility::conversions::to_string_t("searchMode")] = ApiClient::parameterToString(*searchMode);
    }
    if (stackSearch)
    {
        localVarQueryParams[utility::conversions::to_string_t("stackSearch")] = ApiClient::parameterToString(*stackSearch);
    }
    if (stackWindowSize)
    {
        localVarQueryParams[utility::conversions::to_string_t("stackWindowSize")] = ApiClient::parameterToString(*stackWindowSize);
    }
    if (minStackPerPage)
    {
        localVarQueryParams[utility::conversions::to_string_t("minStackPerPage")] = ApiClient::parameterToString(*minStackPerPage);
    }
    if (stackPaginationIdentifier)
    {
        localVarQueryParams[utility::conversions::to_string_t("stackPaginationIdentifier")] = ApiClient::parameterToString(*stackPaginationIdentifier);
    }
    if (stackDetails)
    {
        localVarQueryParams[utility::conversions::to_string_t("stackDetails")] = ApiClient::parameterToString(*stackDetails);
    }
    if (flagCountMinimum)
    {
        localVarQueryParams[utility::conversions::to_string_t("flagCountMinimum")] = ApiClient::parameterToString(*flagCountMinimum);
    }
    if (removeFlaggedContent)
    {
        localVarQueryParams[utility::conversions::to_string_t("removeFlaggedContent")] = ApiClient::parameterToString(*removeFlaggedContent);
    }
    if (verifiedFilter)
    {
        localVarQueryParams[utility::conversions::to_string_t("verifiedFilter")] = ApiClient::parameterToString(*verifiedFilter);
    }
    if (linkedObjectType)
    {
        localVarQueryParams[utility::conversions::to_string_t("linkedObjectType")] = ApiClient::parameterToString(*linkedObjectType);
    }
    if (linkedObjectId)
    {
        localVarQueryParams[utility::conversions::to_string_t("linkedObjectId")] = ApiClient::parameterToString(*linkedObjectId);
    }
    if (orderAudienceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("orderAudienceId")] = ApiClient::parameterToString(*orderAudienceId);
    }
    if (ignoreDefaultAppFilter)
    {
        localVarQueryParams[utility::conversions::to_string_t("ignoreDefaultAppFilter")] = ApiClient::parameterToString(*ignoreDefaultAppFilter);
    }
    if (searchExpression)
    {
        localVarQueryParams[utility::conversions::to_string_t("searchExpression")] = ApiClient::parameterToString(*searchExpression);
    }
    if (generateAlbums)
    {
        localVarQueryParams[utility::conversions::to_string_t("generateAlbums")] = ApiClient::parameterToString(*generateAlbums);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("AlbumApi->searchAlbums does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling searchAlbums: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling searchAlbums: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::vector<std::shared_ptr<AlbumFullResponse>> localVarResult;

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);
            for( auto& localVarItem : localVarJson.as_array() )
            {
                std::shared_ptr<AlbumFullResponse> localVarItemObj;
                ModelBase::fromJson(localVarItem, localVarItemObj);
                localVarResult.push_back(localVarItemObj);
            }
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling searchAlbums: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<AlbumResponse>> AlbumApi::updateAlbumCollection(double version, int64_t albumId, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<utility::string_t> assetsToAdd, boost::optional<utility::string_t> assetsToRemove, boost::optional<int64_t> assetId, boost::optional<std::shared_ptr<HttpContent>> media, boost::optional<utility::string_t> mediaURL, boost::optional<bool> active, boost::optional<utility::string_t> title, boost::optional<int64_t> startDate, boost::optional<int64_t> endDate, boost::optional<utility::string_t> tags, boost::optional<utility::string_t> description, boost::optional<utility::string_t> albumType, boost::optional<int64_t> albumTypeId, boost::optional<utility::string_t> subType, boost::optional<bool> publicRead, boost::optional<bool> publicWrite, boost::optional<bool> publicDelete, boost::optional<bool> publicAdd, boost::optional<double> latitude, boost::optional<double> longitude, boost::optional<utility::string_t> locationDescription, boost::optional<utility::string_t> visibility, boost::optional<utility::string_t> cellPhone, boost::optional<utility::string_t> streetAddress, boost::optional<utility::string_t> streetAddress2, boost::optional<utility::string_t> city, boost::optional<utility::string_t> state, boost::optional<utility::string_t> postalCode, boost::optional<utility::string_t> fullAddress, boost::optional<bool> anonymous, boost::optional<utility::string_t> metaData, boost::optional<utility::string_t> categoryIds, boost::optional<utility::string_t> categoryFilterIds, boost::optional<utility::string_t> audienceIds, boost::optional<utility::string_t> audienceIdsToAdd, boost::optional<utility::string_t> audienceIdsToRemove, boost::optional<bool> includeAllAppUsersAsMembers, boost::optional<bool> includeAudiencesAsMembers, boost::optional<utility::string_t> audienceOperator, boost::optional<utility::string_t> linkedObjectType, boost::optional<int64_t> linkedObjectId, boost::optional<bool> indexNow) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/api/{version}/album/update");
    boost::replace_all(localVarPath, utility::conversions::to_string_t("{") + utility::conversions::to_string_t("version") + utility::conversions::to_string_t("}"), web::uri::encode_uri(ApiClient::parameterToString(version)));

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("AlbumApi->updateAlbumCollection does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("albumId")] = ApiClient::parameterToString(albumId);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (assetsToAdd)
    {
        localVarQueryParams[utility::conversions::to_string_t("assetsToAdd")] = ApiClient::parameterToString(*assetsToAdd);
    }
    if (assetsToRemove)
    {
        localVarQueryParams[utility::conversions::to_string_t("assetsToRemove")] = ApiClient::parameterToString(*assetsToRemove);
    }
    if (assetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("assetId")] = ApiClient::parameterToString(*assetId);
    }
    if (media && *media != nullptr)
    {
        localVarQueryParams[utility::conversions::to_string_t("media")] = ApiClient::parameterToString(*media);
    }
    if (mediaURL)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaURL")] = ApiClient::parameterToString(*mediaURL);
    }
    if (active)
    {
        localVarQueryParams[utility::conversions::to_string_t("active")] = ApiClient::parameterToString(*active);
    }
    if (title)
    {
        localVarQueryParams[utility::conversions::to_string_t("title")] = ApiClient::parameterToString(*title);
    }
    if (startDate)
    {
        localVarQueryParams[utility::conversions::to_string_t("startDate")] = ApiClient::parameterToString(*startDate);
    }
    if (endDate)
    {
        localVarQueryParams[utility::conversions::to_string_t("endDate")] = ApiClient::parameterToString(*endDate);
    }
    if (tags)
    {
        localVarQueryParams[utility::conversions::to_string_t("tags")] = ApiClient::parameterToString(*tags);
    }
    if (description)
    {
        localVarQueryParams[utility::conversions::to_string_t("description")] = ApiClient::parameterToString(*description);
    }
    if (albumType)
    {
        localVarQueryParams[utility::conversions::to_string_t("albumType")] = ApiClient::parameterToString(*albumType);
    }
    if (albumTypeId)
    {
        localVarQueryParams[utility::conversions::to_string_t("albumTypeId")] = ApiClient::parameterToString(*albumTypeId);
    }
    if (subType)
    {
        localVarQueryParams[utility::conversions::to_string_t("subType")] = ApiClient::parameterToString(*subType);
    }
    if (publicRead)
    {
        localVarQueryParams[utility::conversions::to_string_t("publicRead")] = ApiClient::parameterToString(*publicRead);
    }
    if (publicWrite)
    {
        localVarQueryParams[utility::conversions::to_string_t("publicWrite")] = ApiClient::parameterToString(*publicWrite);
    }
    if (publicDelete)
    {
        localVarQueryParams[utility::conversions::to_string_t("publicDelete")] = ApiClient::parameterToString(*publicDelete);
    }
    if (publicAdd)
    {
        localVarQueryParams[utility::conversions::to_string_t("publicAdd")] = ApiClient::parameterToString(*publicAdd);
    }
    if (latitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("latitude")] = ApiClient::parameterToString(*latitude);
    }
    if (longitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("longitude")] = ApiClient::parameterToString(*longitude);
    }
    if (locationDescription)
    {
        localVarQueryParams[utility::conversions::to_string_t("locationDescription")] = ApiClient::parameterToString(*locationDescription);
    }
    if (visibility)
    {
        localVarQueryParams[utility::conversions::to_string_t("visibility")] = ApiClient::parameterToString(*visibility);
    }
    if (cellPhone)
    {
        localVarQueryParams[utility::conversions::to_string_t("cellPhone")] = ApiClient::parameterToString(*cellPhone);
    }
    if (streetAddress)
    {
        localVarQueryParams[utility::conversions::to_string_t("streetAddress")] = ApiClient::parameterToString(*streetAddress);
    }
    if (streetAddress2)
    {
        localVarQueryParams[utility::conversions::to_string_t("streetAddress2")] = ApiClient::parameterToString(*streetAddress2);
    }
    if (city)
    {
        localVarQueryParams[utility::conversions::to_string_t("city")] = ApiClient::parameterToString(*city);
    }
    if (state)
    {
        localVarQueryParams[utility::conversions::to_string_t("state")] = ApiClient::parameterToString(*state);
    }
    if (postalCode)
    {
        localVarQueryParams[utility::conversions::to_string_t("postalCode")] = ApiClient::parameterToString(*postalCode);
    }
    if (fullAddress)
    {
        localVarQueryParams[utility::conversions::to_string_t("fullAddress")] = ApiClient::parameterToString(*fullAddress);
    }
    if (anonymous)
    {
        localVarQueryParams[utility::conversions::to_string_t("anonymous")] = ApiClient::parameterToString(*anonymous);
    }
    if (metaData)
    {
        localVarQueryParams[utility::conversions::to_string_t("metaData")] = ApiClient::parameterToString(*metaData);
    }
    if (categoryIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("categoryIds")] = ApiClient::parameterToString(*categoryIds);
    }
    if (categoryFilterIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("categoryFilterIds")] = ApiClient::parameterToString(*categoryFilterIds);
    }
    if (audienceIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("audienceIds")] = ApiClient::parameterToString(*audienceIds);
    }
    if (audienceIdsToAdd)
    {
        localVarQueryParams[utility::conversions::to_string_t("audienceIdsToAdd")] = ApiClient::parameterToString(*audienceIdsToAdd);
    }
    if (audienceIdsToRemove)
    {
        localVarQueryParams[utility::conversions::to_string_t("audienceIdsToRemove")] = ApiClient::parameterToString(*audienceIdsToRemove);
    }
    if (includeAllAppUsersAsMembers)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeAllAppUsersAsMembers")] = ApiClient::parameterToString(*includeAllAppUsersAsMembers);
    }
    if (includeAudiencesAsMembers)
    {
        localVarQueryParams[utility::conversions::to_string_t("includeAudiencesAsMembers")] = ApiClient::parameterToString(*includeAudiencesAsMembers);
    }
    if (audienceOperator)
    {
        localVarQueryParams[utility::conversions::to_string_t("audienceOperator")] = ApiClient::parameterToString(*audienceOperator);
    }
    if (linkedObjectType)
    {
        localVarQueryParams[utility::conversions::to_string_t("linkedObjectType")] = ApiClient::parameterToString(*linkedObjectType);
    }
    if (linkedObjectId)
    {
        localVarQueryParams[utility::conversions::to_string_t("linkedObjectId")] = ApiClient::parameterToString(*linkedObjectId);
    }
    if (indexNow)
    {
        localVarQueryParams[utility::conversions::to_string_t("indexNow")] = ApiClient::parameterToString(*indexNow);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("AlbumApi->updateAlbumCollection does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling updateAlbumCollection: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling updateAlbumCollection: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<AlbumResponse> localVarResult(new AlbumResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling updateAlbumCollection: unsupported response type"));
        }

        return localVarResult;
    });
}

}
}
}
}

