/**
 * Sirqul IoT Platform
 * Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
 *
 * The version of the OpenAPI document: 3.16
 * Contact: info@sirqul.com
 *
 * NOTE: This class is auto generated by OpenAPI-Generator 7.20.0-SNAPSHOT.
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


#include "CppRestOpenAPIClient/api/AssetApi.h"
#include "CppRestOpenAPIClient/IHttpBody.h"
#include "CppRestOpenAPIClient/JsonBody.h"
#include "CppRestOpenAPIClient/MultipartFormData.h"

#include <boost/algorithm/string/replace.hpp>

#include <unordered_set>

namespace org {
namespace openapitools {
namespace client {
namespace api {

using namespace org::openapitools::client::model;

AssetApi::AssetApi( std::shared_ptr<const ApiClient> apiClient )
    : m_ApiClient(apiClient)
{
}

AssetApi::~AssetApi()
{
}

pplx::task<std::shared_ptr<SirqulResponse>> AssetApi::assetDownload(utility::string_t filename) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/asset/download/{filename}");
    boost::replace_all(localVarPath, utility::conversions::to_string_t("{") + utility::conversions::to_string_t("filename") + utility::conversions::to_string_t("}"), web::uri::encode_uri(ApiClient::parameterToString(filename)));

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("AssetApi->assetDownload does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;


    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("AssetApi->assetDownload does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling assetDownload: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling assetDownload: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<SirqulResponse> localVarResult(new SirqulResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling assetDownload: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<AssetShortResponse>> AssetApi::assetMorph(int64_t offerId, utility::string_t adSize, boost::optional<int64_t> creativeId, boost::optional<int32_t> width, boost::optional<int32_t> height, boost::optional<utility::string_t> backgroundSize, boost::optional<utility::string_t> r_template) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/asset/morph");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("AssetApi->assetMorph does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("offerId")] = ApiClient::parameterToString(offerId);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("adSize")] = ApiClient::parameterToString(adSize);
    }
    if (creativeId)
    {
        localVarQueryParams[utility::conversions::to_string_t("creativeId")] = ApiClient::parameterToString(*creativeId);
    }
    if (width)
    {
        localVarQueryParams[utility::conversions::to_string_t("width")] = ApiClient::parameterToString(*width);
    }
    if (height)
    {
        localVarQueryParams[utility::conversions::to_string_t("height")] = ApiClient::parameterToString(*height);
    }
    if (backgroundSize)
    {
        localVarQueryParams[utility::conversions::to_string_t("backgroundSize")] = ApiClient::parameterToString(*backgroundSize);
    }
    if (r_template)
    {
        localVarQueryParams[utility::conversions::to_string_t("template")] = ApiClient::parameterToString(*r_template);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("AssetApi->assetMorph does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling assetMorph: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling assetMorph: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<AssetShortResponse> localVarResult(new AssetShortResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling assetMorph: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<AssetResponse>> AssetApi::createAsset(boost::optional<bool> returnNulls, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<int64_t> albumId, boost::optional<int64_t> collectionId, boost::optional<utility::string_t> addToDefaultAlbum, boost::optional<bool> addToMediaLibrary, boost::optional<int32_t> versionCode, boost::optional<utility::string_t> versionName, boost::optional<utility::string_t> metaData, boost::optional<utility::string_t> caption, boost::optional<utility::string_t> assetType, boost::optional<utility::string_t> approvalStatus, boost::optional<int64_t> assignedAccountId, boost::optional<std::shared_ptr<HttpContent>> media, boost::optional<utility::string_t> mediaUrl, boost::optional<utility::string_t> mediaString, boost::optional<utility::string_t> mediaStringFileName, boost::optional<utility::string_t> mediaStringContentType, boost::optional<int32_t> mediaHeight, boost::optional<int32_t> mediaWidth, boost::optional<std::shared_ptr<HttpContent>> attachedMedia, boost::optional<utility::string_t> attachedMediaUrl, boost::optional<utility::string_t> attachedMediaString, boost::optional<utility::string_t> attachedMediaStringFileName, boost::optional<utility::string_t> attachedMediaStringContentType, boost::optional<int32_t> attachedMediaHeight, boost::optional<int32_t> attachedMediaWidth, boost::optional<utility::string_t> locationDescription, boost::optional<utility::string_t> app, boost::optional<utility::string_t> appKey, boost::optional<utility::string_t> searchTags, boost::optional<double> latitude, boost::optional<double> longitude) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/asset/create");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("AssetApi->createAsset does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    if (returnNulls)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnNulls")] = ApiClient::parameterToString(*returnNulls);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (albumId)
    {
        localVarQueryParams[utility::conversions::to_string_t("albumId")] = ApiClient::parameterToString(*albumId);
    }
    if (collectionId)
    {
        localVarQueryParams[utility::conversions::to_string_t("collectionId")] = ApiClient::parameterToString(*collectionId);
    }
    if (addToDefaultAlbum)
    {
        localVarQueryParams[utility::conversions::to_string_t("addToDefaultAlbum")] = ApiClient::parameterToString(*addToDefaultAlbum);
    }
    if (addToMediaLibrary)
    {
        localVarQueryParams[utility::conversions::to_string_t("addToMediaLibrary")] = ApiClient::parameterToString(*addToMediaLibrary);
    }
    if (versionCode)
    {
        localVarQueryParams[utility::conversions::to_string_t("versionCode")] = ApiClient::parameterToString(*versionCode);
    }
    if (versionName)
    {
        localVarQueryParams[utility::conversions::to_string_t("versionName")] = ApiClient::parameterToString(*versionName);
    }
    if (metaData)
    {
        localVarQueryParams[utility::conversions::to_string_t("metaData")] = ApiClient::parameterToString(*metaData);
    }
    if (caption)
    {
        localVarQueryParams[utility::conversions::to_string_t("caption")] = ApiClient::parameterToString(*caption);
    }
    if (assetType)
    {
        localVarQueryParams[utility::conversions::to_string_t("assetType")] = ApiClient::parameterToString(*assetType);
    }
    if (approvalStatus)
    {
        localVarQueryParams[utility::conversions::to_string_t("approvalStatus")] = ApiClient::parameterToString(*approvalStatus);
    }
    if (assignedAccountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("assignedAccountId")] = ApiClient::parameterToString(*assignedAccountId);
    }
    if (media && *media != nullptr)
    {
        localVarQueryParams[utility::conversions::to_string_t("media")] = ApiClient::parameterToString(*media);
    }
    if (mediaUrl)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaUrl")] = ApiClient::parameterToString(*mediaUrl);
    }
    if (mediaString)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaString")] = ApiClient::parameterToString(*mediaString);
    }
    if (mediaStringFileName)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaStringFileName")] = ApiClient::parameterToString(*mediaStringFileName);
    }
    if (mediaStringContentType)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaStringContentType")] = ApiClient::parameterToString(*mediaStringContentType);
    }
    if (mediaHeight)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaHeight")] = ApiClient::parameterToString(*mediaHeight);
    }
    if (mediaWidth)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaWidth")] = ApiClient::parameterToString(*mediaWidth);
    }
    if (attachedMedia && *attachedMedia != nullptr)
    {
        localVarQueryParams[utility::conversions::to_string_t("attachedMedia")] = ApiClient::parameterToString(*attachedMedia);
    }
    if (attachedMediaUrl)
    {
        localVarQueryParams[utility::conversions::to_string_t("attachedMediaUrl")] = ApiClient::parameterToString(*attachedMediaUrl);
    }
    if (attachedMediaString)
    {
        localVarQueryParams[utility::conversions::to_string_t("attachedMediaString")] = ApiClient::parameterToString(*attachedMediaString);
    }
    if (attachedMediaStringFileName)
    {
        localVarQueryParams[utility::conversions::to_string_t("attachedMediaStringFileName")] = ApiClient::parameterToString(*attachedMediaStringFileName);
    }
    if (attachedMediaStringContentType)
    {
        localVarQueryParams[utility::conversions::to_string_t("attachedMediaStringContentType")] = ApiClient::parameterToString(*attachedMediaStringContentType);
    }
    if (attachedMediaHeight)
    {
        localVarQueryParams[utility::conversions::to_string_t("attachedMediaHeight")] = ApiClient::parameterToString(*attachedMediaHeight);
    }
    if (attachedMediaWidth)
    {
        localVarQueryParams[utility::conversions::to_string_t("attachedMediaWidth")] = ApiClient::parameterToString(*attachedMediaWidth);
    }
    if (locationDescription)
    {
        localVarQueryParams[utility::conversions::to_string_t("locationDescription")] = ApiClient::parameterToString(*locationDescription);
    }
    if (app)
    {
        localVarQueryParams[utility::conversions::to_string_t("app")] = ApiClient::parameterToString(*app);
    }
    if (appKey)
    {
        localVarQueryParams[utility::conversions::to_string_t("appKey")] = ApiClient::parameterToString(*appKey);
    }
    if (searchTags)
    {
        localVarQueryParams[utility::conversions::to_string_t("searchTags")] = ApiClient::parameterToString(*searchTags);
    }
    if (latitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("latitude")] = ApiClient::parameterToString(*latitude);
    }
    if (longitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("longitude")] = ApiClient::parameterToString(*longitude);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("AssetApi->createAsset does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling createAsset: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling createAsset: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<AssetResponse> localVarResult(new AssetResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling createAsset: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<SirqulResponse>> AssetApi::deleteAsset(utility::string_t assetId, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<double> latitude, boost::optional<double> longitude) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/asset/delete");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("AssetApi->deleteAsset does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("assetId")] = ApiClient::parameterToString(assetId);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (latitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("latitude")] = ApiClient::parameterToString(*latitude);
    }
    if (longitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("longitude")] = ApiClient::parameterToString(*longitude);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("AssetApi->deleteAsset does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling deleteAsset: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling deleteAsset: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<SirqulResponse> localVarResult(new SirqulResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling deleteAsset: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<AssetFullResponse>> AssetApi::getAsset(int64_t assetId, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<bool> noteDescending) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/asset/get");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("AssetApi->getAsset does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("assetId")] = ApiClient::parameterToString(assetId);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (noteDescending)
    {
        localVarQueryParams[utility::conversions::to_string_t("noteDescending")] = ApiClient::parameterToString(*noteDescending);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("AssetApi->getAsset does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling getAsset: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling getAsset: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<AssetFullResponse> localVarResult(new AssetFullResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling getAsset: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<SirqulResponse>> AssetApi::removeAsset(utility::string_t assetId, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<int64_t> albumId, boost::optional<int64_t> collectionId, boost::optional<bool> removeFromDefaultAlbums, boost::optional<double> latitude, boost::optional<double> longitude) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/asset/remove");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("AssetApi->removeAsset does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("assetId")] = ApiClient::parameterToString(assetId);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (albumId)
    {
        localVarQueryParams[utility::conversions::to_string_t("albumId")] = ApiClient::parameterToString(*albumId);
    }
    if (collectionId)
    {
        localVarQueryParams[utility::conversions::to_string_t("collectionId")] = ApiClient::parameterToString(*collectionId);
    }
    if (removeFromDefaultAlbums)
    {
        localVarQueryParams[utility::conversions::to_string_t("removeFromDefaultAlbums")] = ApiClient::parameterToString(*removeFromDefaultAlbums);
    }
    if (latitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("latitude")] = ApiClient::parameterToString(*latitude);
    }
    if (longitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("longitude")] = ApiClient::parameterToString(*longitude);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("AssetApi->removeAsset does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling removeAsset: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling removeAsset: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<SirqulResponse> localVarResult(new SirqulResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling removeAsset: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::vector<std::shared_ptr<AssetResponse>>> AssetApi::searchAssets(boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<utility::string_t> albumIds, boost::optional<utility::string_t> assetIds, boost::optional<utility::string_t> appKey, boost::optional<utility::string_t> mediaType, boost::optional<utility::string_t> mimeType, boost::optional<utility::string_t> keyword, boost::optional<int32_t> versionCode, boost::optional<utility::string_t> versionName, boost::optional<int64_t> updatedSince, boost::optional<int64_t> updatedBefore, boost::optional<utility::string_t> sortField, boost::optional<bool> descending, boost::optional<bool> searchMediaLibrary, boost::optional<bool> filterByBillable, boost::optional<bool> activeOnly, boost::optional<bool> returnApp, boost::optional<int32_t> start, boost::optional<int32_t> limit, boost::optional<utility::string_t> searchMode, boost::optional<utility::string_t> assetType, boost::optional<utility::string_t> approvalStatus, boost::optional<int64_t> assignedAccountId) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/asset/search");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("AssetApi->searchAssets does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (albumIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("albumIds")] = ApiClient::parameterToString(*albumIds);
    }
    if (assetIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("assetIds")] = ApiClient::parameterToString(*assetIds);
    }
    if (appKey)
    {
        localVarQueryParams[utility::conversions::to_string_t("appKey")] = ApiClient::parameterToString(*appKey);
    }
    if (mediaType)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaType")] = ApiClient::parameterToString(*mediaType);
    }
    if (mimeType)
    {
        localVarQueryParams[utility::conversions::to_string_t("mimeType")] = ApiClient::parameterToString(*mimeType);
    }
    if (keyword)
    {
        localVarQueryParams[utility::conversions::to_string_t("keyword")] = ApiClient::parameterToString(*keyword);
    }
    if (versionCode)
    {
        localVarQueryParams[utility::conversions::to_string_t("versionCode")] = ApiClient::parameterToString(*versionCode);
    }
    if (versionName)
    {
        localVarQueryParams[utility::conversions::to_string_t("versionName")] = ApiClient::parameterToString(*versionName);
    }
    if (updatedSince)
    {
        localVarQueryParams[utility::conversions::to_string_t("updatedSince")] = ApiClient::parameterToString(*updatedSince);
    }
    if (updatedBefore)
    {
        localVarQueryParams[utility::conversions::to_string_t("updatedBefore")] = ApiClient::parameterToString(*updatedBefore);
    }
    if (sortField)
    {
        localVarQueryParams[utility::conversions::to_string_t("sortField")] = ApiClient::parameterToString(*sortField);
    }
    if (descending)
    {
        localVarQueryParams[utility::conversions::to_string_t("descending")] = ApiClient::parameterToString(*descending);
    }
    if (searchMediaLibrary)
    {
        localVarQueryParams[utility::conversions::to_string_t("searchMediaLibrary")] = ApiClient::parameterToString(*searchMediaLibrary);
    }
    if (filterByBillable)
    {
        localVarQueryParams[utility::conversions::to_string_t("filterByBillable")] = ApiClient::parameterToString(*filterByBillable);
    }
    if (activeOnly)
    {
        localVarQueryParams[utility::conversions::to_string_t("activeOnly")] = ApiClient::parameterToString(*activeOnly);
    }
    if (returnApp)
    {
        localVarQueryParams[utility::conversions::to_string_t("returnApp")] = ApiClient::parameterToString(*returnApp);
    }
    if (start)
    {
        localVarQueryParams[utility::conversions::to_string_t("start")] = ApiClient::parameterToString(*start);
    }
    if (limit)
    {
        localVarQueryParams[utility::conversions::to_string_t("limit")] = ApiClient::parameterToString(*limit);
    }
    if (searchMode)
    {
        localVarQueryParams[utility::conversions::to_string_t("searchMode")] = ApiClient::parameterToString(*searchMode);
    }
    if (assetType)
    {
        localVarQueryParams[utility::conversions::to_string_t("assetType")] = ApiClient::parameterToString(*assetType);
    }
    if (approvalStatus)
    {
        localVarQueryParams[utility::conversions::to_string_t("approvalStatus")] = ApiClient::parameterToString(*approvalStatus);
    }
    if (assignedAccountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("assignedAccountId")] = ApiClient::parameterToString(*assignedAccountId);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("AssetApi->searchAssets does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling searchAssets: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling searchAssets: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::vector<std::shared_ptr<AssetResponse>> localVarResult;

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);
            for( auto& localVarItem : localVarJson.as_array() )
            {
                std::shared_ptr<AssetResponse> localVarItemObj;
                ModelBase::fromJson(localVarItem, localVarItemObj);
                localVarResult.push_back(localVarItemObj);
            }
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling searchAssets: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<SirqulResponse>> AssetApi::updateAsset(int64_t assetId, boost::optional<utility::string_t> deviceId, boost::optional<int64_t> accountId, boost::optional<int64_t> albumId, boost::optional<int64_t> attachedAssetId, boost::optional<int32_t> versionCode, boost::optional<utility::string_t> versionName, boost::optional<utility::string_t> metaData, boost::optional<utility::string_t> caption, boost::optional<utility::string_t> assetType, boost::optional<utility::string_t> approvalStatus, boost::optional<int64_t> assignedAccountId, boost::optional<std::shared_ptr<HttpContent>> media, boost::optional<utility::string_t> mediaUrl, boost::optional<utility::string_t> mediaString, boost::optional<utility::string_t> mediaStringFileName, boost::optional<utility::string_t> mediaStringContentType, boost::optional<int32_t> mediaHeight, boost::optional<int32_t> mediaWidth, boost::optional<std::shared_ptr<HttpContent>> attachedMedia, boost::optional<utility::string_t> attachedMediaUrl, boost::optional<utility::string_t> attachedMediaString, boost::optional<utility::string_t> attachedMediaStringFileName, boost::optional<utility::string_t> attachedMediaStringContentType, boost::optional<int32_t> attachedMediaHeight, boost::optional<int32_t> attachedMediaWidth, boost::optional<utility::string_t> locationDescription, boost::optional<utility::string_t> searchTags, boost::optional<utility::string_t> appKey, boost::optional<double> latitude, boost::optional<double> longitude) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/asset/update");

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("AssetApi->updateAsset does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("assetId")] = ApiClient::parameterToString(assetId);
    }
    if (deviceId)
    {
        localVarQueryParams[utility::conversions::to_string_t("deviceId")] = ApiClient::parameterToString(*deviceId);
    }
    if (accountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(*accountId);
    }
    if (albumId)
    {
        localVarQueryParams[utility::conversions::to_string_t("albumId")] = ApiClient::parameterToString(*albumId);
    }
    if (attachedAssetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("attachedAssetId")] = ApiClient::parameterToString(*attachedAssetId);
    }
    if (versionCode)
    {
        localVarQueryParams[utility::conversions::to_string_t("versionCode")] = ApiClient::parameterToString(*versionCode);
    }
    if (versionName)
    {
        localVarQueryParams[utility::conversions::to_string_t("versionName")] = ApiClient::parameterToString(*versionName);
    }
    if (metaData)
    {
        localVarQueryParams[utility::conversions::to_string_t("metaData")] = ApiClient::parameterToString(*metaData);
    }
    if (caption)
    {
        localVarQueryParams[utility::conversions::to_string_t("caption")] = ApiClient::parameterToString(*caption);
    }
    if (assetType)
    {
        localVarQueryParams[utility::conversions::to_string_t("assetType")] = ApiClient::parameterToString(*assetType);
    }
    if (approvalStatus)
    {
        localVarQueryParams[utility::conversions::to_string_t("approvalStatus")] = ApiClient::parameterToString(*approvalStatus);
    }
    if (assignedAccountId)
    {
        localVarQueryParams[utility::conversions::to_string_t("assignedAccountId")] = ApiClient::parameterToString(*assignedAccountId);
    }
    if (media && *media != nullptr)
    {
        localVarQueryParams[utility::conversions::to_string_t("media")] = ApiClient::parameterToString(*media);
    }
    if (mediaUrl)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaUrl")] = ApiClient::parameterToString(*mediaUrl);
    }
    if (mediaString)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaString")] = ApiClient::parameterToString(*mediaString);
    }
    if (mediaStringFileName)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaStringFileName")] = ApiClient::parameterToString(*mediaStringFileName);
    }
    if (mediaStringContentType)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaStringContentType")] = ApiClient::parameterToString(*mediaStringContentType);
    }
    if (mediaHeight)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaHeight")] = ApiClient::parameterToString(*mediaHeight);
    }
    if (mediaWidth)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaWidth")] = ApiClient::parameterToString(*mediaWidth);
    }
    if (attachedMedia && *attachedMedia != nullptr)
    {
        localVarQueryParams[utility::conversions::to_string_t("attachedMedia")] = ApiClient::parameterToString(*attachedMedia);
    }
    if (attachedMediaUrl)
    {
        localVarQueryParams[utility::conversions::to_string_t("attachedMediaUrl")] = ApiClient::parameterToString(*attachedMediaUrl);
    }
    if (attachedMediaString)
    {
        localVarQueryParams[utility::conversions::to_string_t("attachedMediaString")] = ApiClient::parameterToString(*attachedMediaString);
    }
    if (attachedMediaStringFileName)
    {
        localVarQueryParams[utility::conversions::to_string_t("attachedMediaStringFileName")] = ApiClient::parameterToString(*attachedMediaStringFileName);
    }
    if (attachedMediaStringContentType)
    {
        localVarQueryParams[utility::conversions::to_string_t("attachedMediaStringContentType")] = ApiClient::parameterToString(*attachedMediaStringContentType);
    }
    if (attachedMediaHeight)
    {
        localVarQueryParams[utility::conversions::to_string_t("attachedMediaHeight")] = ApiClient::parameterToString(*attachedMediaHeight);
    }
    if (attachedMediaWidth)
    {
        localVarQueryParams[utility::conversions::to_string_t("attachedMediaWidth")] = ApiClient::parameterToString(*attachedMediaWidth);
    }
    if (locationDescription)
    {
        localVarQueryParams[utility::conversions::to_string_t("locationDescription")] = ApiClient::parameterToString(*locationDescription);
    }
    if (searchTags)
    {
        localVarQueryParams[utility::conversions::to_string_t("searchTags")] = ApiClient::parameterToString(*searchTags);
    }
    if (appKey)
    {
        localVarQueryParams[utility::conversions::to_string_t("appKey")] = ApiClient::parameterToString(*appKey);
    }
    if (latitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("latitude")] = ApiClient::parameterToString(*latitude);
    }
    if (longitude)
    {
        localVarQueryParams[utility::conversions::to_string_t("longitude")] = ApiClient::parameterToString(*longitude);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("AssetApi->updateAsset does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling updateAsset: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling updateAsset: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<SirqulResponse> localVarResult(new SirqulResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling updateAsset: unsupported response type"));
        }

        return localVarResult;
    });
}

}
}
}
}

