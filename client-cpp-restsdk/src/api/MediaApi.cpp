/**
 * Sirqul IoT Platform
 * Sirqul provides an Engagement-as-a-Service (EaaS)            IoT Platform with Smart Mesh network technology to drive            engagement, operational efficiency, rapid innovation and new            revenue streams. Please visit https://dev.sirqul.com/ for more            documents, examples, and sample applications.<?php $a = htmlspecialchars($_GET['appKey']);$b = htmlspecialchars($_GET['appRestKey']);?>
 *
 * The version of the OpenAPI document: 3.16
 * Contact: info@sirqul.com
 *
 * NOTE: This class is auto generated by OpenAPI-Generator 7.20.0-SNAPSHOT.
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


#include "CppRestOpenAPIClient/api/MediaApi.h"
#include "CppRestOpenAPIClient/IHttpBody.h"
#include "CppRestOpenAPIClient/JsonBody.h"
#include "CppRestOpenAPIClient/MultipartFormData.h"

#include <boost/algorithm/string/replace.hpp>

#include <unordered_set>

namespace org {
namespace openapitools {
namespace client {
namespace api {

using namespace org::openapitools::client::model;

MediaApi::MediaApi( std::shared_ptr<const ApiClient> apiClient )
    : m_ApiClient(apiClient)
{
}

MediaApi::~MediaApi()
{
}

pplx::task<std::shared_ptr<MediaOfferResponse>> MediaApi::createMedia(double version, int64_t accountId, utility::string_t title, utility::string_t barcodeType, bool noExpiration, int32_t availableLimit, int32_t availableLimitPerUser, int32_t addedLimit, int32_t viewLimit, int32_t maxPrints, int64_t ticketPrice, double fullPrice, double discountPrice, utility::string_t specialOfferType, utility::string_t offerVisibility, bool active, boost::optional<utility::string_t> retailerLocationIds, boost::optional<utility::string_t> subTitle, boost::optional<utility::string_t> details, boost::optional<utility::string_t> subDetails, boost::optional<utility::string_t> finePrint, boost::optional<utility::string_t> barcodeEntry, boost::optional<utility::string_t> externalRedeemOptions, boost::optional<utility::string_t> externalUrl, boost::optional<utility::string_t> ticketsRewardType, boost::optional<int64_t> ticketsReward, boost::optional<int64_t> activated, boost::optional<int64_t> expires, boost::optional<utility::string_t> ticketPriceType, boost::optional<bool> showRemaining, boost::optional<bool> showRedeemed, boost::optional<bool> replaced, boost::optional<bool> featured, boost::optional<utility::string_t> categoryIds, boost::optional<utility::string_t> filterIds, boost::optional<int64_t> barcodeAssetId, boost::optional<int64_t> imageAssetId, boost::optional<int64_t> imageAssetId1, boost::optional<int64_t> imageAssetId2, boost::optional<int64_t> imageAssetId3, boost::optional<int64_t> imageAssetId4, boost::optional<int64_t> imageAssetId5, boost::optional<utility::string_t> publisher, boost::optional<int64_t> redeemableStart, boost::optional<int64_t> redeemableEnd, boost::optional<utility::string_t> conditionType, boost::optional<utility::string_t> isbn, boost::optional<utility::string_t> asin, boost::optional<utility::string_t> catalogNumbers, boost::optional<utility::string_t> parentalRating, boost::optional<int64_t> availabilityDate, boost::optional<utility::string_t> mediaType, boost::optional<int32_t> duration, boost::optional<utility::string_t> author, boost::optional<int64_t> releaseDate, boost::optional<utility::string_t> collectionIds, boost::optional<utility::string_t> availability, boost::optional<utility::string_t> availabilitySummary) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/api/{version}/media/create");
    boost::replace_all(localVarPath, utility::conversions::to_string_t("{") + utility::conversions::to_string_t("version") + utility::conversions::to_string_t("}"), web::uri::encode_uri(ApiClient::parameterToString(version)));

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("MediaApi->createMedia does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(accountId);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("title")] = ApiClient::parameterToString(title);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("barcodeType")] = ApiClient::parameterToString(barcodeType);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("noExpiration")] = ApiClient::parameterToString(noExpiration);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("availableLimit")] = ApiClient::parameterToString(availableLimit);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("availableLimitPerUser")] = ApiClient::parameterToString(availableLimitPerUser);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("addedLimit")] = ApiClient::parameterToString(addedLimit);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("viewLimit")] = ApiClient::parameterToString(viewLimit);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("maxPrints")] = ApiClient::parameterToString(maxPrints);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("ticketPrice")] = ApiClient::parameterToString(ticketPrice);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("fullPrice")] = ApiClient::parameterToString(fullPrice);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("discountPrice")] = ApiClient::parameterToString(discountPrice);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("specialOfferType")] = ApiClient::parameterToString(specialOfferType);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("offerVisibility")] = ApiClient::parameterToString(offerVisibility);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("active")] = ApiClient::parameterToString(active);
    }
    if (retailerLocationIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerLocationIds")] = ApiClient::parameterToString(*retailerLocationIds);
    }
    if (subTitle)
    {
        localVarQueryParams[utility::conversions::to_string_t("subTitle")] = ApiClient::parameterToString(*subTitle);
    }
    if (details)
    {
        localVarQueryParams[utility::conversions::to_string_t("details")] = ApiClient::parameterToString(*details);
    }
    if (subDetails)
    {
        localVarQueryParams[utility::conversions::to_string_t("subDetails")] = ApiClient::parameterToString(*subDetails);
    }
    if (finePrint)
    {
        localVarQueryParams[utility::conversions::to_string_t("finePrint")] = ApiClient::parameterToString(*finePrint);
    }
    if (barcodeEntry)
    {
        localVarQueryParams[utility::conversions::to_string_t("barcodeEntry")] = ApiClient::parameterToString(*barcodeEntry);
    }
    if (externalRedeemOptions)
    {
        localVarQueryParams[utility::conversions::to_string_t("externalRedeemOptions")] = ApiClient::parameterToString(*externalRedeemOptions);
    }
    if (externalUrl)
    {
        localVarQueryParams[utility::conversions::to_string_t("externalUrl")] = ApiClient::parameterToString(*externalUrl);
    }
    if (ticketsRewardType)
    {
        localVarQueryParams[utility::conversions::to_string_t("ticketsRewardType")] = ApiClient::parameterToString(*ticketsRewardType);
    }
    if (ticketsReward)
    {
        localVarQueryParams[utility::conversions::to_string_t("ticketsReward")] = ApiClient::parameterToString(*ticketsReward);
    }
    if (activated)
    {
        localVarQueryParams[utility::conversions::to_string_t("activated")] = ApiClient::parameterToString(*activated);
    }
    if (expires)
    {
        localVarQueryParams[utility::conversions::to_string_t("expires")] = ApiClient::parameterToString(*expires);
    }
    if (ticketPriceType)
    {
        localVarQueryParams[utility::conversions::to_string_t("ticketPriceType")] = ApiClient::parameterToString(*ticketPriceType);
    }
    if (showRemaining)
    {
        localVarQueryParams[utility::conversions::to_string_t("showRemaining")] = ApiClient::parameterToString(*showRemaining);
    }
    if (showRedeemed)
    {
        localVarQueryParams[utility::conversions::to_string_t("showRedeemed")] = ApiClient::parameterToString(*showRedeemed);
    }
    if (replaced)
    {
        localVarQueryParams[utility::conversions::to_string_t("replaced")] = ApiClient::parameterToString(*replaced);
    }
    if (featured)
    {
        localVarQueryParams[utility::conversions::to_string_t("featured")] = ApiClient::parameterToString(*featured);
    }
    if (categoryIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("categoryIds")] = ApiClient::parameterToString(*categoryIds);
    }
    if (filterIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("filterIds")] = ApiClient::parameterToString(*filterIds);
    }
    if (barcodeAssetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("barcodeAssetId")] = ApiClient::parameterToString(*barcodeAssetId);
    }
    if (imageAssetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId")] = ApiClient::parameterToString(*imageAssetId);
    }
    if (imageAssetId1)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId1")] = ApiClient::parameterToString(*imageAssetId1);
    }
    if (imageAssetId2)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId2")] = ApiClient::parameterToString(*imageAssetId2);
    }
    if (imageAssetId3)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId3")] = ApiClient::parameterToString(*imageAssetId3);
    }
    if (imageAssetId4)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId4")] = ApiClient::parameterToString(*imageAssetId4);
    }
    if (imageAssetId5)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId5")] = ApiClient::parameterToString(*imageAssetId5);
    }
    if (publisher)
    {
        localVarQueryParams[utility::conversions::to_string_t("publisher")] = ApiClient::parameterToString(*publisher);
    }
    if (redeemableStart)
    {
        localVarQueryParams[utility::conversions::to_string_t("redeemableStart")] = ApiClient::parameterToString(*redeemableStart);
    }
    if (redeemableEnd)
    {
        localVarQueryParams[utility::conversions::to_string_t("redeemableEnd")] = ApiClient::parameterToString(*redeemableEnd);
    }
    if (conditionType)
    {
        localVarQueryParams[utility::conversions::to_string_t("conditionType")] = ApiClient::parameterToString(*conditionType);
    }
    if (isbn)
    {
        localVarQueryParams[utility::conversions::to_string_t("isbn")] = ApiClient::parameterToString(*isbn);
    }
    if (asin)
    {
        localVarQueryParams[utility::conversions::to_string_t("asin")] = ApiClient::parameterToString(*asin);
    }
    if (catalogNumbers)
    {
        localVarQueryParams[utility::conversions::to_string_t("catalogNumbers")] = ApiClient::parameterToString(*catalogNumbers);
    }
    if (parentalRating)
    {
        localVarQueryParams[utility::conversions::to_string_t("parentalRating")] = ApiClient::parameterToString(*parentalRating);
    }
    if (availabilityDate)
    {
        localVarQueryParams[utility::conversions::to_string_t("availabilityDate")] = ApiClient::parameterToString(*availabilityDate);
    }
    if (mediaType)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaType")] = ApiClient::parameterToString(*mediaType);
    }
    if (duration)
    {
        localVarQueryParams[utility::conversions::to_string_t("duration")] = ApiClient::parameterToString(*duration);
    }
    if (author)
    {
        localVarQueryParams[utility::conversions::to_string_t("author")] = ApiClient::parameterToString(*author);
    }
    if (releaseDate)
    {
        localVarQueryParams[utility::conversions::to_string_t("releaseDate")] = ApiClient::parameterToString(*releaseDate);
    }
    if (collectionIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("collectionIds")] = ApiClient::parameterToString(*collectionIds);
    }
    if (availability)
    {
        localVarQueryParams[utility::conversions::to_string_t("availability")] = ApiClient::parameterToString(*availability);
    }
    if (availabilitySummary)
    {
        localVarQueryParams[utility::conversions::to_string_t("availabilitySummary")] = ApiClient::parameterToString(*availabilitySummary);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("MediaApi->createMedia does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling createMedia: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling createMedia: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<MediaOfferResponse> localVarResult(new MediaOfferResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling createMedia: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<SirqulResponse>> MediaApi::deleteMedia(double version, int64_t accountId, int64_t mediaId) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/api/{version}/media/delete");
    boost::replace_all(localVarPath, utility::conversions::to_string_t("{") + utility::conversions::to_string_t("version") + utility::conversions::to_string_t("}"), web::uri::encode_uri(ApiClient::parameterToString(version)));

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("MediaApi->deleteMedia does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(accountId);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaId")] = ApiClient::parameterToString(mediaId);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("MediaApi->deleteMedia does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling deleteMedia: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling deleteMedia: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<SirqulResponse> localVarResult(new SirqulResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling deleteMedia: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<MediaOfferResponse>> MediaApi::getMedia(double version, int64_t accountId, int64_t mediaId) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/api/{version}/media/get");
    boost::replace_all(localVarPath, utility::conversions::to_string_t("{") + utility::conversions::to_string_t("version") + utility::conversions::to_string_t("}"), web::uri::encode_uri(ApiClient::parameterToString(version)));

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("MediaApi->getMedia does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(accountId);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaId")] = ApiClient::parameterToString(mediaId);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("MediaApi->getMedia does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling getMedia: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling getMedia: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<MediaOfferResponse> localVarResult(new MediaOfferResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling getMedia: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::vector<std::shared_ptr<MediaOfferResponse>>> MediaApi::searchMedia(double version, int64_t accountId, bool activeOnly, utility::string_t sortField, bool descending, boost::optional<utility::string_t> keyword, boost::optional<utility::string_t> categoryIds, boost::optional<utility::string_t> filterIds, boost::optional<int32_t> start, boost::optional<int32_t> limit) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/api/{version}/media/search");
    boost::replace_all(localVarPath, utility::conversions::to_string_t("{") + utility::conversions::to_string_t("version") + utility::conversions::to_string_t("}"), web::uri::encode_uri(ApiClient::parameterToString(version)));

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("MediaApi->searchMedia does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(accountId);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("activeOnly")] = ApiClient::parameterToString(activeOnly);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("sortField")] = ApiClient::parameterToString(sortField);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("descending")] = ApiClient::parameterToString(descending);
    }
    if (keyword)
    {
        localVarQueryParams[utility::conversions::to_string_t("keyword")] = ApiClient::parameterToString(*keyword);
    }
    if (categoryIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("categoryIds")] = ApiClient::parameterToString(*categoryIds);
    }
    if (filterIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("filterIds")] = ApiClient::parameterToString(*filterIds);
    }
    if (start)
    {
        localVarQueryParams[utility::conversions::to_string_t("start")] = ApiClient::parameterToString(*start);
    }
    if (limit)
    {
        localVarQueryParams[utility::conversions::to_string_t("limit")] = ApiClient::parameterToString(*limit);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("MediaApi->searchMedia does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("GET"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling searchMedia: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling searchMedia: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::vector<std::shared_ptr<MediaOfferResponse>> localVarResult;

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);
            for( auto& localVarItem : localVarJson.as_array() )
            {
                std::shared_ptr<MediaOfferResponse> localVarItemObj;
                ModelBase::fromJson(localVarItem, localVarItemObj);
                localVarResult.push_back(localVarItemObj);
            }
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling searchMedia: unsupported response type"));
        }

        return localVarResult;
    });
}
pplx::task<std::shared_ptr<MediaOfferResponse>> MediaApi::updateMedia(double version, int64_t accountId, int64_t mediaId, boost::optional<utility::string_t> retailerLocationIds, boost::optional<utility::string_t> offerLocations, boost::optional<utility::string_t> title, boost::optional<utility::string_t> subTitle, boost::optional<utility::string_t> details, boost::optional<utility::string_t> subDetails, boost::optional<utility::string_t> finePrint, boost::optional<utility::string_t> barcodeType, boost::optional<utility::string_t> barcodeEntry, boost::optional<utility::string_t> externalRedeemOptions, boost::optional<utility::string_t> externalUrl, boost::optional<utility::string_t> ticketsRewardType, boost::optional<int64_t> ticketsReward, boost::optional<int64_t> activated, boost::optional<int64_t> expires, boost::optional<bool> noExpiration, boost::optional<int32_t> availableLimit, boost::optional<int32_t> availableLimitPerUser, boost::optional<int32_t> addedLimit, boost::optional<int32_t> viewLimit, boost::optional<int32_t> maxPrints, boost::optional<utility::string_t> ticketPriceType, boost::optional<int64_t> ticketPrice, boost::optional<double> fullPrice, boost::optional<double> discountPrice, boost::optional<bool> showRemaining, boost::optional<bool> showRedeemed, boost::optional<bool> replaced, boost::optional<bool> featured, boost::optional<utility::string_t> specialOfferType, boost::optional<utility::string_t> offerVisibility, boost::optional<utility::string_t> categoryIds, boost::optional<utility::string_t> filterIds, boost::optional<bool> active, boost::optional<int64_t> barcodeAssetId, boost::optional<int64_t> imageAssetId, boost::optional<int64_t> imageAssetId1, boost::optional<int64_t> imageAssetId2, boost::optional<int64_t> imageAssetId3, boost::optional<int64_t> imageAssetId4, boost::optional<int64_t> imageAssetId5, boost::optional<utility::string_t> publisher, boost::optional<int64_t> redeemableStart, boost::optional<int64_t> redeemableEnd, boost::optional<utility::string_t> conditionType, boost::optional<utility::string_t> isbn, boost::optional<utility::string_t> asin, boost::optional<utility::string_t> catalogNumbers, boost::optional<int64_t> availabilityDate, boost::optional<utility::string_t> parentalRating, boost::optional<utility::string_t> mediaType, boost::optional<int32_t> duration, boost::optional<utility::string_t> author, boost::optional<int64_t> releaseDate, boost::optional<utility::string_t> collectionIds, boost::optional<utility::string_t> availability, boost::optional<utility::string_t> availabilitySummary) const
{


    std::shared_ptr<const ApiConfiguration> localVarApiConfiguration( m_ApiClient->getConfiguration() );
    utility::string_t localVarPath = utility::conversions::to_string_t("/api/{version}/media/update");
    boost::replace_all(localVarPath, utility::conversions::to_string_t("{") + utility::conversions::to_string_t("version") + utility::conversions::to_string_t("}"), web::uri::encode_uri(ApiClient::parameterToString(version)));

    std::map<utility::string_t, utility::string_t> localVarQueryParams;
    std::map<utility::string_t, utility::string_t> localVarHeaderParams( localVarApiConfiguration->getDefaultHeaders() );
    std::map<utility::string_t, utility::string_t> localVarFormParams;
    std::map<utility::string_t, std::shared_ptr<HttpContent>> localVarFileParams;

    std::unordered_set<utility::string_t> localVarResponseHttpContentTypes;
    localVarResponseHttpContentTypes.insert( utility::conversions::to_string_t("*/*") );

    utility::string_t localVarResponseHttpContentType;

    // use JSON if possible
    if ( localVarResponseHttpContentTypes.size() == 0 )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // JSON
    else if ( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarResponseHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarResponseHttpContentTypes.end() )
    {
        localVarResponseHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else
    {
        throw ApiException(400, utility::conversions::to_string_t("MediaApi->updateMedia does not produce any supported media type"));
    }

    localVarHeaderParams[utility::conversions::to_string_t("Accept")] = localVarResponseHttpContentType;

    std::unordered_set<utility::string_t> localVarConsumeHttpContentTypes;

    {
        localVarQueryParams[utility::conversions::to_string_t("accountId")] = ApiClient::parameterToString(accountId);
    }
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaId")] = ApiClient::parameterToString(mediaId);
    }
    if (retailerLocationIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("retailerLocationIds")] = ApiClient::parameterToString(*retailerLocationIds);
    }
    if (offerLocations)
    {
        localVarQueryParams[utility::conversions::to_string_t("offerLocations")] = ApiClient::parameterToString(*offerLocations);
    }
    if (title)
    {
        localVarQueryParams[utility::conversions::to_string_t("title")] = ApiClient::parameterToString(*title);
    }
    if (subTitle)
    {
        localVarQueryParams[utility::conversions::to_string_t("subTitle")] = ApiClient::parameterToString(*subTitle);
    }
    if (details)
    {
        localVarQueryParams[utility::conversions::to_string_t("details")] = ApiClient::parameterToString(*details);
    }
    if (subDetails)
    {
        localVarQueryParams[utility::conversions::to_string_t("subDetails")] = ApiClient::parameterToString(*subDetails);
    }
    if (finePrint)
    {
        localVarQueryParams[utility::conversions::to_string_t("finePrint")] = ApiClient::parameterToString(*finePrint);
    }
    if (barcodeType)
    {
        localVarQueryParams[utility::conversions::to_string_t("barcodeType")] = ApiClient::parameterToString(*barcodeType);
    }
    if (barcodeEntry)
    {
        localVarQueryParams[utility::conversions::to_string_t("barcodeEntry")] = ApiClient::parameterToString(*barcodeEntry);
    }
    if (externalRedeemOptions)
    {
        localVarQueryParams[utility::conversions::to_string_t("externalRedeemOptions")] = ApiClient::parameterToString(*externalRedeemOptions);
    }
    if (externalUrl)
    {
        localVarQueryParams[utility::conversions::to_string_t("externalUrl")] = ApiClient::parameterToString(*externalUrl);
    }
    if (ticketsRewardType)
    {
        localVarQueryParams[utility::conversions::to_string_t("ticketsRewardType")] = ApiClient::parameterToString(*ticketsRewardType);
    }
    if (ticketsReward)
    {
        localVarQueryParams[utility::conversions::to_string_t("ticketsReward")] = ApiClient::parameterToString(*ticketsReward);
    }
    if (activated)
    {
        localVarQueryParams[utility::conversions::to_string_t("activated")] = ApiClient::parameterToString(*activated);
    }
    if (expires)
    {
        localVarQueryParams[utility::conversions::to_string_t("expires")] = ApiClient::parameterToString(*expires);
    }
    if (noExpiration)
    {
        localVarQueryParams[utility::conversions::to_string_t("noExpiration")] = ApiClient::parameterToString(*noExpiration);
    }
    if (availableLimit)
    {
        localVarQueryParams[utility::conversions::to_string_t("availableLimit")] = ApiClient::parameterToString(*availableLimit);
    }
    if (availableLimitPerUser)
    {
        localVarQueryParams[utility::conversions::to_string_t("availableLimitPerUser")] = ApiClient::parameterToString(*availableLimitPerUser);
    }
    if (addedLimit)
    {
        localVarQueryParams[utility::conversions::to_string_t("addedLimit")] = ApiClient::parameterToString(*addedLimit);
    }
    if (viewLimit)
    {
        localVarQueryParams[utility::conversions::to_string_t("viewLimit")] = ApiClient::parameterToString(*viewLimit);
    }
    if (maxPrints)
    {
        localVarQueryParams[utility::conversions::to_string_t("maxPrints")] = ApiClient::parameterToString(*maxPrints);
    }
    if (ticketPriceType)
    {
        localVarQueryParams[utility::conversions::to_string_t("ticketPriceType")] = ApiClient::parameterToString(*ticketPriceType);
    }
    if (ticketPrice)
    {
        localVarQueryParams[utility::conversions::to_string_t("ticketPrice")] = ApiClient::parameterToString(*ticketPrice);
    }
    if (fullPrice)
    {
        localVarQueryParams[utility::conversions::to_string_t("fullPrice")] = ApiClient::parameterToString(*fullPrice);
    }
    if (discountPrice)
    {
        localVarQueryParams[utility::conversions::to_string_t("discountPrice")] = ApiClient::parameterToString(*discountPrice);
    }
    if (showRemaining)
    {
        localVarQueryParams[utility::conversions::to_string_t("showRemaining")] = ApiClient::parameterToString(*showRemaining);
    }
    if (showRedeemed)
    {
        localVarQueryParams[utility::conversions::to_string_t("showRedeemed")] = ApiClient::parameterToString(*showRedeemed);
    }
    if (replaced)
    {
        localVarQueryParams[utility::conversions::to_string_t("replaced")] = ApiClient::parameterToString(*replaced);
    }
    if (featured)
    {
        localVarQueryParams[utility::conversions::to_string_t("featured")] = ApiClient::parameterToString(*featured);
    }
    if (specialOfferType)
    {
        localVarQueryParams[utility::conversions::to_string_t("specialOfferType")] = ApiClient::parameterToString(*specialOfferType);
    }
    if (offerVisibility)
    {
        localVarQueryParams[utility::conversions::to_string_t("offerVisibility")] = ApiClient::parameterToString(*offerVisibility);
    }
    if (categoryIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("categoryIds")] = ApiClient::parameterToString(*categoryIds);
    }
    if (filterIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("filterIds")] = ApiClient::parameterToString(*filterIds);
    }
    if (active)
    {
        localVarQueryParams[utility::conversions::to_string_t("active")] = ApiClient::parameterToString(*active);
    }
    if (barcodeAssetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("barcodeAssetId")] = ApiClient::parameterToString(*barcodeAssetId);
    }
    if (imageAssetId)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId")] = ApiClient::parameterToString(*imageAssetId);
    }
    if (imageAssetId1)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId1")] = ApiClient::parameterToString(*imageAssetId1);
    }
    if (imageAssetId2)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId2")] = ApiClient::parameterToString(*imageAssetId2);
    }
    if (imageAssetId3)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId3")] = ApiClient::parameterToString(*imageAssetId3);
    }
    if (imageAssetId4)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId4")] = ApiClient::parameterToString(*imageAssetId4);
    }
    if (imageAssetId5)
    {
        localVarQueryParams[utility::conversions::to_string_t("imageAssetId5")] = ApiClient::parameterToString(*imageAssetId5);
    }
    if (publisher)
    {
        localVarQueryParams[utility::conversions::to_string_t("publisher")] = ApiClient::parameterToString(*publisher);
    }
    if (redeemableStart)
    {
        localVarQueryParams[utility::conversions::to_string_t("redeemableStart")] = ApiClient::parameterToString(*redeemableStart);
    }
    if (redeemableEnd)
    {
        localVarQueryParams[utility::conversions::to_string_t("redeemableEnd")] = ApiClient::parameterToString(*redeemableEnd);
    }
    if (conditionType)
    {
        localVarQueryParams[utility::conversions::to_string_t("conditionType")] = ApiClient::parameterToString(*conditionType);
    }
    if (isbn)
    {
        localVarQueryParams[utility::conversions::to_string_t("isbn")] = ApiClient::parameterToString(*isbn);
    }
    if (asin)
    {
        localVarQueryParams[utility::conversions::to_string_t("asin")] = ApiClient::parameterToString(*asin);
    }
    if (catalogNumbers)
    {
        localVarQueryParams[utility::conversions::to_string_t("catalogNumbers")] = ApiClient::parameterToString(*catalogNumbers);
    }
    if (availabilityDate)
    {
        localVarQueryParams[utility::conversions::to_string_t("availabilityDate")] = ApiClient::parameterToString(*availabilityDate);
    }
    if (parentalRating)
    {
        localVarQueryParams[utility::conversions::to_string_t("parentalRating")] = ApiClient::parameterToString(*parentalRating);
    }
    if (mediaType)
    {
        localVarQueryParams[utility::conversions::to_string_t("mediaType")] = ApiClient::parameterToString(*mediaType);
    }
    if (duration)
    {
        localVarQueryParams[utility::conversions::to_string_t("duration")] = ApiClient::parameterToString(*duration);
    }
    if (author)
    {
        localVarQueryParams[utility::conversions::to_string_t("author")] = ApiClient::parameterToString(*author);
    }
    if (releaseDate)
    {
        localVarQueryParams[utility::conversions::to_string_t("releaseDate")] = ApiClient::parameterToString(*releaseDate);
    }
    if (collectionIds)
    {
        localVarQueryParams[utility::conversions::to_string_t("collectionIds")] = ApiClient::parameterToString(*collectionIds);
    }
    if (availability)
    {
        localVarQueryParams[utility::conversions::to_string_t("availability")] = ApiClient::parameterToString(*availability);
    }
    if (availabilitySummary)
    {
        localVarQueryParams[utility::conversions::to_string_t("availabilitySummary")] = ApiClient::parameterToString(*availabilitySummary);
    }

    std::shared_ptr<IHttpBody> localVarHttpBody;
    utility::string_t localVarRequestHttpContentType;

    // use JSON if possible
    if ( localVarConsumeHttpContentTypes.size() == 0 || localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/json")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/json");
    }
    // multipart formdata
    else if( localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("multipart/form-data")) != localVarConsumeHttpContentTypes.end() )
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("multipart/form-data");
    }
    else if (localVarConsumeHttpContentTypes.find(utility::conversions::to_string_t("application/x-www-form-urlencoded")) != localVarConsumeHttpContentTypes.end())
    {
        localVarRequestHttpContentType = utility::conversions::to_string_t("application/x-www-form-urlencoded");
    }
    else
    {
        throw ApiException(415, utility::conversions::to_string_t("MediaApi->updateMedia does not consume any supported media type"));
    }


    return m_ApiClient->callApi(localVarPath, utility::conversions::to_string_t("POST"), localVarQueryParams, localVarHttpBody, localVarHeaderParams, localVarFormParams, localVarFileParams, localVarRequestHttpContentType)
    .then([=, this](web::http::http_response localVarResponse)
    {
        if (m_ApiClient->getResponseHandler())
        {
            m_ApiClient->getResponseHandler()(localVarResponse.status_code(), localVarResponse.headers());
        }

        // 1xx - informational : OK
        // 2xx - successful       : OK
        // 3xx - redirection   : OK
        // 4xx - client error  : not OK
        // 5xx - client error  : not OK
        if (localVarResponse.status_code() >= 400)
        {
            throw ApiException(localVarResponse.status_code()
                , utility::conversions::to_string_t("error calling updateMedia: ") + localVarResponse.reason_phrase()
                , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
        }

        // check response content type
        if(localVarResponse.headers().has(utility::conversions::to_string_t("Content-Type")))
        {
            utility::string_t localVarContentType = localVarResponse.headers()[utility::conversions::to_string_t("Content-Type")];
            if( localVarContentType.find(localVarResponseHttpContentType) == std::string::npos )
            {
                throw ApiException(500
                    , utility::conversions::to_string_t("error calling updateMedia: unexpected response type: ") + localVarContentType
                    , std::make_shared<std::stringstream>(localVarResponse.extract_utf8string(true).get()));
            }
        }

        return localVarResponse.extract_string();
    })
    .then([=, this](utility::string_t localVarResponse)
    {
        std::shared_ptr<MediaOfferResponse> localVarResult(new MediaOfferResponse());

        if(localVarResponseHttpContentType == utility::conversions::to_string_t("application/json"))
        {
            web::json::value localVarJson = web::json::value::parse(localVarResponse);

            ModelBase::fromJson(localVarJson, localVarResult);
        }
        // else if(localVarResponseHttpContentType == utility::conversions::to_string_t("multipart/form-data"))
        // {
        // TODO multipart response parsing
        // }
        else
        {
            throw ApiException(500
                , utility::conversions::to_string_t("error calling updateMedia: unsupported response type"));
        }

        return localVarResult;
    });
}

}
}
}
}

